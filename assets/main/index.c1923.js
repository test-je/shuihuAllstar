System.register("chunks:///_virtual/RedDotControl.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts","./BundleManager.ts"],(function(e){"use strict";var t,o,r,n,a,i,u,d,l,s,p,c,h,m,y,f,g,S,v,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.defineProperty,n=e.assertThisInitialized,a=e.initializerDefineProperty,i=e.createClass,u=e.asyncToGenerator},function(e){d=e.cclegacy,l=e._decorator,s=e.Enum,p=e.SpriteFrame,c=e.director,h=e.Scheduler,m=e.Label,y=e.isValid,f=e.Component,g=e.SpriteAtlas,S=e.Sprite},function(e){v=e.LogUtil},function(e){_=e.BundleManager}],execute:function(){var b,N,w,F,L,R;e("RedDotType",void 0),d._RF.push({},"0083aeqLfZBqqtiyFVndGm+","RedDotControl",void 0);var C,D=l.ccclass,A=l.property,P=l.executeInEditMode;!function(e){e[e.Null=0]="Null",e[e.Normal=1]="Normal",e[e.Amount=2]="Amount",e[e.Sigh=3]="Sigh",e[e.Ask=4]="Ask"}(C||(C=e("RedDotType",{})));e("RedDotControl",(b=D("RedDotControl"),N=A({type:s(C)}),w=A(p),b(F=P((t((L=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return t=e.call.apply(e,[this].concat(i))||this,r(n(t),"imageUrl",["red1","red2","red3","red4"]),r(n(t),"redNode",null),r(n(t),"amountLabel",null),r(n(t),"_type",C.Amount),a(n(t),"spriteFrames",R,n(t)),r(n(t),"atlasPath","texture/common/common"),r(n(t),"_amount",0),r(n(t),"_sch",null),r(n(t),"updateShowFunction",void 0),r(n(t),"_param",void 0),r(n(t),"_isScheduler",!1),t}o(t,e);var d=t.prototype;return d.onLoad=function(){var e=this;e._sch=c.getScheduler(),h.enableForTarget(this),e.redNode=e.node.getChildByName("redNode"),null!=e.redNode?(e.amountLabel=e.redNode.getChildByName("label").getComponent(m),null==e.amountLabel&&v.error("Not find label in Children"),e.updateRedPot(e._type,e._amount),e.delayUpdateShow()):console.error(e.node.name+" is not find redNode!")},d.updateRedPot=function(){var e=u((function*(e,t){var o=this;o.redNode.active=t>0,o.amountLabel.node.active=e===C.Amount,o.amountLabel.string=t.toString(),o.updateShow();var r=yield _.instance().loadRes(o.atlasPath,g);o.redNode.getComponent(S).spriteFrame=r.spriteFrames[o.imageUrl[o.type]]}));return function(t,o){return e.apply(this,arguments)}}(),d.delayUpdateShow=function(){this._isScheduler||(this._isScheduler=!0,this.scheduleOnce(this.updateShow.bind(this),.5))},d.updateShow=function(){var e=this;if(this._isScheduler=!1,y(e.updateShowFunction)){var t=e.param?e.updateShowFunction(e.param):e.updateShowFunction();e.redNode.active=t>0,e.amountLabel.string=t.toString()}},i(t,[{key:"type",get:function(){return this._type},set:function(e){this._type=e;var t=1;e==C.Amount&&(t=2),this.updateRedPot(e,t)}},{key:"param",get:function(){return this._param},set:function(e){this._param=e,this.delayUpdateShow()}}]),t}(f)).prototype,"type",[N],Object.getOwnPropertyDescriptor(L.prototype,"type"),L.prototype),R=t(L.prototype,"spriteFrames",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=L))||F)||F));d._RF.pop()}}}));

System.register("chunks:///_virtual/SkillEffect1.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts","./CommonParam.ts","./HeroAttributeEnum.ts","./HeroAttribute.ts","./SkillEffectBase.ts","./ValueTypeEnum.ts"],(function(e){"use strict";var t,r,a,n,i,u,l,c,f,o;return{setters:[function(e){t=e.inheritsLoose,r=e.defineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy},function(e){i=e.LogUtil},function(e){u=e.CommonParam},function(e){l=e.HeroAttributeEnum},function(e){c=e.HeroAttribute},function(e){f=e.SkillEffectBase},function(e){o=e.ValueTypeEnum}],execute:function(){n._RF.push({},"02173pvS5pO9rPtYukdpvX9","SkillEffect1",void 0);var A;e("SkillEffect1",function(e){function n(){for(var t,n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return t=e.call.apply(e,[this].concat(i))||this,r(a(t),"attributeArray",[]),r(a(t),"valueArray",[]),r(a(t),"influenceAttributeArray",void 0),r(a(t),"relateType",void 0),t}t(n,e);var f=n.prototype;return f.init=function(){var e=this,t=e._effectCfg.value.split(u.split1);e._handleArray(t,0,e.attributeArray),i.log("效果类型1_"+e._effectCfg.id+"属性",e.attributeArray),1==e._effectCfg.valueType?(e._handleArray(t,1,e.valueArray),i.log("效果类型1_"+e._effectCfg.id+"固定值",e.valueArray)):(e.influenceAttributeArray||(e.influenceAttributeArray=[]),e.relateType=Number(t[1]),i.log("效果类型1_"+e._effectCfg.id+"关联"+e.relateType),e._handleArray(t,2,e.influenceAttributeArray),i.log("效果类型1_"+e._effectCfg.id+"影响属性值",e.influenceAttributeArray),e._handleArray(t,3,e.valueArray),i.log("效果类型1_"+e._effectCfg.id+"百分比值",e.valueArray))},f._handleArray=function(e,t,r){for(var a=e[t].split(u.split2),n=a.length,i=0;i<n;i++)r.push(Number(a[i]))},f._handleHeroBase=function(t){var r=this;e.prototype._handleHeroBase.call(this,t);for(var a,n,u,l=r.attributeArray,f=r.valueArray,s=r.influenceAttributeArray,y=l.length,_=r.relateType,p=r._effectCfg.valueType,g=new c,E=0;E<y;E++)n=l[E],a=f[E],p==o.PERCENT&&(n=l[E],u=s[E],a=_==A.TARGET?t.getAttributeByEnum(u)*a/1e3:r._skillEffectData.heroBase.getAttributeByEnum(u)*a/1e3),g[r._getAttributeKey(n)]=a,i.log("效果1id"+t.id+"/属性"+n+"变更"+a);r._returnMap[t.id].attribute=g},f._getAttributeKey=function(e){switch(e){case l.MAX_HP:return"maxHp";case l.HP:return"hp";case l.ATTACK:return"attack";case l.MOVE:return"move";case l.RATE:return"rate";case l.CRIT_CHANCE:return"critChance";case l.CRIT_DAMAGE:return"critDamage";case l.DODGE_CHANCE:return"dodgeChance";case l.DAMAGE_REDUCTION:return"damageReduction"}},n}(f));!function(e){e[e.SELF=1]="SELF",e[e.TARGET=2]="TARGET"}(A||(A={})),n._RF.pop()}}}));

System.register("chunks:///_virtual/CommonParam.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var o,t;return{setters:[function(n){o=n.defineProperty},function(n){t=n.cclegacy}],execute:function(){n("CommonId",void 0),t._RF.push({},"0470fncgwRJkpk9W351pLn0","CommonParam",void 0);var e,i=n("CommonParam",(function(){}));o(i,"split1","|"),o(i,"split2",","),o(i,"split3","_"),function(n){n[n.EXP=3]="EXP"}(e||(e=n("CommonId",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/HeroStart.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillEffectData.ts","./SkillTriggerEnum.ts","./HeroStateEnum.ts","./HeroState.ts"],(function(t){"use strict";var e,n,a,r,i,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){a=t.SkillEffectData},function(t){r=t.SkillTriggerEnum},function(t){i=t.HeroStateEnum},function(t){c=t.HeroState}],execute:function(){n._RF.push({},"050bdLY5bZJHr0bWPj4uOXK","HeroStart",void 0);t("HeroStart",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this,n=e._stateMachine.heroBase,c=new a;if(c.handleHeroBase=n,e._handlePassiveSkill(r.START,c),n.checkSelectSkill(r.START)){var o=n.selectSkill(r.START,!1);o?e._stateMachine.changeState(i.SKILL,null,o):e._stateMachine.changeState(i.SEARCH)}else e._stateMachine.changeState(i.SEARCH)},n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/FightUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./CommonParam.ts","./FightEventEnum.ts","./GameEvent.ts","./CommonUtil.ts","./ConfigManager.ts","./GameConfigNameEnum.ts","./PoolManager.ts","./UIManager.ts","./UIBase.ts","./ToastUtil.ts","./MainEventEnum.ts","./DataManager.ts","./GameUtil.ts","./UIModule.ts","./FightFontItem.ts","./HeroBase.ts","./FightManager.ts","./HeroExpItem.ts","./HeroHpItem.ts","./HeroItem.ts","./HeroLvItem.ts","./HeroNameFrameItem.ts","./HeroNameItem.ts"],(function(e){"use strict";var t,a,o,n,i,r,l,s,g,d,h,u,f,p,c,_,m,v,b,I,M,N,P,y,S,A,H,C,w,F,T,E,x,L,U,B,R,z,D,W,V,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,o=e.defineProperty,n=e.assertThisInitialized,i=e.initializerDefineProperty,r=e.asyncToGenerator},function(e){l=e.cclegacy,s=e._decorator,g=e.Node,d=e.UITransform,h=e.Prefab,u=e.Sprite,f=e.Animation,p=e.Label,c=e.Widget,_=e.v3,m=e.instantiate},function(e){v=e.BundleManager},function(e){b=e.CommonParam,I=e.CommonId},function(e){M=e.FightEventEnum},function(e){N=e.GameEvent},function(e){P=e.CommonUtil},function(e){y=e.ConfigManager},function(e){S=e.GameConfigNameEnum},function(e){A=e.PoolManager},function(e){H=e.UIManager},function(e){C=e.UIBase},function(e){w=e.ToastUtil},function(e){F=e.MainEventEnum},function(e){T=e.DataManager},function(e){E=e.GameUtil},function(e){x=e.UIModule},function(e){L=e.FightFontItem},function(e){U=e.HeroBase},function(e){B=e.FightManager},function(e){R=e.HeroExpItem},function(e){z=e.HeroHpItem},function(e){D=e.HeroItem},function(e){W=e.HeroLvItem},function(e){V=e.HeroNameFrameItem},function(e){G=e.HeroNameItem}],execute:function(){var O,k,X,Z,j,K,Y,q,J,Q,$,ee,te,ae,oe,ne,ie,re,le,se,ge,de,he,ue,fe,pe,ce,_e,me,ve,be,Ie,Me,Ne,Pe,ye,Se,Ae,He,Ce,we,Fe,Te,Ee,xe,Le,Ue,Be,Re,ze,De,We,Ve,Ge,Oe,ke,Xe,Ze,je,Ke,Ye,qe,Je,Qe,$e,et,tt,at,ot,nt,it,rt,lt,st,gt;l._RF.push({},"05c9e+RtphO57XuXW+iItEy","FightUI",void 0);var dt=s.ccclass,ht=s.property;e("FightUI",(O=dt("FightUI"),k=ht(g),X=ht(g),Z=ht(g),j=ht(g),K=ht(g),Y=ht(g),q=ht(g),J=ht(g),Q=ht(d),$=ht(d),ee=ht(d),te=ht(d),ae=ht(d),oe=ht(g),ne=ht(h),ie=ht(h),re=ht(h),le=ht(h),se=ht(h),ge=ht(h),de=ht(g),he=ht(g),ue=ht(u),fe=ht(g),pe=ht(g),ce=ht(f),_e=ht(f),me=ht(p),ve=ht(c),be=ht(c),Ie=ht(g),Me=ht(h),Ne=ht(g),Pe=ht(h),ye=ht(p),Se=ht(u),O((Ce=t((He=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(n(t),"hasMask",!1),i(n(t),"fightNode",Ce,n(t)),i(n(t),"hpNode",we,n(t)),i(n(t),"nameNode",Fe,n(t)),i(n(t),"lvNode",Te,n(t)),i(n(t),"fontNode",Ee,n(t)),i(n(t),"waitNode",xe,n(t)),i(n(t),"touchNode",Le,n(t)),i(n(t),"nameFrameNode",Ue,n(t)),i(n(t),"touchNodeUITransform",Be,n(t)),i(n(t),"waitNodeUITransform",Re,n(t)),i(n(t),"fightNodeUITransform",ze,n(t)),i(n(t),"slotNodeUITransform",De,n(t)),i(n(t),"slotUITransform",We,n(t)),i(n(t),"slotNodeArray",Ve,n(t)),i(n(t),"heroItemPrefab",Ge,n(t)),i(n(t),"heroNameItemPrefab",Oe,n(t)),i(n(t),"fightFontItemPrefab",ke,n(t)),i(n(t),"heroHpItemPrefab",Xe,n(t)),i(n(t),"heroLvItemPrefab",Ze,n(t)),i(n(t),"heroNameFrameItemPrefab",je,n(t)),i(n(t),"slotLeftButtonNode",Ke,n(t)),i(n(t),"slotRightButtonNode",Ye,n(t)),i(n(t),"bgSprite",qe,n(t)),i(n(t),"fightButtonNode",Je,n(t)),i(n(t),"stopButtonNode",Qe,n(t)),i(n(t),"levelAnimation",$e,n(t)),i(n(t),"resultAnimation",et,n(t)),i(n(t),"levelLabel",tt,n(t)),i(n(t),"slotWidget",at,n(t)),i(n(t),"slotNodeWidget",ot,n(t)),i(n(t),"fightSlotNode",nt,n(t)),i(n(t),"fightSlotItemPrefab",it,n(t)),i(n(t),"expNode",rt,n(t)),i(n(t),"expItemPrefab",lt,n(t)),i(n(t),"totalExpLabel",st,n(t)),i(n(t),"resultSprite",gt,n(t)),o(n(t),"_levelCfg",void 0),o(n(t),"_chapterCfg",void 0),o(n(t),"_slotRect",void 0),o(n(t),"_fightPosV3Array",[]),o(n(t),"_fightManager",B.instance()),o(n(t),"_dataManager",T.instance()),o(n(t),"_slotPosV3Array",[]),o(n(t),"_slotPage",0),o(n(t),"_maxSlotPage",void 0),o(n(t),"_waitSlotArray",[]),o(n(t),"_slotAmount",void 0),o(n(t),"_poolManager",A.instance()),o(n(t),"_bundleManager",v.instance()),o(n(t),"_configManager",y.instance()),t}a(t,e);var l=t.prototype;return l.start=function(){var e=this;N.on(F.PUT_HERO,e.onPut,e),N.on(F.TOUCH_HERO,e.onTouch,e),N.on(F.UPDATE_HERO,e.updateFightHero,e),N.on(M.MOVE,e.changeHeroItemZIndex,e),N.on(M.ADD_HEROS,e.addHeros,e),N.on(M.FIGHT_RESULT,e.onFightResult,e),N.on(M.NEXT_FIGHT,e.onFight,e),N.on(M.RESET,e.onReset,e),N.on(M.SHOW_FONT,e.onFightFont,e),N.on(F.UP_SKILL,e._updateHero,e),N.on(F.UP_LV,e._updateHero,e),N.on(F.ADD_EXP,e._updateExp,e),N.on(F.COLLECT_EXP,e._updateTotalExp,e),N.on(M.FIGHT_END,e._onFightEnd,e),N.on(F.RESET_HERO,e._onReset,e),e._chapterCfg=y.instance().chapterCfgMap[e._dataManager.chapter],e._levelCfg=y.instance().levelCfgMap[e._dataManager.level],e.slotNodeWidget.updateAlignment(),e._slotRect=e.slotNodeUITransform.getBoundingBoxToWorld(),e._fightManager.start(),e._initFightPos(),e._initSlotPos(),e._slotAmount=e.slotNodeArray.length,e._maxSlotPage=e._dataManager.waitSlotArray.length/e._slotAmount-1,e._getWaitSlotArray(),e._setSlotButton(),e._initHero(e._waitSlotArray,e._slotPosV3Array,!1),e._initHero(e._dataManager.fightSlotArray,e._fightPosV3Array,!0),e._bundleManager.setSpriteFrame(e.bgSprite,"bg/"+e._levelCfg.bg),e._setFightButtonVisible(!0),H.instance().showUI(x.LEVEL_TOP_UI),window.FightUI=this},l._getWaitSlotArray=function(){var e=this;e._waitSlotArray.length=0;for(var t=e._waitSlotArray,a=e._dataManager.waitSlotArray,o=e._slotAmount*(e._slotPage+1),n=e._slotPage*e._slotAmount;n<o;n++)t.push(a[n])},l._initFightPos=function(){for(var e,t,a,o=this,n=o._dataManager.fightSlotArray.length,i=y.instance().getMisc(2).split(b.split1),r=n,l=o.fightSlotItemPrefab,s=o.fightSlotNode,g=o._fightPosV3Array,d=0;d<r;d++)e=i[d].split(b.split2),a=_(Number(e[0]),Number(e[1])),g.push(a),(t=m(l)).setPosition(a),s.addChild(t)},l._initSlotPos=function(){var e,t,a=this,o=a.slotNodeArray,n=o.length,i=a._slotPosV3Array,r=a.slotUITransform,l=a.waitNodeUITransform;a.slotWidget.updateAlignment();for(var s=0;s<n;s++)e=r.convertToWorldSpaceAR(o[s].getPosition()),t=l.convertToNodeSpaceAR(e),i.push(t)},l.addFightHero=function(e,t,a){var o=this;a||(a=o._poolManager.getNode(o.heroItemPrefab));var n=a.getComponent(D);n.heroBase=e,o.fightNode.addChild(a),o.addHeroComponent(n),e.setPos(t),e.isFight=!0,e.initState(n),o.changeHeroItemZIndex(n),o._fightManager.pushHeroBase(e),n.setPosition(),n.setHpVisible(!0),N.dispatchEvent(M.ADD_FIGHT)},l.addHeroComponent=function(e){var t=this,a=t._poolManager.getNode(t.heroHpItemPrefab),o=a.getComponent(z);e.hpItem=o,e.setHpItem(),t.hpNode.addChild(a);var n=t._poolManager.getNode(t.heroLvItemPrefab),i=n.getComponent(W);e.lvItem=i,e.setLvItem(),t.lvNode.addChild(n);var r=t._poolManager.getNode(t.heroNameItemPrefab),l=r.getComponent(G);e.nameItem=l,e.setNameItem(),t.nameNode.addChild(r);var s=t._poolManager.getNode(t.heroNameFrameItemPrefab),g=s.getComponent(V);e.nameFrameItem=g,e.setNameFrameItem(),t.nameFrameNode.addChild(s);var d=t._poolManager.getNode(t.expItemPrefab),h=d.getComponent(R);e.expItem=h,e.setExpItem(),t.expNode.addChild(d)},l.addWaitHero=function(e,t){var a=this,o=a._poolManager.getNode(a.heroItemPrefab),n=o.getComponent(D);n.heroBase=e,a.waitNode.addChild(o),a.addHeroComponent(n),o.setPosition(t),e.setPos(t),e.isFight=!1,e.initState(n),n.setPosition(),n.setHpVisible(!1)},l._removeHero=function(e){for(var t=e.length-1;t>=0;t--)e[t].getComponent(D).removeToPool()},l.onTouch=function(e){var t=e.parent.getComponent(d).convertToWorldSpaceAR(e.getPosition()),a=this.touchNodeUITransform.convertToNodeSpaceAR(t);this.touchNode.addChild(e),e.setPosition(a)},l._onReset=function(e){var t=e.node;e.heroBase.isFight?this.fightNode.addChild(t):this.waitNode.addChild(t),e.heroBase.setToResetPos(),e.setPosition()},l.onPut=function(e,t,a){var o=this,n=t.heroBase,i=n.heroCfg.id,r=!o._slotRect.contains(e),l=this._dataManager.fightSlotArray.indexOf(i),s=t.node;if(r&&o._fightManager.isFight)return o.waitNode.addChild(s),n.setToResetPos(),void t.setPosition();if(a){var g,h=a.heroBase,u=h.heroCfg.id,f=a.node;r?(o._changeFightSlot(h.slotIndex,i,n),g=o.fightNode,t.setHpVisible(!0)):(a.getExp(),o._changeWaitSlot(h.slotIndex,i,n),g=o.waitNode,t.setHpVisible(!1)),-1!=l?(o._changeFightSlot(l,u,h),o.fightNode.addChild(f),N.dispatchEvent(F.ADD_FIGHT,u),a.setHpVisible(!0)):(o._changeWaitSlot(n.slotIndex,u,h),o.waitNode.addChild(f),N.dispatchEvent(F.ADD_WAIT,u),a.setHpVisible(!1));var p=h.slotIndex;h.slotIndex=n.slotIndex,n.slotIndex=p;var c=h.resetPos;h.resetPos=n.resetPos,n.resetPos=c,g.addChild(s),-1!=l?r||N.dispatchEvent(F.ADD_WAIT,i):r&&N.dispatchEvent(F.ADD_FIGHT,i),n.setToResetPos(),t.setPosition(),h.setToResetPos(),a.setPosition()}else{var _,m,v,b,I,M;r?(_=o._dataManager.fightSlotArray,m=o._fightPosV3Array,v=o.fightNodeUITransform,I=!0,b=o.fightNode,-1!=l?(o._changeFightSlot(n.slotIndex,0,n),M=n.slotIndex):(o._changeWaitSlot(n.slotIndex,0,n),M=-1)):(_=o._waitSlotArray,m=o._slotPosV3Array,v=o.waitNodeUITransform,I=!1,b=o.waitNode,-1!=l?(o._changeFightSlot(n.slotIndex,0,n),M=-1):(o._changeWaitSlot(n.slotIndex,0,n),M=o._getTempSlotIndex(n.slotIndex)));for(var y,S,A,H,C,w=m.length,T=s.parent.getComponent(d).convertToWorldSpaceAR(t.node.getPosition()),E=v.convertToNodeSpaceAR(T),x=0;x<w;x++)H=m[x],_[x]&&M!=x||((S=P.getDistance(H.x,H.y,E.x,E.y))<y||!y)&&(y=S,A=r?x:o._getSlotIndex(x));if(null!=A)r?(n.slotIndex=A,o._changeFightSlot(n.slotIndex,i,n),-1==l&&N.dispatchEvent(F.ADD_FIGHT,i),C=A):(n.slotIndex=A,o._changeWaitSlot(n.slotIndex,i,n),-1!=l&&N.dispatchEvent(F.ADD_WAIT,i),C=o._getTempSlotIndex(A)),b.addChild(s),t.setHpVisible(I),n.setResetPos(m[C]);n.setToResetPos(),t.setPosition()}},l.update=function(e){B.instance().doUpdate(e)},l.changeHeroItemZIndex=function(e){var t=e.node.getSiblingIndex(),a=t+1,o=e.node.getPosition().y,n=this.fightNode.children;if(a<=n.length-1&&o<n[a].getComponent(D).node.getPosition().y)return void e.setZIndex(a);var i=t-1;i>=0&&(o>n[i].getComponent(D).node.getPosition().y&&e.setZIndex(i))},l._initHero=function(e,t,a){for(var o,n,i=this,r=e.length,l=[],s=0;s<r;s++)(n=e[s])&&((o=new U).camp=1,o.heroCfg=y.instance().heroCfgMap[n],o.lv=i._dataManager.heroDataMap[n].lv,o.slotIndex=a?s:i._getSlotIndex(s),o.skillLvMap=T.instance().heroDataMap[n].skillLvMap,o.star=E.getHeroTotalSkillLv(o.skillLvMap),o.setResetPos(t[s]),l.push(o));i.addHeros(l,a)},l._getHeroItemGenerator=function*(e,t){for(var a,o=e.length,n=0;n<o;n++)a=e[n],t?yield this.addFightHero(a,a.resetPos):yield this.addWaitHero(a,a.resetPos)},l.addHeros=function(){var e=r((function*(e,t){yield this.executePreFrame(this._getHeroItemGenerator(e,t),1)}));return function(t,a){return e.apply(this,arguments)}}(),l.executePreFrame=function(e,t){var a=this;return new Promise((function(o,n){var i=e;!function e(){for(var n=(new Date).getTime(),r=i.next();;r=i.next()){if(null==r||r.done)return void o();if((new Date).getTime()-n>t)return void a.scheduleOnce((function(){e()}))}}()}))},l.onFight=function(){var e=r((function*(){var e=this;e._dataManager.checkFight()?e._fightManager.isFight||(e._fightManager.isLoop||(e._fightManager.isLoop=!0),e._bundleManager.setSpriteFrame(e.bgSprite,"bg/"+e._levelCfg.bg),e._fightManager.c(),yield e.addHeros(e._fightManager.enemyHeroBaseArray,!0),e._fightManager.enemyHeroBaseArray.length=0,e._fightManager.initFight(),e.onShowLevel(e._levelCfg.id),e._setFightButtonVisible(!1),e.fightSlotNode.active=!1):w.show("没有上阵英雄")}));return function(){return e.apply(this,arguments)}}(),l._onFightEnd=function(){this._setFightButtonVisible(!0),this.fightSlotNode.active=!0},l.onStop=function(){var e=this;e._fightManager.isLoop&&(e._fightManager.isLoop=!1,e.fightButtonNode.active=!1,e.stopButtonNode.active=!1)},l.onFightResult=function(e){var t=this;1==e?(t.resultAnimation.play(),v.instance().setSpriteAtlas(t.resultSprite,"fight/fight","Frame_zdsl"),t._levelCfg.isFinal?t._chapterCfg.isFinal?(H.instance().showUI(x.LEVEL_REWARD_UI),t._dataManager.level=1,t._dataManager.setLevel(t._dataManager.level),t._dataManager.chapter=1,t._dataManager.setChapter(t._dataManager.chapter),t._chapterCfg=t._configManager.chapterCfgMap[t._dataManager.chapter],t._levelCfg=y.instance().levelCfgMap[t._dataManager.level]):(t._dataManager.chapter++,t._dataManager.setChapter(t._dataManager.chapter),t._chapterCfg=t._configManager.chapterCfgMap[t._dataManager.chapter],t._dataManager.setLevel(t._chapterCfg.level[0]),t._levelCfg=y.instance().levelCfgMap[t._dataManager.level],t._fightManager.isLoop=!1,t._setFightButtonVisible(!0),H.instance().showUI(x.CHAPTER_SHOW_UI)):(t._dataManager.level++,t._dataManager.setLevel(t._dataManager.level),t._levelCfg=y.instance().levelCfgMap[t._dataManager.level],H.instance().showUI(x.LEVEL_REWARD_UI)),N.dispatchEvent(F.CHANG_LEVEL)):(t.resultAnimation.play(),v.instance().setSpriteAtlas(t.resultSprite,"fight/fight","Frame_zdsb"),t._dataManager.level>1&&(t._dataManager.level--,t._dataManager.setLevel(t._dataManager.level),t._levelCfg=y.instance().levelCfgMap[t._dataManager.level],N.dispatchEvent(F.CHANG_LEVEL)))},l.onReset=function(){for(var e=this.fightNode.children.length,t=0;t<e;t++)this.fightNode.children[t].getComponent(D).setHeroActive(!0)},l._setSlotButton=function(){var e=this;e.slotLeftButtonNode.active=e._slotPage>0,e.slotRightButtonNode.active=e._slotPage<e._maxSlotPage},l.onSlotButton=function(e,t){var a=this;a._slotPage+=Number(t),a._setSlotButton(),a._getWaitSlotArray(),a._removeHero(a.waitNode.children),a._initHero(a._waitSlotArray,a._slotPosV3Array,!1)},l._getTempSlotIndex=function(e){return e-this._slotPage*this._slotAmount},l._getSlotIndex=function(e){return e+this._slotPage*this._slotAmount},l._changeWaitSlot=function(e,t,a){var o=this;0!=t&&(a.isFight=!1),o._waitSlotArray[o._getTempSlotIndex(e)]=t,o._dataManager.waitSlotArray[e]=t,o._dataManager.setWaitSlot()},l._changeFightSlot=function(e,t,a){var o=this._dataManager.fightSlotArray;0==t?this._fightManager.spliceHeroBase(a):(a.isFight=!0,0!=o[e]&&this._fightManager.spliceHeroBaseById(o[e]),this._fightManager.pushHeroBase(a)),o[e]=t,this._dataManager.setFightSlot()},l.newHero=function(){var e=this,t=e._configManager.getConfigArray(S.ITEMCFG,{type:2}),a=P.getRandom(0,t.length-1),o=t[a].relateId[0],n=e._dataManager.checkHasHero(o);if(H.instance().showUI(x.LOTTERY_UI,{isHasHero:n,heroId:o,chipAmount:1}),n)return console.log("英雄碎片"+t[a].id),void e._dataManager.setItemAmount(t[a].id,1);console.log("新英雄"+t[a].id),this._dataManager.addHero(o);var i=T.instance().getEmptySlot();if(this._dataManager.waitSlotArray[i]=o,N.dispatchEvent(F.ADD_WAIT,o),i>=this._slotPage*this._slotAmount&&i<(this._slotPage+1)*this._slotAmount){var r=this._getTempSlotIndex(i),l=new U;l.camp=1,l.heroCfg=y.instance().heroCfgMap[o],l.slotIndex=i,l.skillLvMap=T.instance().heroDataMap[o].skillLvMap,l.lv=T.instance().heroDataMap[o].lv,l.star=E.getHeroTotalSkillLv(l.skillLvMap),l.setResetPos(this._slotPosV3Array[r]),this.addWaitHero(l,l.resetPos)}if(this._dataManager.getHeroAmount()%this._slotAmount==0){for(var s=this._slotAmount,g=0;g<s;g++)this._dataManager.waitSlotArray.push(0);e._maxSlotPage=e._dataManager.waitSlotArray.length/e._slotAmount-1,this._setSlotButton()}e._dataManager.setWaitSlot()},l.collectExp=function(){for(var e=this.waitNode.children,t=e.length,a=0;a<t;a++)e[a].getComponent(D).getExp()},l.onFightFont=function(e,t,a,o){var n=this,i=n._poolManager.getNode(n.fightFontItemPrefab),r=i.getComponent(L);i.setPosition(t),n.fontNode.addChild(i),r.updateView(e,a,o)},l.updateFightHero=function(){var e=this;e._removeHero(e.waitNode.children),e._removeHero(e.fightNode.children),e._getWaitSlotArray(),e._fightManager.clearHeroBase(),e._initHero(e._waitSlotArray,e._slotPosV3Array,!1),e._initHero(e._dataManager.fightSlotArray,e._fightPosV3Array,!0)},l.onShowLevel=function(e){this.levelLabel.string="第"+e+"关",this.levelAnimation.play()},l._setFightButtonVisible=function(e){this.fightButtonNode.active=e,this.stopButtonNode.active=!e},l.onLineUpButton=function(){H.instance().showUI(x.FRONT_UI)},l._updateHero=function(e,t){var a=this,o=-1!=a._waitSlotArray.indexOf(t),n=-1!=a._dataManager.fightSlotArray.indexOf(t);if(o||n)for(var i,r=n?a.fightNode.children:a.waitNode.children,l=r.length,s=0;s<l;s++)if((i=r[s].getComponent(D)).heroBase.heroCfg.id==t){e?(i.heroBase.lv=a._dataManager.heroDataMap[t].lv,i.setLv()):(i.heroBase.star=E.getHeroTotalSkillLv(a._dataManager.heroDataMap[t].skillLvMap),i.setStar());break}},l._updateExp=function(){for(var e=this.waitNode.children,t=e.length,a=0;a<t;a++)e[a].getComponent(D).setExp()},l._updateTotalExp=function(){var e=this._dataManager.getItemAmount(I.EXP),t=P.amountConvert(e);this.totalExpLabel.string=t},t}(C)).prototype,"fightNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=t(He.prototype,"hpNode",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe=t(He.prototype,"nameNode",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=t(He.prototype,"lvNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=t(He.prototype,"fontNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=t(He.prototype,"waitNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=t(He.prototype,"touchNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=t(He.prototype,"nameFrameNode",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=t(He.prototype,"touchNodeUITransform",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=t(He.prototype,"waitNodeUITransform",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=t(He.prototype,"fightNodeUITransform",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=t(He.prototype,"slotNodeUITransform",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=t(He.prototype,"slotUITransform",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=t(He.prototype,"slotNodeArray",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ge=t(He.prototype,"heroItemPrefab",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=t(He.prototype,"heroNameItemPrefab",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=t(He.prototype,"fightFontItemPrefab",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=t(He.prototype,"heroHpItemPrefab",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=t(He.prototype,"heroLvItemPrefab",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je=t(He.prototype,"heroNameFrameItemPrefab",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=t(He.prototype,"slotLeftButtonNode",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ye=t(He.prototype,"slotRightButtonNode",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qe=t(He.prototype,"bgSprite",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=t(He.prototype,"fightButtonNode",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe=t(He.prototype,"stopButtonNode",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e=t(He.prototype,"levelAnimation",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=t(He.prototype,"resultAnimation",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=t(He.prototype,"levelLabel",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=t(He.prototype,"slotWidget",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=t(He.prototype,"slotNodeWidget",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=t(He.prototype,"fightSlotNode",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=t(He.prototype,"fightSlotItemPrefab",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=t(He.prototype,"expNode",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=t(He.prototype,"expItemPrefab",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=t(He.prototype,"totalExpLabel",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=t(He.prototype,"resultSprite",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=He))||Ae));l._RF.pop()}}}));

System.register("chunks:///_virtual/LineUpHeroItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts"],(function(e){"use strict";var n,t,i,o,a,r,s,c,l;return{setters:[function(e){n=e.defineProperty,t=e.inheritsLoose,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,r=e.Sprite,s=e.Label,c=e.Component},function(e){l=e.BundleManager}],execute:function(){var p;o._RF.push({},"0b079AOFlpAsocAJaSOoX2J","LineUpHeroItem",void 0);e("LineUpHeroItemData",(function(){n(this,"name",void 0),n(this,"icon",void 0),n(this,"star",void 0)}));var u=a.ccclass;a.property,e("LineUpHeroItem",u("LineUpHeroItem")(p=function(e){function o(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(i(t),"_iconSprite",null),n(i(t),"_nameLabel",null),n(i(t),"_starLabel",null),t}t(o,e);var a=o.prototype;return a.onLoad=function(){var e=this;e._iconSprite=e.node.getChildByName("icon").getComponent(r),e._nameLabel=e.node.getChildByName("name_lab").getComponent(s),e._starLabel=e.node.getChildByName("star_lab").getComponent(s)},a.hide=function(){this.node.active=!1},a.show=function(){this.node.active=!0},a.bind=function(e){var n=this;n._starLabel.string=e.star.toString(),n._nameLabel.string=e.name;var t=e.icon;t||(t="3"),l.instance().setSpriteFrame(n._iconSprite,"head/"+t)},o}(c))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroLvItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./HeroComponent.ts"],(function(e){"use strict";var t,r,o,n,i,l,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,a=e.Label},function(e){c=e.HeroComponent}],execute:function(){var s,u,p,v,L;i._RF.push({},"0c65dz7CD9CtokntITQraBQ","HeroLvItem",void 0);var f=l.ccclass,y=l.property;e("HeroLvItem",(s=f("HeroLvItem"),u=y(a),s((L=t((v=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,o(n(t),"lvLabel",L,n(t)),t}return r(t,e),t.prototype.setLv=function(e){this.lvLabel.string="L"+e},t}(c)).prototype,"lvLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=v))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts","./Singleton.ts","./BundleManager.ts","./UIModuleParams.ts","./UILayerType.ts"],(function(e){"use strict";var i,a,r,o,t,n,u,s,l,d,_,c,p,M,I,y,g;return{setters:[function(e){i=e.inheritsLoose,a=e.defineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,t=e._decorator,n=e.find,u=e.Prefab,s=e.instantiate,l=e.Input,d=e.BlockInputEvents,_=e.Sprite,c=e.math},function(e){p=e.LogUtil},function(e){M=e.Singleton},function(e){I=e.BundleManager},function(e){y=e.UIModuleParams},function(e){g=e.UILayerType}],execute:function(){var h;o._RF.push({},"0f6a1xY6T1AnK9A0I8+cKY1","UIManager",void 0);var v=t.ccclass,f=(t.property,function(){a(this,"uiModule",void 0),a(this,"params",void 0)});e("UIManager",v("UIManager")(h=function(e){function o(){for(var i,o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return i=e.call.apply(e,[this].concat(t))||this,a(r(i),"_uiNodeMap",void 0),a(r(i),"_bgMaskNode",void 0),a(r(i),"_mainNode",void 0),a(r(i),"_uiQueueArray",void 0),a(r(i),"_priorityArray",void 0),a(r(i),"_maskPriorityUIModule",void 0),a(r(i),"_createUIMap",void 0),a(r(i),"_showQueue",void 0),i}i(o,e);var t=o.prototype;return t.showUI=function(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];var o=this;if(o._priorityArray||(o._priorityArray=[]),o._uiNodeMap||(o._uiNodeMap={}),o._createUIMap||(o._createUIMap={}),o._uiNodeMap[e]||o._createUIMap[e])p.log("试图打开已存在的UI"+e);else{var t=y[e];if(!o._mainNode){var M=n("Canvas");o._mainNode=n(g.UI,M)}o._createUIMap[e]=!0,I.instance().loadRes("prefab/module/"+t.path,u,null,(function(i,r){if(i)console.error(i);else if(o._createUIMap[e]){var n=s(r);delete o._createUIMap[e];var u=n.getComponent(t.script);u.uiModule=e,n.setSiblingIndex(u.priority),o._priorityArray.splice(n.getSiblingIndex(),0,e),o._uiNodeMap[e]=n,o._mainNode.addChild(n),u.initShow&&u.initShow.apply(u,a);var M=o._bgMaskNode;if(u.hasMask)M||(M=o._bgMaskNode=o._mainNode.getChildByName("bgMask")).on(l.EventType.TOUCH_START,o._onMask,o),M.getComponent(d).enabled=!u.maskThrough,M.getComponent(_).color=c.color(0,0,0,u.maskAlpha),o._maskPriorityUIModule&&o._maskPriorityUIModule==e||(o._maskPriorityUIModule=e,M.setSiblingIndex(n.getSiblingIndex()-1)),M.active=!0}else p.log("已提前关闭页面"+e)}))}},t._onMask=function(){var e=this,i=y[e._maskPriorityUIModule],a=e._uiNodeMap[e._maskPriorityUIModule].getComponent(i.script);a.maskClose&&a.hide()},t.hideUI=function(e){var i=this;if(i._uiNodeMap){if(i._createUIMap[e])return delete i._createUIMap[e],void(i._showQueue==e&&(i._showQueue=null,i.checkUIQueue()));var a=i._uiNodeMap[e];if(a){delete i._uiNodeMap[e],a.removeFromParent();var r,o,t,n,u=i._priorityArray.length,s=e==i._maskPriorityUIModule;s&&(i._maskPriorityUIModule=null);for(var l=0;l<u;l++)if(r=i._priorityArray[l],s)if(r!=e){if((n=(t=i._uiNodeMap[r]).getComponent(r))&&n.hasMask){i._maskPriorityUIModule=r,i._bgMaskNode.setSiblingIndex(t.getSiblingIndex());break}}else o=l;else if(r==e){o=l;break}!i._maskPriorityUIModule&&i._bgMaskNode&&i._bgMaskNode.active&&(i._bgMaskNode.active=!1),i._priorityArray.splice(o,1),i._showQueue==e&&(i._showQueue=null,i.checkUIQueue())}else p.log("试图关闭不存在的UI"+e)}},t.addUIQueue=function(e){var i=this;i._uiQueueArray||(i._uiQueueArray=[]);var a=new f;a.uiModule=e;for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];a.params=[].concat(o),i._uiQueueArray.push(a),i.checkUIQueue()},t.checkUIQueue=function(){var e=this;if(e._uiQueueArray&&!e._showQueue){var i=e._uiQueueArray.shift();e._showQueue=i.uiModule,e.showUI.apply(e,[i.uiModule].concat(i.params))}},t.getTopUI=function(){var e=n("Canvas");return n(g.TOP,e)},o}(M))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfigNameEnum.ts",["cc"],(function(C){"use strict";var e;return{setters:[function(C){e=C.cclegacy}],execute:function(){var f;C("GameConfigNameEnum",void 0),e._RF.push({},"1205eASQupCuKCX1p6PAcHw","GameConfigNameEnum",void 0),function(C){C.CHAPTERCFG="chapterCfg",C.EFFECTCFG="effectCfg",C.FRONTCFG="frontCfg",C.HEROCFG="heroCfg",C.ITEMCFG="itemCfg",C.LEVELCFG="levelCfg",C.MISCCFG="miscCfg",C.SKILLCFG="skillCfg",C.SKILLLVCFG="skillLvCfg",C.WALLCFG="wallCfg"}(f||(f=C("GameConfigNameEnum",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/HeroSkillItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./PoolBase.ts","./FightManager.ts"],(function(e){"use strict";var t,n,i,o,r,s,l,a,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.defineProperty},function(e){s=e.cclegacy,l=e._decorator,a=e.sp},function(e){c=e.BundleManager},function(e){u=e.PoolBase},function(e){p=e.FightManager}],execute:function(){var f,h,k,d,g;s._RF.push({},"13b6fM1Lq9PGpSsnPTfbGE4","HeroSkillItem",void 0);var m=l.ccclass,v=l.property;e("HeroSkillItem",(f=m("HeroSkillItem"),h=v(a.Skeleton),f((g=t((d=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return t=e.call.apply(e,[this].concat(s))||this,i(o(t),"skeleton",g,o(t)),r(o(t),"_isAoe",void 0),t}n(t,e);var s=t.prototype;return s.start=function(){var e=this;e.skeleton.setCompleteListener(e.onFinish.bind(e))},s.onFinish=function(){this._isAoe||this.node.removeFromParent()},s.show=function(e){var t=this;c.instance().setSkeleton(t.skeleton,"skill/"+e+"/"+e,(function(){t.skeleton.timeScale=p.instance().fightSpeed,t.skeleton.setAnimation(0,"animation",!1)}))},t}(u)).prototype,"skeleton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a.Skeleton}}),k=d))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameTime.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./ConfigManager.ts","./MainEventEnum.ts","./DataManager.ts","./GameUtil.ts"],(function(e){"use strict";var t,r,a,n,i,o,s,f,c,h,u;return{setters:[function(e){t=e.inheritsLoose,r=e.defineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,i=e._decorator,o=e.Component},function(e){s=e.GameEvent},function(e){f=e.ConfigManager},function(e){c=e.MainEventEnum},function(e){h=e.DataManager},function(e){u=e.GameUtil}],execute:function(){var g;n._RF.push({},"169c0GChGpHJqYG+OBUIqfP","GameTime",void 0);var p=i.ccclass;i.property,e("GameTime",p("GameTime")(g=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(a(t),"_hideTimestamp",void 0),r(a(t),"_dataManager",h.instance()),r(a(t),"_heroCfgArray",[]),t}t(n,e);var i=n.prototype;return i.start=function(){var e=this;s.on(c.ADD_FIGHT,e.removeHeroCfg,e),s.on(c.ADD_WAIT,e.addHeroCfg,e),e.initHeroCfgArray(),e.schedule(e.onTime,1),window.GameTime=this},i.initHeroCfgArray=function(){for(var e,t,r=this,a=Object.keys(r._dataManager.heroDataMap),n=a.length,i=r._heroCfgArray,o=f.instance(),s=r._dataManager,c=0;c<n;c++)t=Number(a[c]),-1==s.fightSlotArray.indexOf(t)&&(e=o.heroCfgMap[t],i.push(e))},i.addHeroCfg=function(e){for(var t=this._heroCfgArray,r=t.length,a=0;a<r;a++)if(t[a].id==e)return;this._heroCfgArray.push(f.instance().heroCfgMap[e])},i.removeHeroCfg=function(e){for(var t=this._heroCfgArray,r=t.length,a=0;a<r;a++)if(t[a].id==e)return t.splice(a,1),void(this._dataManager.heroDataMap[e].exp=0)},i.onTime=function(){for(var e,t,r=this._heroCfgArray,a=r.length,n=h.instance(),i=n.heroDataMap,o=0;o<a;o++)t=i[(e=r[o]).id],n.setHeroExp(e.id,u.getExpAdd(e.quality,t.lv,e.expOutput));s.dispatchEvent(c.ADD_EXP)},n}(o))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./HeroAttributeEnum.ts","./HeroAttribute.ts","./CommonUtil.ts","./HeroStateEnum.ts","./HeroStart.ts","./ConfigManager.ts","./GameConfigNameEnum.ts","./GameUtil.ts","./HeroAction.ts","./HeroAttack.ts","./HeroDeath.ts","./HeroMove.ts","./HeroReset.ts","./HeroSearch.ts","./HeroSkill.ts","./HeroStand.ts","./HeroStateMachine.ts","./ActiveTypeEnum.ts","./HeroSkillBase.ts","./FightManager.ts"],(function(t){"use strict";var e,i,a,r,s,n,u,o,c,l,h,g,b,f,A,v,C,m,p,d,H,k,M;return{setters:[function(t){e=t.defineProperty},function(t){i=t.cclegacy,a=t.v3},function(t){r=t.HeroAttributeEnum},function(t){s=t.HeroAttribute},function(t){n=t.CommonUtil},function(t){u=t.HeroStateEnum},function(t){o=t.HeroStart},function(t){c=t.ConfigManager},function(t){l=t.GameConfigNameEnum},function(t){h=t.GameUtil},function(t){g=t.HeroAction},function(t){b=t.HeroAttack},function(t){f=t.HeroDeath},function(t){A=t.HeroMove},function(t){v=t.HeroReset},function(t){C=t.HeroSearch},function(t){m=t.HeroSkill},function(t){p=t.HeroStand},function(t){d=t.HeroStateMachine},function(t){H=t.ActiveTypeEnum},function(t){k=t.HeroSkillBase},function(t){M=t.FightManager}],execute:function(){i._RF.push({},"17640B9WzVAJqL35Zt0SlRl","HeroBase",void 0);t("HeroBase",function(){function t(){e(this,"id",void 0),e(this,"lv",1),e(this,"star",0),e(this,"heroCfg",void 0),e(this,"attribute",void 0),e(this,"skillMap",void 0),e(this,"slotIndex",void 0),e(this,"stateMachine",void 0),e(this,"target",void 0),e(this,"camp",void 0),e(this,"actionTime",0),e(this,"lastActionTime",0),e(this,"pos",a()),e(this,"isFight",!1),e(this,"resetPos",a()),e(this,"isStatic",!0),e(this,"skillLvMap",void 0)}var i=t.prototype;return i.initState=function(t){var e=this,i=e.stateMachine;if(!i){(i=e.stateMachine=new d).heroBase=e,i.heroItem=t;var a=new o(u.START);a._fightManager=M.instance(),i.registerState(a);var r=new v(u.RESET);r._fightManager=M.instance(),i.registerState(r);var s=new p(u.STAND);s._fightManager=M.instance(),i.registerState(s);var n=new C(u.SEARCH);n._fightManager=M.instance(),i.registerState(n);var c=new A(u.MOVE);c._fightManager=M.instance(),i.registerState(c);var l=new g(u.ACTION);l._fightManager=M.instance(),i.registerState(l);var h=new b(u.ATTACK);h._fightManager=M.instance(),i.registerState(h);var H=new m(u.SKILL);H._fightManager=M.instance(),i.registerState(H);var k=new f(u.DEATH);k._fightManager=M.instance(),i.registerState(k)}},i.initAttribute=function(){var t=this,e=t.attribute;e||(e=t.attribute=new s);var i=t.heroCfg,a=i.quality;e.maxHp=h.getAttribute(r.MAX_HP,a,t.lv,i.hp),e.hp=h.getAttribute(r.HP,a,t.lv,i.hp),e.attack=h.getAttribute(r.ATTACK,a,t.lv,i.attack),e.move=h.getAttribute(r.MOVE,a,t.lv,i.move),e.rate=h.getAttribute(r.RATE,a,t.lv,i.rate),e.scale=h.getAttribute(r.SCALE,a,t.lv,i.scale),e.critChance=h.getAttribute(r.CRIT_CHANCE,a,t.lv,i.critChance),e.critDamage=h.getAttribute(r.CRIT_DAMAGE,a,t.lv,i.critDamage),e.dodgeChance=h.getAttribute(r.DODGE_CHANCE,a,t.lv,i.dodgeChance),e.damageReduction=h.getAttribute(r.DAMAGE_REDUCTION,a,t.lv,i.damageReduction);var n=t.skillMap;if(n)for(var u=Object.keys(n),o=u.length,g=0;g<o;g++)delete n[u[g]];else n=t.skillMap={};for(var b,f,A=t.skillLvMap,v=Object.keys(A),C=v.length,m=c.instance(),p=m.skillCfgMap,d=0;d<C;d++)if(A[b=Number(v[d])]>0&&(f=m.getConfigArray(l.SKILLLVCFG,{baseId:b,lv:A[b]}))&&f.length>0){var H,M,E=void 0;E=new k,M=(H=p[f[0].skillId]).trigger,E.heroBase=t,E.skillCfg=H,E.initSkillEffect(),t.skillMap[M]||(t.skillMap[M]=[]),t.skillMap[M].push(E)}},i.handlerAttribute=function(t,e){switch(t){case r.MAX_HP:this.attribute.maxHp+=e,this.attribute.maxHp<0&&(this.attribute.maxHp=0);break;case r.HP:this.attribute.hp+=e,this.attribute.hp<0?this.attribute.hp=0:this.attribute.hp>this.attribute.maxHp&&(this.attribute.hp=this.attribute.maxHp);break;case r.ATTACK:this.attribute.attack+=e,this.attribute.attack<0&&(this.attribute.attack=0);break;case r.RATE:this.attribute.rate+=e,this.attribute.rate<0&&(this.attribute.rate=0);break;case r.MOVE:this.attribute.move+=e,this.attribute.move<0&&(this.attribute.move=0);break;case r.SCALE:this.attribute.scale+=e,this.attribute.scale<0&&(this.attribute.scale=0);break;case r.CRIT_CHANCE:this.attribute.critChance+=e,this.attribute.critChance<0&&(this.attribute.critChance=0);break;case r.CRIT_DAMAGE:this.attribute.critDamage+=e,this.attribute.critDamage<0&&(this.attribute.critDamage=0);break;case r.DODGE_CHANCE:this.attribute.dodgeChance+=e,this.attribute.dodgeChance<0&&(this.attribute.dodgeChance=0);break;case r.DAMAGE_REDUCTION:this.attribute.damageReduction+=e,this.attribute.damageReduction<0&&(this.attribute.damageReduction=0)}},i.getAttributeByEnum=function(t){switch(t){case r.MAX_HP:return this.attribute.maxHp;case r.HP:return this.attribute.hp;case r.ATTACK:return this.attribute.attack;case r.RATE:return this.attribute.rate;case r.MOVE:return this.attribute.move;case r.SCALE:return this.attribute.scale;case r.CRIT_CHANCE:return this.attribute.critChance;case r.CRIT_DAMAGE:return this.attribute.critDamage;case r.DODGE_CHANCE:return this.attribute.dodgeChance;case r.DAMAGE_REDUCTION:return this.attribute.damageReduction;default:return null}},i.setResetPos=function(t){this.resetPos.x=t.x,this.resetPos.y=t.y},i.setPos=function(t){this.pos.x=t.x,this.pos.y=t.y},i.setToResetPos=function(){var t=this;t.pos.x=t.resetPos.x,t.pos.y=t.resetPos.y},i.checkSelectSkill=function(t){var e=this;if(e.skillMap[t]&&e.skillMap[t].length>0)for(var i=e.skillMap[t],a=i.length,r=0;r<a;r++)if(i[r].skillCfg.activeType==H.ACTIVE)return!0;return!1},i.startPassiveSkill=function(t){var e=this.skillMap[t];if(!e)return null;var i=e.length;if(!i)return null;for(var a=0;a<i;a++)if(e[a].skillCfg.activeType==H.PASSIVE)return e[a];return null},i.selectSkill=function(t,e){var i=this.skillMap[t];if(!i)return null;if(!i.length)return null;i.sort((function(t,e){return t.skillCfg.priority-e.skillCfg.priority}));for(var a=!1,r=0;!a&&r!=i.length;){n.seedRandom(1,1e3)<=i[r].skillCfg.probability?a=!0:r++}return a?i[r]:null},i.destroy=function(){var t=this;t.stateMachine&&t.stateMachine.destroy(),t.attribute&&(t.attribute=null),t.actionTime&&(t.actionTime=null),t.camp&&(t.camp=null),t.heroCfg&&(t.heroCfg=null),t.id&&(t.id=null),t.isFight&&(t.isFight=null),t.lastActionTime&&(t.lastActionTime=null),t.slotIndex&&(t.slotIndex=null),t.pos&&(t.pos=null),t.resetPos&&(t.resetPos=null),t.target&&(t.target=null)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/HeroExpItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./DataManager.ts","./GameUtil.ts","./HeroComponent.ts"],(function(e){"use strict";var t,n,o,i,a,r,s,c,l,u,p,v,f,m,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.defineProperty},function(e){r=e.cclegacy,s=e._decorator,c=e.Label,l=e.instantiate,u=e.find,p=e.v3,v=e.v2},function(e){f=e.DataManager},function(e){m=e.GameUtil},function(e){d=e.HeroComponent}],execute:function(){var h,x,y,g,b;r._RF.push({},"18bffLvC7dM8ZT1ymQ7TVUu","HeroExpItem",void 0);var E=s.ccclass,H=s.property;e("HeroExpItem",(h=E("HeroExpItem"),x=H(c),h((b=t((g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,o(i(t),"amountLabel",b,i(t)),a(i(t),"id",void 0),t}n(t,e);var r=t.prototype;return r.setAmount=function(){var e=this,t=f.instance().heroDataMap[e.id].exp;t<=0?e.node.active=!1:(e.node.active=!0,e.amountLabel.string=t+"")},r.onClick=function(){f.instance().getExp(this.id),this.node.active=!1,this.moveExpToPos()},r.moveExpToPos=function(){var e=l(this.node);e.parent=u("Canvas"),e.active=!0;var t=p(300,77,0),n=v(e.getPosition().x,e.getPosition().y),o=n.clone();o.y+=600,o.x=(o.x+t.x)/2,m.bezierTo(e,1,n,o,t,null).removeSelf().start()},t}(d)).prototype,"amountLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=g))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/WaitUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(e){"use strict";var t,i,a,n,r,o,p,c,s,l,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.defineProperty},function(e){o=e.cclegacy,p=e._decorator,c=e.Sprite,s=e.UIOpacity,l=e.tween},function(e){y=e.UIBase}],execute:function(){var u,w,d,h,f,_,T;o._RF.push({},"1e63bHjc7VHiZanEk7h0N7B","WaitUI",void 0);var v=p.ccclass,I=p.property;e("WaitUI",(u=v("WaitUI"),w=I({type:c}),d=I({type:s}),u((_=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),p=0;p<i;p++)o[p]=arguments[p];return t=e.call.apply(e,[this].concat(o))||this,a(n(t),"waitSprite",_,n(t)),a(n(t),"nodeUIOpacity",T,n(t)),r(n(t),"priority",void 0),r(n(t),"maskAlpha",0),r(n(t),"_waitTween",void 0),r(n(t),"_opacityTween",void 0),t}i(t,e);var o=t.prototype;return o.start=function(){this.showTween()},o.showTween=function(){var e=this;e.nodeUIOpacity.opacity=0,e._waitTween||(e._waitTween=l(e.waitSprite.node).repeatForever(l().by(3,{angle:360}))),e._opacityTween||(e._opacityTween=l(e.nodeUIOpacity).delay(1).set({opacity:255})),e._waitTween.start(),e._opacityTween.start()},o.hide=function(){var t=this;t._waitTween&&(t._waitTween.stop(),t._opacityTween.stop(),t.nodeUIOpacity.opacity=0,e.prototype.hide.call(this))},t}(y)).prototype,"waitSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(f.prototype,"nodeUIOpacity",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/LoginUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./GameEvent.ts","./ConfigManager.ts","./UIManager.ts","./UIBase.ts","./ConfigUration.ts","./ToastUtil.ts","./DataManager.ts","./UIModule.ts","./HttpLogic.ts"],(function(n){"use strict";var t,i,o,e,a,r,s,l,c,u,g,d,f,p,h,b,m,B,E,I,T,v,y,L;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,o=n.defineProperty,e=n.assertThisInitialized,a=n.initializerDefineProperty,r=n.asyncToGenerator},function(n){s=n.cclegacy,l=n._decorator,c=n.EditBox,u=n.ProgressBar,g=n.Label,d=n.Animation,f=n.Node,p=n.JsonAsset},function(n){h=n.BundleManager},function(n){b=n.GameEvent},function(n){m=n.ConfigManager},function(n){B=n.UIManager},function(n){E=n.UIBase},function(n){I=n.ConfigUration},function(n){T=n.ToastUtil},function(n){v=n.DataManager},function(n){y=n.UIModule},function(n){L=n.HTTP_EVENT}],execute:function(){var P,U,w,G,x,M,D,_,R,H,z,F,A,N,C;s._RF.push({},"20172dQGcxNno367NToGWoP","LoginUI",void 0);var S=l.ccclass,O=l.property;n("LoginUI",(P=S("LoginUI"),U=O(c),w=O(c),G=O(u),x=O(g),M=O(d),D=O(f),P((H=t((R=function(n){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=n.call.apply(n,[this].concat(r))||this,o(e(t),"hasMask",!1),a(e(t),"accountEditBox",H,e(t)),a(e(t),"passwordEditBox",z,e(t)),a(e(t),"loadProgressBar",F,e(t)),a(e(t),"loadLabel",A,e(t)),a(e(t),"uiAnima",N,e(t)),a(e(t),"loginFrame",C,e(t)),t}i(t,n);var s=t.prototype;return s.onEnable=function(){b.on(L.HTTP_LOGIN,this.onLogin,this),b.on(L.HTTP_REGISTER,this.onRegister,this)},s.onDisable=function(){b.off(L.HTTP_LOGIN,this.onLogin,this),b.off(L.HTTP_REGISTER,this.onRegister,this)},s.start=function(){var n,t;this.accountEditBox.string=null!==(n=I.instance.getGlobalData("account"))&&void 0!==n?n:"",this.passwordEditBox.string=null!==(t=I.instance.getGlobalData("password"))&&void 0!==t?t:""},s.onLogin=function(){var n=this.accountEditBox.string.trim();0!=n.length?(I.instance.setGlobalData("account",this.accountEditBox.string),I.instance.setGlobalData("password",this.passwordEditBox.string),I.instance.setUserId(n),this.preload()):T.show("请输入账号")},s.onProgress=function(n,t){this.loadProgressBar.progress=n/t,this.loadLabel.string=100*Math.floor(this.loadProgressBar.progress)+"%"},s.preload=function(){var n=r((function*(){var n=this;T.show("登录成功"),n.loadProgressBar.node.active=!0,n.loginFrame.active=!1;for(var t,i=h.instance(),o=["config","texture"],e=o.length,a=0;a<e;a++)t=o[a],yield i.loadDir(t,n.onProgress.bind(n));yield i.loadRes("config/game_config",p,null,(function(n,t){m.instance().init(n,t,1)})),n.onComplete()}));return function(){return n.apply(this,arguments)}}(),s.onComplete=function(){v.instance().init(),v.instance().addWallTimes(1001,1),B.instance().showUI(y.FIGHT_UI),this.scheduleOnce(this.hide.bind(this),2)},s.onRegister=function(){},s.onLoad=function(){var n=this;this.uiAnima.once(d.EventType.FINISHED,(function(){n.uiAnima.crossFade("anima2")}))},t}(E)).prototype,"accountEditBox",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(R.prototype,"passwordEditBox",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(R.prototype,"loadProgressBar",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(R.prototype,"loadLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(R.prototype,"uiAnima",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(R.prototype,"loginFrame",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=R))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/NetInterface.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"20e84mWk1NJHZqxNucDcRhm","NetInterface",void 0);t("DefStringProtocol",function(){function t(){}var e=t.prototype;return e.getHeadlen=function(){return 0},e.getHearbeat=function(){return" "},e.getPackageLen=function(t){return t.toString().length},e.checkPackage=function(t){return!0},e.getPackageId=function(t){return 0},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/LevelRewardUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ConfigManager.ts","./UIPriority.ts","./UIBase.ts","./DataManager.ts","./LevelRewardItem.ts"],(function(e){"use strict";var r,t,a,i,n,o,l,d,u,s,c,p,f,m,w,b,y,v;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.defineProperty,i=e.assertThisInitialized,n=e.initializerDefineProperty},function(e){o=e.cclegacy,l=e._decorator,d=e.Node,u=e.UITransform,s=e.Prefab,c=e.Label,p=e.Layout,f=e.instantiate},function(e){m=e.ConfigManager},function(e){w=e.UIPriority},function(e){b=e.UIBase},function(e){y=e.DataManager},function(e){v=e.LevelRewardItem}],execute:function(){var h,g,I,L,T,_,U,R,N,P,z,D,M;o._RF.push({},"256b3ejVkpIkLyT7D5dK+a7","LevelRewardUI",void 0);var C=l.ccclass,k=l.property;e("LevelRewardUI",(h=C("LevelRewardUI"),g=k(d),I=k(u),L=k(s),T=k(c),_=k(p),h((N=r((R=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o))||this,a(i(r),"priority",w.DEFAULT),n(i(r),"rewardNode",N,i(r)),n(i(r),"rewardNodeUITransform",P,i(r)),n(i(r),"levelRewardItemPrefab",z,i(r)),n(i(r),"countdownLabel",D,i(r)),n(i(r),"rewardNodeLayout",M,i(r)),a(i(r),"_closeTime",void 0),a(i(r),"_defaultTime",3),a(i(r),"maskAlpha",0),r}t(r,e);var o=r.prototype;return o.start=function(){var e,r=this,t=m.instance().levelCfgMap[y.instance().level].reward,a=t.length,i=r.rewardNode,n=r.levelRewardItemPrefab,o=y.instance();r.rewardNodeUITransform.width=(100+r.rewardNodeLayout.spacingX)*a;for(var l=0;l<a;l++)(e=f(n)).getComponent(v).setReward(t[l]),i.addChild(e),o.setItemAmount(t[l].id,t[l].amount);r._closeTime=r._defaultTime,r._updateTime(),r.schedule(r._updateTime,1)},o._updateTime=function(){var e=this;e.countdownLabel.string=e._closeTime+"秒关闭",e._closeTime--,e._closeTime<0&&e.hide()},o.hide=function(){this.unschedule(this._updateTime),e.prototype.hide.call(this)},r}(b)).prototype,"rewardNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=r(R.prototype,"rewardNodeUITransform",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=r(R.prototype,"levelRewardItemPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=r(R.prototype,"countdownLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=r(R.prototype,"rewardNodeLayout",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=R))||U));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroDetailSkillItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./GameEvent.ts","./ConfigManager.ts","./ToastUtil.ts","./MainEventEnum.ts","./DataManager.ts","./GameUtil.ts","./GameListItemRender.ts"],(function(e){"use strict";var t,i,o,n,l,a,r,c,u,s,p,d,f,b,v,g,h,S,L,m,T,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.defineProperty,o=e.inheritsLoose,n=e.assertThisInitialized,l=e.initializerDefineProperty},function(e){a=e.cclegacy,r=e._decorator,c=e.Sprite,u=e.Node,s=e.Label,p=e.RichText,d=e.UITransform,f=e.Input,b=e.color},function(e){v=e.BundleManager},function(e){g=e.GameEvent},function(e){h=e.ConfigManager},function(e){S=e.ToastUtil},function(e){L=e.MainEventEnum},function(e){m=e.DataManager},function(e){T=e.GameUtil},function(e){k=e.default}],execute:function(){var E,_,N,y,I,C,D,H,U,w,z,M,A,B,O,R,x,G,P,j,V,F,K,Q,q,W,J,X,Y;a._RF.push({},"2893cVNHb5HOpb3n7HupV8Q","HeroDetailSkillItem",void 0);var Z=r.ccclass,$=r.property;e("HeroDetailSkillItem",(E=Z("HeroDetailSkillItem"),_=$(c),N=$(u),y=$(s),I=$(u),C=$(s),D=$(p),H=$(u),U=$(u),w=$(u),z=$(s),M=$(u),A=$(c),B=$(d),E((x=t((R=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(n(t),"data",void 0),l(n(t),"iconSprite",x,n(t)),l(n(t),"iconSpriteNode",G,n(t)),l(n(t),"lvLabel",P,n(t)),l(n(t),"costLabelNode",j,n(t)),l(n(t),"costLabel",V,n(t)),l(n(t),"nameRichText",F,n(t)),l(n(t),"upSpriteNode",K,n(t)),l(n(t),"upButtonNode",Q,n(t)),l(n(t),"lockLabelNode",q,n(t)),l(n(t),"lockLabel",W,n(t)),l(n(t),"lockSpriteNode",J,n(t)),l(n(t),"upButtonSprite",X,n(t)),l(n(t),"nodeUITransform",Y,n(t)),i(n(t),"_isEnough",void 0),i(n(t),"_isLock",void 0),i(n(t),"_skillCfg",void 0),t}o(t,e);var a=t.prototype;return a.onEnable=function(){var e=this;e.iconSpriteNode.on(f.EventType.TOUCH_START,e.onTouchStart,e),e.iconSpriteNode.on(f.EventType.TOUCH_END,e.onTouchEnd,e),e.iconSpriteNode.on(f.EventType.TOUCH_MOVE,e.onTouchEnd,e)},a.onDisable=function(){var e=this;e.iconSpriteNode.off(f.EventType.TOUCH_START,e.onTouchStart,e),e.iconSpriteNode.off(f.EventType.TOUCH_END,e.onTouchEnd,e),e.iconSpriteNode.off(f.EventType.TOUCH_MOVE,e.onTouchEnd,e)},a.dataChanged=function(){var e=this,t=e.data,i=t.skillLvCfg;e.lvLabel.string=t.lv+"";var o=e._skillCfg=h.instance().skillCfgMap[i.skillId];v.instance().setSpriteFrame(e.iconSprite,"skill/"+o.icon);var n=T.getQualityColor(o.quality);e.nameRichText.string="<color="+n+">"+o.name+"</color>";var l=i.cost;if(e._isEnough=!1,e._isLock=i.unlockLv>m.instance().heroDataMap[t.heroId].lv,e._isLock)e.lockLabel.string="Lv"+i.unlockLv+"解锁",e.lockLabelNode.active=!0,e.costLabelNode.active=!1,e.lockSpriteNode.active=!0,e.upSpriteNode.active=!1,v.instance().setSpriteAtlas(e.upButtonSprite,"hero/hero","juesebg_6");else{if(e.lockLabelNode.active=!1,e.costLabelNode.active=!0,e.lockSpriteNode.active=!1,l&&l.length>0){var a=t.skillLvCfg.cost[0];e.costLabel.string="x"+a.amount,e._isEnough=m.instance().getItemAmount(a.id)>=a.amount}else e._isEnough=!0,e.costLabel.string="";e.upButtonNode.active=!Boolean(i.isMax),e._isEnough?(e.costLabel.color=b("#ffffff"),v.instance().setSpriteAtlas(e.upButtonSprite,"hero/hero","juesebg_5")):(e.costLabel.color=b("#fa422f"),v.instance().setSpriteAtlas(e.upButtonSprite,"hero/hero","juesebg_6")),e.upSpriteNode.active=e._isEnough}},a.onUp=function(){var e=this;if(e._isLock)S.show("等级不足");else if(e._isEnough){var t=e.data,i=t.skillLvCfg.cost;i&&i.length>0&&m.instance().setItemAmount(i[0].id,-i[0].amount),m.instance().setHeroSkillLv(t.heroId,t.skillLvCfg.baseId,t.lv+1),g.dispatchEvent(L.UP_SKILL,!1,t.heroId)}else S.show("数量不足")},a.onTouchStart=function(){var e=this,t=e.nodeUITransform.convertToWorldSpaceAR(e.iconSpriteNode.getPosition());g.dispatchEvent(L.TOUCH_START_DETAIL_SKILL,e.data.skillLvCfg,e._skillCfg,t)},a.onTouchEnd=function(){g.dispatchEvent(L.TOUCH_END_DETAIL_SKILL)},t}(k)).prototype,"iconSprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(R.prototype,"iconSpriteNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(R.prototype,"lvLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(R.prototype,"costLabelNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(R.prototype,"costLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(R.prototype,"nameRichText",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(R.prototype,"upSpriteNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(R.prototype,"upButtonNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(R.prototype,"lockLabelNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(R.prototype,"lockLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(R.prototype,"lockSpriteNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(R.prototype,"upButtonSprite",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(R.prototype,"nodeUITransform",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=R))||O)),e("HeroDetailSkillData",(function(){i(this,"lv",void 0),i(this,"skillLvCfg",void 0),i(this,"heroId",void 0)}));a._RF.pop()}}}));

System.register("chunks:///_virtual/SkillEffect2.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillEffectBase.ts","./ValueTypeEnum.ts"],(function(e){"use strict";var t,a,i,l,n,r;return{setters:[function(e){t=e.inheritsLoose,a=e.defineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy},function(e){n=e.SkillEffectBase},function(e){r=e.ValueTypeEnum}],execute:function(){l._RF.push({},"2c598xIdWBG+L6EFLRB9rFd","SkillEffect2",void 0);e("SkillEffect2",function(e){function l(){for(var t,l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,a(i(t),"returnValue",void 0),t}t(l,e);var n=l.prototype;return n.init=function(){this.returnValue=Number(this._effectCfg.value)},n._handleHeroBase=function(t){var a=this;e.prototype._handleHeroBase.call(this,t),a._skillEffectData.finalDamage&&(a._effectCfg.valueType==r.FIXED?a._returnMap[t.id].damage=a._skillEffectData.finalDamage+a.returnValue:a._returnMap[t.id].damage=a._skillEffectData.finalDamage+a._skillEffectData.finalDamage*(a.returnValue/1e3))},l}(n));l._RF.pop()}}}));

System.register("chunks:///_virtual/UILayerType.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var c;e("UILayerType",void 0),t._RF.push({},"2c9b2baE3lIeqZ+HLSjcLGS","UILayerType",void 0),function(e){e.TOP="topNode",e.GUIDE="guideNode",e.UI="uiNode",e.BG="bgNode"}(c||(c=e("UILayerType",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/HeroState.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts","./FightEventEnum.ts","./GameEvent.ts","./HeroAttributeEnum.ts","./CommonUtil.ts","./SkillTriggerEnum.ts","./HeroStateEnum.ts","./StateBase.ts"],(function(e){"use strict";var t,a,i,s,n,h,o,r,l,c,f,g;return{setters:[function(e){t=e.inheritsLoose,a=e.defineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy},function(e){n=e.LogUtil},function(e){h=e.FightEventEnum},function(e){o=e.GameEvent},function(e){r=e.HeroAttributeEnum},function(e){l=e.CommonUtil},function(e){c=e.SkillTriggerEnum},function(e){f=e.HeroStateEnum},function(e){g=e.StateBase}],execute:function(){s._RF.push({},"2e6b7S8siVICrtm7UBfmuGi","HeroState",void 0);e("HeroState",function(e){function s(){for(var t,s=arguments.length,n=new Array(s),h=0;h<s;h++)n[h]=arguments[h];return t=e.call.apply(e,[this].concat(n))||this,a(i(t),"_stateMachine",void 0),a(i(t),"_moveDifference",5),a(i(t),"_attackDistance",100),a(i(t),"_fightManager",void 0),a(i(t),"_xOffset",void 0),a(i(t),"_yOffset",void 0),a(i(t),"isSuffer",!1),t}t(s,e);var g=s.prototype;return g.onUpdate=function(e){var t=this;if(t._fightManager.isFight&&t.stateName!=f.DEATH&&t._stateMachine.heroBase.attribute.hp<=0)t._stateMachine.changeState(f.DEATH);else{if(t._stateMachine.heroBase.target&&!t._fightManager.heroBaseMap[t._stateMachine.heroBase.target.id])return n.log("id"+t._stateMachine.heroBase.id+"对id"+t._stateMachine.heroBase.target.id+"丢失目标"),t._stateMachine.heroBase.target=null,void this._stateMachine.changeState(f.SEARCH);if(t._fightManager.isFinish&&t._fightManager.isFight){var a=f.RESET;if(t.stateName!=a)return void t._stateMachine.changeState(a)}t.onStateUpdate(e)}},g.onStateUpdate=function(e){},g._onAddFight=function(){var e=this;e._stateMachine.getCurrentState()===e&&e._fightManager.isFight&&e._stateMachine.heroBase.isFight&&(n.log("id"+e._stateMachine.heroBase.id+"发现新人"),e._stateMachine.changeState(f.SEARCH))},g._onStartFight=function(){var e=this;e._stateMachine.getCurrentState()===e&&e._fightManager.isFight&&e._stateMachine.heroBase.isFight&&(n.log("战斗开始"),e._stateMachine.changeState(f.START))},g.onEnter=function(){var e=this;e._stateMachine.heroItem.setRigidBodyStop(),e._stateMachine.heroBase.isStatic=e.stateName!=f.MOVE,console.log("id"+this._stateMachine.heroBase.id+"进入"+this.stateName)},g.onExit=function(){console.log("id"+this._stateMachine.heroBase.id+"离开"+this.stateName)},g._onMove=function(e,t){var a,i=this,s=i._stateMachine.heroBase.pos,n=i._stateMachine.heroBase.attribute.move,r=i._fightManager.fightSpeed;if(t){if(!i._xOffset&&!i._yOffset){var c=l.radian(e.x,e.y,s.x,s.y);i._xOffset=Math.cos(c),i._yOffset=Math.sin(c)}s.x+=i._xOffset*n*r,s.y+=i._yOffset*n*r,a=i._xOffset}else{var f=l.radian(e.x,e.y,s.x,s.y);a=Math.cos(f)*n*r,s.x+=a,s.y+=Math.sin(f)*n*r}var g=!(a>0);i._stateMachine.heroItem.setDirection(g),i._stateMachine.heroItem.setPosition(),o.dispatchEvent(h.MOVE,i._stateMachine.heroItem)},g._startMove=function(e){var t=this,a=e.x<t._stateMachine.heroBase.pos.x;t._stateMachine.heroItem.setDirection(a),t._stateMachine.heroItem.playAction("pao",!0)},g._resetPosOffset=function(){this._xOffset=0,this._yOffset=0},g._handleSkill=function(e,t,a){var i,s,n=this,l=Object.keys(e),c=l.length;t.skillCfg.selfSkeleton&&n._stateMachine.heroItem.setSkill(t.skillCfg.selfSkeleton),t.skillCfg.selfAfterSkeleton&&n._stateMachine.heroItem.setSkill(t.skillCfg.selfAfterSkeleton,!0);for(var f=0;f<c;f++){if(i=Number(l[f]),s=n._fightManager.heroBaseMap[i],e[i].attribute&&s.attribute.handleAttribute(e[i].attribute,s.stateMachine.heroItem.getFontPos(),!0,1!=s.camp),e[i].damage){a.finalDamage=e[i].damage,s.handlerAttribute(r.HP,-e[i].damage);a.isCrit;o.dispatchEvent(h.SHOW_FONT,"-"+e[i].damage,s.stateMachine.heroItem.getFontPos())}i!=n._stateMachine.heroBase.id&&(a.attackId==s.id?(t.skillCfg.otherSkeleton?s.stateMachine.heroItem.setSkill(t.skillCfg.otherSkeleton):s.stateMachine.heroItem.setSkill("beiji_putong"),t.skillCfg.otherAfterSkeleton&&s.stateMachine.heroItem.setSkill(t.skillCfg.otherAfterSkeleton,!0)):(t.skillCfg.otherSkeleton&&s.stateMachine.heroItem.setSkill(t.skillCfg.otherSkeleton),t.skillCfg.otherAfterSkeleton&&s.stateMachine.heroItem.setSkill(t.skillCfg.otherAfterSkeleton,!0))),s.stateMachine.heroItem.setHp()}},g._handlePassiveSkill=function(e,t){var a=this._stateMachine.heroBase.startPassiveSkill(e);if(a){var i=a.handleEffect(t);this._handleSkill(i,a,t)}},g.suffer=function(e){var t=this,a=t._stateMachine.heroBase;if(e.attackId==t._stateMachine.heroBase.id){var i=l.seedRandom(1,1e3);n.log("id"+a.id+"闪避"+a.attribute.dodgeChance+"随机数"+i)}e.isCrit;e.finalDamage=e.finalDamage*(1-a.attribute.damageReduction/1e3);var s=t._stateMachine.heroBase.startPassiveSkill(c.SUFFER);if(s){var f=s.handleEffect(e);t._handleSkill(f,s,e)}a.handlerAttribute(r.HP,-e.finalDamage),t._stateMachine.heroItem.setHp(),a.stateMachine.heroItem.setSkill("beiji_putong"),o.dispatchEvent(h.SHOW_FONT,"-"+e.finalDamage,t._stateMachine.heroItem.getFontPos(),1!=t._stateMachine.heroBase.camp)},s}(g));s._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAction.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtil.ts","./SkillEffectData.ts","./SkillTriggerEnum.ts","./HeroStateEnum.ts","./HeroState.ts"],(function(t){"use strict";var e,a,n,i,o,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy},function(t){n=t.CommonUtil},function(t){i=t.SkillEffectData},function(t){o=t.SkillTriggerEnum},function(t){c=t.HeroStateEnum},function(t){s=t.HeroState}],execute:function(){a._RF.push({},"30e41X/LdlPUo9Gg1zSGb1P","HeroAction",void 0);t("HeroAction",function(t){function a(){return t.apply(this,arguments)||this}e(a,t);var s=a.prototype;return s.onEnter=function(){t.prototype.onEnter.call(this);var e=this;if(e._stateMachine.heroBase.target){var a=e._stateMachine.heroBase;(a.actionTime>=a.lastActionTime||!a.actionTime)&&(a.lastActionTime=(new Date).getTime(),a.actionTime=(new Date).getTime()+1e3*a.attribute.rate*(1/e._fightManager.fightSpeed));var n=a.target.pos.x<a.pos.x;e._stateMachine.heroItem.setDirection(n),e._stateMachine.heroItem.playAction("daiji",!0);var s=new i;s.handleHeroBase=a,e._handlePassiveSkill(o.ACTION,s)}else e._stateMachine.changeState(c.SEARCH)},s.onStateUpdate=function(t){var e=this,a=e._stateMachine.heroBase,i=a.target.pos,s=a.pos,r=i.x>s.x?i.x-e._attackDistance/2:i.x+e._attackDistance/2;if(n.getDistance(r,i.y,s.x,s.y)>e._attackDistance)e._stateMachine.changeState(c.MOVE);else if(e._stateMachine.heroItem.setAction(),(new Date).getTime()>=a.actionTime){var l=e._stateMachine.heroBase.selectSkill(o.ACTION,!0);l?e._stateMachine.changeState(c.SKILL,null,l):e._stateMachine.changeState(c.ATTACK)}},a}(s));a._RF.pop()}}}));

System.register("chunks:///_virtual/QualityEnum.ts",["cc"],(function(t){"use strict";var u;return{setters:[function(t){u=t.cclegacy}],execute:function(){var n;t("QualityEnum",void 0),u._RF.push({},"32651lTlsBKVJPfN73zvT7x","QualityEnum",void 0),function(t){t[t.NONE=0]="NONE",t[t.QUALITY1=1]="QUALITY1",t[t.QUALITY2=2]="QUALITY2",t[t.QUALITY3=3]="QUALITY3",t[t.QUALITY4=4]="QUALITY4",t[t.QUALITY5=5]="QUALITY5"}(n||(n=t("QualityEnum",{}))),u._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts"],(function(e){"use strict";var t,n,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){c=e.EventListener}],execute:function(){var s;n._RF.push({},"347fc66w1dB1YZlL7hdO4Cz","GameEvent",void 0);var i=r.ccclass;r.property,e("GameEvent",i("GameEvent")(s=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/LineUpView.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FightEventEnum.ts","./GameEvent.ts","./ConfigManager.ts","./ToastUtil.ts","./MainEventEnum.ts","./DataManager.ts","./FightManager.ts","./HeroHpItem.ts","./LineUpHeroItem.ts","./GameButton.ts","./GameList.ts"],(function(e){"use strict";var t,n,i,a,o,r,s,c,h,u,l,f,g,_,p,d,v,m,L,y,H,C,F;return{setters:[function(e){t=e.defineProperty,n=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,c=e.Prefab,h=e.Label,u=e.isValid,l=e.instantiate,f=e.Component},function(e){g=e.FightEventEnum},function(e){_=e.GameEvent},function(e){p=e.ConfigManager},function(e){d=e.ToastUtil},function(e){v=e.MainEventEnum},function(e){m=e.DataManager},function(e){L=e.FightManager},null,function(e){y=e.LineUpHeroItem,H=e.LineUpHeroItemData},function(e){C=e.GameButton},function(e){F=e.default}],execute:function(){var b,U,E,B,I,T,w;r._RF.push({},"362cfcOHlFAf7Hdap6sHV3U","LineUpView",void 0);var D=e("LineUpItemData",(function(){t(this,"ids",[]),t(this,"effectId",0),t(this,"title","")})),N=s.ccclass,A=s.property;e("LineUpView",(b=N("LineUpView"),U=A(c),E=A(c),b((T=n((I=function(e){function n(){for(var n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=e.call.apply(e,[this].concat(r))||this,a(o(n),"descPrefab",T,o(n)),a(o(n),"heroPrefab",w,o(n)),t(o(n),"_helpView",null),t(o(n),"_gameList",null),t(o(n),"_lineUpTipsNode",null),t(o(n),"_curLineLabel",null),t(o(n),"_noHeroTipsNode",null),t(o(n),"_saveBtn",null),t(o(n),"_useBtn",null),t(o(n),"_heroLayout",null),t(o(n),"_curIndex",0),t(o(n),"_cps",[]),t(o(n),"_itemDataList",[]),t(o(n),"_fightHeroes",[]),t(o(n),"_isFighting",!1),n}i(n,e);var r=n.prototype;return r.start=function(){},r.onLoad=function(){var e=this;e._gameList=e.node.getChildByName("hero_list").getComponent(F),e._curLineLabel=e.node.getChildByName("cur_line_lab").getComponent(h),e._saveBtn=e.node.getChildByName("save").getComponent(C),e._useBtn=e.node.getChildByName("use").getComponent(C),e._lineUpTipsNode=e.node.getChildByName("lineup_tips"),e._noHeroTipsNode=e.node.getChildByName("no_hero_tips"),e._heroLayout=e.node.getChildByName("hero_layout"),e._noHeroTipsNode.active=!1,e._lineUpTipsNode.active=!1,e._saveBtn.activeBtn=!0,e._useBtn.activeBtn=!1,e._isFighting=L.instance().isFight},r.onEnable=function(){var e=this;e.initData(),e.initItemList(),e.initFightHero(),e.setCurLineUpArray(e._curIndex),_.on(g.FIGHT_START,e.onFightStart,e),_.on(g.FIGHT_END,e.onFightEnd,e)},r.onDestroy=function(){var e=this;u(e._helpView)&&e._helpView.destroy(),_.off(g.FIGHT_START,e.onFightStart,e),_.off(g.FIGHT_END,e.onFightEnd,e)},r.onClickHelp=function(){this.showHelp()},r.onClickToggle=function(e,t){e.isChecked&&(this.setCurLineUpArray(Number(t)),this._curIndex=Number(t))},r.onClickSave=function(){var e=m.instance().fightSlotArray;0!==this._fightHeroes.length?(m.instance().saveLineUpArray(this._curIndex,e),this.setCurLineUpArray(this._curIndex)):d.show("战场上没有武将")},r.onClickUse=function(){var e=m.instance().getLineUpArray(this._curIndex).concat();m.instance().changeFightSlot(e),_.dispatchEvent(v.UPDATE_HERO),this.onEnable()},r.showHelp=function(){this._helpView?this._helpView.active=!0:(this._helpView=l(this.descPrefab),this._helpView.setParent(this.node))},r.initItemList=function(){var e=this;delete e._itemDataList,e._itemDataList=[],e._cps.forEach((function(t){var n=p.instance().frontCfgMap[t],i=new D;i.title=n.name,i.effectId=n.effectId,i.ids=n.heroes.concat(),e._itemDataList.push(i)})),e._gameList.setData(e._itemDataList),e._lineUpTipsNode.active=0===e._cps.length},r.setCurLineUpArray=function(e){var t=this,n=m.instance().getLineUpArray(e),i=p.instance().heroCfgMap,a=[];if(n.forEach((function(e){if(0!=e){var t=i[e].name;a.push(t)}})),0===a.length)t._curLineLabel.string="尚未激活当前阵容，请点击[ 存 ]";else{var o="";a.forEach((function(e){o+=" "+e})),t._curLineLabel.string=o}t._useBtn.activeBtn=a.length>0,t._useBtn.activeBtn&&(t._useBtn.activeBtn=!t._isFighting)},r.initData=function(){var e=this,t=m.instance().fightSlotArray,n=m.instance().getHeroCP(t);delete e._cps,e._cps=[],n.forEach((function(t){var n=p.instance().frontCfgMap[t];e._cps.push(n.id)}))},r.initFightHero=function(){var e=this,t=m.instance().fightSlotArray;delete e._fightHeroes,e._fightHeroes=[],t.forEach((function(t){0!==t&&e._fightHeroes.push(t)})),e._noHeroTipsNode.active=0==e._fightHeroes.length;var n=e._heroLayout.children.length;if(n>e._fightHeroes.length){for(var i=n-e._fightHeroes.length,a=0;a<i;a++)e._heroLayout.children[0].removeFromParent();n=e._fightHeroes.length}for(var o=0;o<n;o++){var r=e._fightHeroes[o],s=p.instance().heroCfgMap[r],c=e._heroLayout.children[o],h=c.getComponent(y);c.parent=e._heroLayout;var u=new H;u.name=s.name,u.star=4,u.icon=s.icon,h.bind(u)}for(var f=n;f<e._fightHeroes.length;f++){var g=e._fightHeroes[f],_=p.instance().heroCfgMap[g],d=l(e.heroPrefab),v=d.getComponent(y);d.parent=e._heroLayout;var L=new H;L.name=_.name,L.star=4,L.icon=_.icon,v.bind(L)}},r.onFightStart=function(){this._isFighting=!0,this.setCurLineUpArray(this._curIndex)},r.onFightEnd=function(){this._isFighting=!1,this.setCurLineUpArray(this._curIndex)},n}(f)).prototype,"descPrefab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(I.prototype,"heroPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=I))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./BundleManager.ts"],(function(o){"use strict";var n,u,i,e,t,a,s,l,c,r;return{setters:[function(o){n=o.inheritsLoose,u=o.defineProperty,i=o.assertThisInitialized},function(o){e=o.cclegacy,t=o.assert,a=o.AudioClip,s=o.warn,l=o.clamp01},function(o){c=o.Singleton},function(o){r=o.BundleManager}],execute:function(){e._RF.push({},"37d02mVXtpOKa5wmXnUdRGS","AudioManager",void 0);var d=o("AudioManager",function(o){function e(){for(var n,e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=o.call.apply(o,[this].concat(t))||this,u(i(n),"soundVolume",1),n}n(e,o);var c=e.prototype;return c.init=function(o){this.soundVolume=1,e._audioSource=o},c.playMusic=function(o){var n=e._audioSource;t(n,"AudioManager not init!"),n.loop=o,n.playing||n.play()},c.playSound=function(o){var n=this,u=e._audioSource;t(u,"AudioManager not init!"),r.instance().loadRes(o,a,null,(function(o,i){o?s("load audioClip failed: ",o):u.playOneShot(i,u.volume?n.soundVolume/u.volume:0)}))},c.playChip=function(o){var n=e._audioSource;t(n,"AudioManager not init!"),n.playOneShot(o,n.volume?this.soundVolume/n.volume:0)},c.setMusicVolume=function(o){var n=e._audioSource;t(n,"AudioManager not init!"),o=l(o),n.volume=o},c.setSoundVolume=function(o){this.soundVolume=l(o)},c.openMusic=function(){this.setMusicVolume(1)},c.closeMusic=function(){this.setMusicVolume(0)},c.openSound=function(){this.setSoundVolume(1)},c.closeSound=function(){this.setSoundVolume(0)},e}(c));u(d,"_audioSource",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/WallItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./CommonUtil.ts","./DataManager.ts","./GameListItemRender.ts","./GameButton.ts"],(function(t){"use strict";var e,n,a,i,l,o,s,r,c,d,m;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,l=t._decorator,o=t.Label},function(t){s=t.GameEvent},function(t){r=t.CommonUtil},function(t){c=t.DataManager},function(t){d=t.default},function(t){m=t.GameButton}],execute:function(){var u;i._RF.push({},"3b430mUkPNPT6j/nuc0G5kV","WallItem",void 0);var h=l.ccclass;l.property,t("WallItem",h("WallItem")(u=function(t){function i(){for(var e,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return e=t.call.apply(t,[this].concat(l))||this,n(a(e),"data",void 0),n(a(e),"_titleLabel",null),n(a(e),"_descLabel",null),n(a(e),"_btn",null),n(a(e),"_btnLabel",null),e}e(i,t);var l=i.prototype;return l.onLoad=function(){var t=this;t._titleLabel=t.node.getChildByName("title").getComponent(o),t._descLabel=t.node.getChildByName("desc").getComponent(o),t._btn=t.node.getChildByName("btn").getComponent(m),t._btnLabel=t._btn.node.getChildByName("lab").getComponent(o)},l.dataChanged=function(){var t=this;t._titleLabel.string=t.data.title+r.changeToRomeNum(t.data.finishItem.level);var e=r.amountConvert(t.data.finishItem.curTime),n=r.amountConvert(t.data.finishItem.needTime);t._descLabel.string=t.data.desc+" ("+e+"/"+n+")",t._btnLabel.string="+"+t.data.star,t._btn.activeBtn=t.data.finishItem.curTime>=t.data.finishItem.needTime},l.onClickBtn=function(){c.instance().addWallStar(this.data.star),c.instance().upgradeWallItem(this.data.id),s.dispatchEvent("UPDATE_WALL_VIEW")},i}(d))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/WallDesc.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ConfigManager.ts","./DataManager.ts"],(function(e){"use strict";var t,n,o,a,r,c,l,i,f,s,d,m,_,u,g,p;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.UITransform,l=e.Layout,i=e.Label,f=e.RichText,s=e.instantiate,d=e.UIOpacity,m=e.tween,_=e.v3,u=e.Component},function(e){g=e.ConfigManager},function(e){p=e.DataManager}],execute:function(){var N;a._RF.push({},"3b7464KYX9JtZBTlWK6T8mb","WallDesc",void 0);var h=r.ccclass;r.property,e("WallDesc",h("WallDesc")(N=function(e){function a(){for(var t,a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,n(o(t),"_frameNode",null),n(o(t),"_frameUITransform",null),n(o(t),"_contentUITransform",null),n(o(t),"_contentLayout",null),n(o(t),"_itemNode",null),n(o(t),"_contentNode",null),n(o(t),"_wallLvLabel",null),n(o(t),"_nextLabel",null),t}t(a,e);var r=a.prototype;return r.start=function(){},r.onLoad=function(){var e=this;e._frameNode=e.node.getChildByName("frame"),e._frameUITransform=e._frameNode.getComponent(c),e._contentUITransform=e._frameNode.getChildByName("content").getComponent(c),e._itemNode=e._frameNode.getChildByName("item"),e._contentNode=e._frameNode.getChildByName("content"),e._contentLayout=e._contentNode.getComponent(l),e._wallLvLabel=e._frameNode.getChildByName("label_level").getComponent(i),e._nextLabel=e._frameNode.getChildByName("label_next").getComponent(f);for(var t=0;t<15;t++){var n=s(this._itemNode);n.parent=this._contentNode,n.active=!0}},r.onEnable=function(){var e=this;e.init(),e._frameUITransform.height=this._contentUITransform.height+350,e._frameNode.getComponent(d).opacity=255,m(e._frameNode).stop(),e._frameNode.scale=_(0,0,1),m(e._frameNode).to(.2,{scale:_(1.1,1.1,1)}).to(.1,{scale:_(1,1,1)}).start()},r.onHide=function(){var e=this;m(e._frameNode).stop(),m(e._frameNode).to(.1,{scale:_(.6,.6,1)}).call((function(){e.node.active=!1})).start();var t=e._frameNode.getComponent(d);m(t).to(.3,{opacity:0}).start()},r.init=function(){var e=this;e._contentNode.children.forEach((function(e){e.active=!1}));var t=p.instance().getWallData().level;e._wallLvLabel.string=t.toString();for(var n=0;n<=t;n++){e._contentNode.children[n]||(e._contentNode.children[n]=s(e._itemNode));var o=e._contentNode.children[n].getComponent(f),a=g.instance().wallCfgMap[n],r=g.instance().effectCfgMap[a.effectId];e.setItemRichText(o,r)}e._contentLayout.updateLayout();var c=t+1,l=g.instance().wallCfgMap[c],i=g.instance().effectCfgMap[l.effectId];l?e.setItemRichText(e._nextLabel,i):e._nextLabel.string="<color=#ccc7f5>您已到达最高级</color>"},r.setItemRichText=function(e,t){var n=t.value.split("|"),o="";2==t.valueType&&(n[3]=(Number(n[3])/10).toString(),o="%"),e.string="<color=#ccc7f5>"+t.desc+"</color><color=#33b01a> +"+n[3]+o+"</color>",e.node.active=!0},r.update=function(e){},a}(u))||N);a._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAttributeEnum.ts",["cc"],(function(A){"use strict";var t;return{setters:[function(A){t=A.cclegacy}],execute:function(){var E;A("HeroAttributeEnum",void 0),t._RF.push({},"3bab2B3IRlLILZ0AGTbsCL+","HeroAttributeEnum",void 0),function(A){A[A.NONE=0]="NONE",A[A.MAX_HP=1]="MAX_HP",A[A.HP=2]="HP",A[A.ATTACK=3]="ATTACK",A[A.MOVE=4]="MOVE",A[A.RATE=5]="RATE",A[A.CRIT_CHANCE=6]="CRIT_CHANCE",A[A.CRIT_DAMAGE=7]="CRIT_DAMAGE",A[A.DODGE_CHANCE=8]="DODGE_CHANCE",A[A.DAMAGE_REDUCTION=9]="DAMAGE_REDUCTION",A[A.SCALE=10]="SCALE"}(E||(E=A("HeroAttributeEnum",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/HttpLogic.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./DataManager.ts","./HttpRequest.ts"],(function(t){"use strict";var n,i,e,o,c,s,r,a;return{setters:[function(t){n=t.defineProperty,i=t.createClass},function(t){e=t.cclegacy,o=t._decorator,c=t.log},function(t){s=t.GameEvent},function(t){r=t.DataManager},function(t){a=t.default}],execute:function(){var u,p,T;t("HTTP_EVENT",void 0),e._RF.push({},"3e237YzsDxIHo0hk7ZJKqMV","HttpLogic",void 0);var _,f=o.ccclass;o.property;!function(t){t.HTTP_LOGIN="HTTP_LOGIN",t.HTTP_REGISTER="HTTP_REGISTER"}(_||(_=t("HTTP_EVENT",{})));t("HttpLogic",f("HttpLogic")((T=p=function(){function t(){n(this,"_opt",void 0)}var e=t.prototype;return e.httpGet=function(t,n,i){var e=r.instance().url+t+"?";for(var o in n)e=e+"&"+o+"="+n[o];a.request(e,"GET",{},this.onHttpComBack.bind(this))},e.login=function(t,n){this._opt=_.HTTP_LOGIN},e.register=function(t,n,i){this._opt=_.HTTP_REGISTER},e.onHttpComBack=function(t){if(t=JSON.parse(t),c(t),0==t.code){t.data;switch(this._opt){case _.HTTP_LOGIN:}s.dispatchEvent(this._opt,t)}else 2==t.code&&(window.location.href=window.location.href)},i(t,null,[{key:"instance",get:function(){return this._ins?this._ins:this._ins=new t}}]),t}(),n(p,"_ins",null),u=T))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameButton.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./CommonUtil.ts","./AudioManager.ts"],(function(e){"use strict";var t,i,n,a,o,r,l,s,u,c,h,p,d,f,g,y,v,M,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.defineProperty,r=e.createClass},function(e){l=e.cclegacy,s=e._decorator,u=e.EventHandler,c=e.Vec3,h=e.AudioClip,p=e.CCBoolean,d=e.Sprite,f=e.Material,g=e.Input,y=e.Component},function(e){v=e.BundleManager},function(e){M=e.CommonUtil},function(e){_=e.AudioManager}],execute:function(){var S,T,b,m,C,E,P,k,L,w,B,G,N,z,A;l._RF.push({},"49f28EYNqRBtLgu0Pi+afPo","GameButton",void 0);var H=s.ccclass,U=s.property;e("GameButton",(S=H("GameButton"),T=U(u),b=U(c),m=U(h),C=U(p),E=U(p),P=U(p),S((w=t((L=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(a(t),"clickEvents",w,a(t)),n(a(t),"pressedScale",B,a(t)),n(a(t),"clickSound",G,a(t)),n(a(t),"enableTouch",N,a(t)),n(a(t),"isPlaySound",z,a(t)),n(a(t),"stopPropagation",A,a(t)),o(a(t),"_defaultMaterial",null),o(a(t),"_highLightMaterial",null),o(a(t),"_defaultScaleValue",new c(1,1,1)),o(a(t),"_isMove",!1),t}i(t,e);var l=t.prototype;return l.setGray=function(e,t){void 0===t&&(t=!1);var i=e.getComponent(d);i&&(i.grayscale=t,i.customMaterial=null);for(var n=0;n<e.children.length;++n){var a=e.children[n];this.setGray(a,t)}},l.onLoad=function(){var e=this,t="materials/brightness";v.instance().loadRes(t,f,null,(function(i,n){i?console.error("ButtonLayer: load material failed, resName: "+t+", error: "+i):e._highLightMaterial=n})),this._defaultScaleValue=new c(this.node.scale),this.pressedScale.multiply(this._defaultScaleValue);var i=this.node.getComponent(d);i&&(this._defaultMaterial=i.getMaterial(0)),this.node.on(g.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(g.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(g.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(g.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},l.updateNodeMaterial=function(e,t){if(e){var i=e.getComponent(d);i&&i.setMaterial(t,0);for(var n=0;n<e.children.length;++n){var a=e.children[n];this.updateNodeMaterial(a,t)}}},l.onTouchStart=function(e){e.propagationStopped=this.stopPropagation,this._isMove=!1,this.enableTouch&&(this.node.setScale(this.pressedScale),this._highLightMaterial&&this._defaultMaterial&&this.updateNodeMaterial(this.node,this._highLightMaterial),this.isPlaySound&&this.playClickSound())},l.onTouchEnd=function(e){e.propagationStopped=this.stopPropagation,this.enableTouch&&(this.node.setScale(this._defaultScaleValue),this._defaultMaterial&&this.updateNodeMaterial(this.node,this._defaultMaterial),e.type!==g.EventType.TOUCH_END||this._isMove||u.emitEvents(this.clickEvents,e),this._isMove=!1)},l.onTouchMove=function(e){e.propagationStopped=this.stopPropagation;var t=e.getPreviousLocation();if(!this._isMove){var i=e.getLocation();M.getDistance(t.x,t.y,i.x,i.y)>3&&(this._isMove=!0),e.getTouches().length>=2&&(this._isMove=!0)}},l.playClickSound=function(){if(this.clickSound)_.instance().playChip(this.clickSound);else{_.instance().playSound("audio/click")}},r(t,[{key:"isGray",set:function(e){this.setGray(this.node,e)}},{key:"activeBtn",get:function(){return this.enableTouch},set:function(e){this.isGray=!e,this.enableTouch=e}}]),t}(y)).prototype,"clickEvents",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),B=t(L.prototype,"pressedScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(.95,.95,.95)}}),G=t(L.prototype,"clickSound",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(L.prototype,"enableTouch",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),z=t(L.prototype,"isPlaySound",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),A=t(L.prototype,"stopPropagation",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=L))||k));l._RF.pop()}}}));

System.register("chunks:///_virtual/LevelTopItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts"],(function(e){"use strict";var t,i,a,r,l,n,o,c,p,s,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.defineProperty},function(e){n=e.cclegacy,o=e._decorator,c=e.Label,p=e.Sprite,s=e.UIOpacity,u=e.Component},function(e){f=e.BundleManager}],execute:function(){var y,d,v,b,g,m,_,h,I;n._RF.push({},"4ae9956blZJa4kBdvmKlj4b","LevelTopItem",void 0);var L=o.ccclass,S=o.property;e("LevelTopItem",(y=L("LevelTopItem"),d=S(c),v=S(p),b=S(s),y((_=t((m=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(r(t),"levelLabel",_,r(t)),a(r(t),"frameSprite",h,r(t)),a(r(t),"nodeUIOpacity",I,r(t)),l(r(t),"_scaleV3",void 0),t}return i(t,e),t.prototype.updateView=function(e,t){var i=this;if(e){i._scaleV3||(i._scaleV3=i.node.getScale()),i.nodeUIOpacity.opacity=255,i.levelLabel.string=e.id+"";var a=e.isBoss?"gk2":"gk1";f.instance().setSpriteAtlas(i.frameSprite,"fight/fight",a),i._scaleV3.x=i._scaleV3.y=t,i.node.setScale(i._scaleV3)}else i.nodeUIOpacity.opacity=0},t}(u)).prototype,"levelLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=t(m.prototype,"frameSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(m.prototype,"nodeUIOpacity",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=m))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/ValueTypeEnum.ts",["cc"],(function(e){"use strict";var u;return{setters:[function(e){u=e.cclegacy}],execute:function(){var n;e("ValueTypeEnum",void 0),u._RF.push({},"4cf84s/sE1D6KlOoBZGDjry","ValueTypeEnum",void 0),function(e){e[e.FIXED=1]="FIXED",e[e.PERCENT=2]="PERCENT"}(n||(n=e("ValueTypeEnum",{}))),u._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterShowUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ConfigManager.ts","./UIBase.ts","./DataManager.ts","./ChapterShowItem.ts"],(function(e){"use strict";var t,r,n,a,o,i,c,h,u,p,s,l,f,m,w,I,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.defineProperty,a=e.assertThisInitialized,o=e.initializerDefineProperty,i=e.asyncToGenerator},function(e){c=e.cclegacy,h=e._decorator,u=e.Node,p=e.UITransform,s=e.Prefab,l=e.Layout,f=e.instantiate},function(e){m=e.ConfigManager},function(e){w=e.UIBase},function(e){I=e.DataManager},function(e){d=e.ChapterShowItem}],execute:function(){var C,y,g,S,b,_,v,N,U,M,T;c._RF.push({},"4f3c9g2aJVM/ZFDAsnBzGyq","ChapterShowUI",void 0);var z=h.ccclass,P=h.property;e("ChapterShowUI",(C=z("ChapterShowUI"),y=P(u),g=P(p),S=P(s),b=P(l),C((N=t((v=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(a(t),"hasMask",!1),o(a(t),"itemNode",N,a(t)),o(a(t),"itemNodeUITransform",U,a(t)),o(a(t),"chapterShowItemPrefab",M,a(t)),o(a(t),"itemNodeLayout",T,a(t)),n(a(t),"_currentChapterShowItem",void 0),t}r(t,e);var c=t.prototype;return c.start=function(){this.showContent()},c.showContent=function(){var e=i((function*(){var e,t=this,r=m.instance().chapterCfgMap[I.instance().chapter].content,n=r.length,a=t.chapterShowItemPrefab,o=t.itemNode;t.itemNodeUITransform.width=(50+t.itemNodeLayout.spacingX)*n;for(var i=0;i<n;i++)e=f(a),t._currentChapterShowItem=e.getComponent(d),t._currentChapterShowItem.setContent(r[i],0==i),o.addChild(e),yield t._currentChapterShowItem.showTween(),t._currentChapterShowItem=null}));return function(){return e.apply(this,arguments)}}(),c.onClick=function(){var e=this;e._currentChapterShowItem?(e._currentChapterShowItem.stopTween(),e._currentChapterShowItem=null):e.hide()},t}(w)).prototype,"itemNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(v.prototype,"itemNodeUITransform",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(v.prototype,"chapterShowItemPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(v.prototype,"itemNodeLayout",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=v))||_));c._RF.pop()}}}));

System.register("chunks:///_virtual/FightFontItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./HeroAttributeEnum.ts","./PoolBase.ts"],(function(t){"use strict";var e,i,n,o,a,r,l,u,s,c,m,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Label,u=t.Animation,s=t.Font},function(t){c=t.BundleManager},function(t){m=t.HeroAttributeEnum},function(t){h=t.PoolBase}],execute:function(){var f,b,p,g,_,d,y,A,v;a._RF.push({},"51b9ajxPMNDBrEYfe+EMPhG","FightFontItem",void 0);var F=r.ccclass,L=r.property;t("FightFontItem",(f=F("FightFontItem"),b=L(l),p=L(l),g=L(u),f((y=e((d=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"numLabel",y,o(e)),n(o(e),"titleLabel",A,o(e)),n(o(e),"showAnimation",v,o(e)),e}i(e,t);var a=e.prototype;return a.start=function(){this.showAnimation.on(u.EventType.FINISHED,this.removeToPool,this)},a.updateView=function(t,e,i){var n,o,a=this;if(i)switch(i){case m.MAX_HP:case m.HP:n="bitmap/fight_hp_num/fight_hp_num",o="X";break;case m.ATTACK:n="bitmap/fight_attack_num/fight_attack_num",o="A";break;case m.CRIT_CHANCE:n="bitmap/fight_crit_num/fight_crit_num",o="C";break;case m.DODGE_CHANCE:n="bitmap/fight_dodge_num/fight_dodge_num",o="S";break;default:return}else n=e?"bitmap/fight_num_2/fight_num_2":"bitmap/fight_num_1/fight_num_1";c.instance().loadRes(n,s,null,(function(t,e){t||(a.numLabel.font=e,o&&(a.titleLabel.font=e))})),a.titleLabel.string=o||"",-1!=String(t).indexOf(".")&&(t=Math.floor(Number(t))+""),Number(t)&&Number(t)>0&&(t="+"+t),a.numLabel.string=t,a.node.getPosition().y+=20,a.showAnimation.play()},a.removeToPool=function(){this.numLabel.string="",t.prototype.removeToPool.call(this)},e}(h)).prototype,"numLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(d.prototype,"titleLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(d.prototype,"showAnimation",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=d))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterShowItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,o,i,r,a,c,l,s,p,u,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.defineProperty},function(e){a=e.cclegacy,c=e._decorator,l=e.Label,s=e.UIOpacity,p=e.color,u=e.tween,h=e.Tween,y=e.Component}],execute:function(){var f,b,v,d,_,w,L;a._RF.push({},"52a29w2FbhGMaln92iLYLJv","ChapterShowItem",void 0);var m=c.ccclass,I=c.property;e("ChapterShowItem",(f=m("ChapterShowItem"),b=I(l),v=I(s),f((w=t((_=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,o(i(t),"contentLabel",w,i(t)),o(i(t),"nodeUIOpacity",L,i(t)),r(i(t),"_content",void 0),r(i(t),"_isTitle",void 0),r(i(t),"_promiseResolve",void 0),t}n(t,e);var a=t.prototype;return a.setContent=function(e,t){this._content=e,this._isTitle=t},a.start=function(){var e=this;e.nodeUIOpacity.opacity=0,e.contentLabel.string=e._content;var t=e.node.getPosition();e._isTitle?(e.contentLabel.fontSize=64,e.contentLabel.lineHeight=64,e.contentLabel.color=p("#b92c11"),t.y=160):(e.contentLabel.fontSize=48,e.contentLabel.lineHeight=48,e.contentLabel.color=p("#fae681"),t.y=0),e.node.setPosition(t)},a.showTween=function(){var e=this;return new Promise((function(t,n){e._promiseResolve=t,u(e.nodeUIOpacity).to(3,{opacity:255}).call((function(){e._promiseResolve()})).start()}))},a.stopTween=function(){var e=this;h.stopAllByTarget(e.nodeUIOpacity),e._promiseResolve(),e.nodeUIOpacity.opacity=255},t}(y)).prototype,"contentLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(_.prototype,"nodeUIOpacity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=_))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/HeroStand.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FightEventEnum.ts","./GameEvent.ts","./HeroState.ts"],(function(t){"use strict";var n,e,i,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.FightEventEnum},function(t){o=t.GameEvent},function(t){r=t.HeroState}],execute:function(){e._RF.push({},"54635k8wJJEFYl9kx2QvfJf","HeroStand",void 0);t("HeroStand",function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.onEnter=function(){t.prototype.onEnter.call(this);this._stateMachine.heroItem.playAction("daiji",!0)},r._addEvent=function(){o.on(i.ADD_FIGHT,this._onAddFight,this),o.on(i.FIGHT_START,this._onStartFight,this)},r._removeEvent=function(){o.off(i.ADD_FIGHT,this._onAddFight,this),o.off(i.FIGHT_START,this._onStartFight,this)},e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/HeroNameFrameItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./HeroComponent.ts"],(function(e){"use strict";var r,t,o,n,a,c;return{setters:[function(e){r=e.inheritsLoose,t=e.defineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator},function(e){c=e.HeroComponent}],execute:function(){var i;n._RF.push({},"555ddmIbW1H5oaZE8rjgCio","HeroNameFrameItem",void 0);var s=a.ccclass;a.property,e("HeroNameFrameItem",s("HeroNameFrameItem")(i=function(e){function n(){for(var r,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return r=e.call.apply(e,[this].concat(a))||this,t(o(r),"_baseScale",.8),r}return r(n,e),n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/NetNode.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,s,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,s=e.defineProperty},function(e){n=e.cclegacy}],execute:function(){var i,o;e({NetNodeState:void 0,NetTipsType:void 0}),n._RF.push({},"57375FHiadJY6censUPIkDW","NetNode",void 0),function(e){e[e.Connecting=0]="Connecting",e[e.ReConnecting=1]="ReConnecting",e[e.Requesting=2]="Requesting",e[e.Error=3]="Error"}(i||(i=e("NetTipsType",{}))),function(e){e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Checking=2]="Checking",e[e.Working=3]="Working"}(o||(o=e("NetNodeState",{})));e("NetNode",function(){function e(){s(this,"_connectOptions",null),s(this,"_autoReconnect",0),s(this,"_isSocketInit",!1),s(this,"_isSocketOpen",!1),s(this,"_state",o.Closed),s(this,"_socket",null),s(this,"_networkTips",null),s(this,"_protocolHelper",null),s(this,"_connectedCallback",null),s(this,"_disconnectCallback",null),s(this,"_callbackExecuter",null),s(this,"_keepAliveTimer",null),s(this,"_receiveMsgTimer",null),s(this,"_reconnectTimer",null),s(this,"_heartTime",1e4),s(this,"_receiveTime",6e6),s(this,"_reconnetTimeOut",8e6),s(this,"_requests",Array()),s(this,"_listener",{})}var n=e.prototype;return n.init=function(e,t,s,n){void 0===s&&(s=null),void 0===n&&(n=null),console.log("NetNode init socket"),this._socket=e,this._protocolHelper=t,this._networkTips=s,this._callbackExecuter=n||function(e,t){e.callback.call(e.target,0,t)}},n.connect=function(e){return!(!this._socket||this._state!=o.Closed)&&(this._isSocketInit||this.initSocket(),this._state=o.Connecting,this._socket.connect(e)?(null==this._connectOptions&&"number"==typeof e.autoReconnect&&(this._autoReconnect=e.autoReconnect),this._connectOptions=e,this.updateNetTips(i.Connecting,!0),!0):(this.updateNetTips(i.Connecting,!1),!1))},n.initSocket=function(){var e=this;this._socket&&(this._socket.onConnected=function(t){e.onConnected(t)},this._socket.onMessage=function(t){e.onMessage(t)},this._socket.onError=function(t){e.onError(t)},this._socket.onClosed=function(t){e.onClosed(t)},this._isSocketInit=!0)},n.updateNetTips=function(e,t){this._networkTips&&(e==i.Requesting?this._networkTips.requestTips(t):e==i.Connecting?this._networkTips.connectTips(t):e==i.ReConnecting?this._networkTips.reconnectTips(t):e==i.Error&&this._networkTips.errorTips(t))},n.onConnected=function(e){var t=this;console.log("NetNode onConnected!"),this._isSocketOpen=!0,null!==this._connectedCallback?(this._state=o.Checking,this._connectedCallback((function(){t.onChecked()}))):this.onChecked(),console.log("NetNode onConnected! state ="+this._state)},n.onChecked=function(){if(console.log("NetNode onChecked!"),this._state=o.Working,this.updateNetTips(i.Connecting,!1),this.updateNetTips(i.ReConnecting,!1),console.log("NetNode flush "+this._requests.length+" request"),this._requests.length>0){for(var e=0;e<this._requests.length;){var t=this._requests[e];this._socket.send(t.buffer),null==t.rspObject||t.rspCmd<=0?this._requests.splice(e,1):++e}this.updateNetTips(i.Requesting,this.request.length>0)}},n.onMessage=function(e){if(this._protocolHelper.checkPackage(e)){this.resetReceiveMsgTimer(),this.resetHearbeatTimer();var s=this._protocolHelper.getPackageId(e);if(console.log("NetNode onMessage rspCmd = "+s),this._requests.length>0){for(var n in this._requests){var o=this._requests[n];if(o.rspCmd==s&&o.rspObject){console.log("NetNode execute request rspcmd "+s),this._callbackExecuter(o.rspObject,e),this._requests.splice(parseInt(n),1);break}}console.log("NetNode still has "+this._requests.length+" request watting"),0==this._requests.length&&this.updateNetTips(i.Requesting,!1)}var r=this._listener[s];if(null!=r)for(var c,l=t(r);!(c=l()).done;){var h=c.value;console.log("NetNode execute listener cmd "+s),this._callbackExecuter(h,e)}}else console.error("NetNode checkHead Error")},n.onError=function(e){console.error(e),this.updateNetTips(i.Error,!0),this._state=o.Closed},n.onClosed=function(e){var t=this;this.clearTimer(),!this._disconnectCallback||this._disconnectCallback()?this.isAutoReconnect()?(this.updateNetTips(i.ReConnecting,!0),this._reconnectTimer=setTimeout((function(){t._socket.close(),t._state=o.Closed,t.connect(t._connectOptions),t._autoReconnect>0&&(t._autoReconnect-=1)}),this._reconnetTimeOut)):this._state=o.Closed:console.log("disconnect return!")},n.close=function(e,t){this.clearTimer(),this._listener={},this._requests.length=0,this._networkTips&&(this._networkTips.connectTips(!1),this._networkTips.reconnectTips(!1),this._networkTips.requestTips(!1)),this._socket?this._socket.close(e,t):this._state=o.Closed},n.closeSocket=function(e,t){this._socket&&this._socket.close(e,t)},n.send=function(e,t){return void 0===t&&(t=!1),this._state==o.Working||t?(console.log("socket send ..."),this._socket.send(e)):this._state==o.Checking||this._state==o.Connecting?(this._requests.push({buffer:e,rspCmd:0,rspObject:null}),console.log("NetNode socket is busy, push to send buffer, current state is "+this._state),0):(console.error("NetNode request error! current state is "+this._state),-1)},n.request=function(e,t,s,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1),(this._state==o.Working||r)&&this._socket.send(e),console.log("NetNode request with timeout for "+t),this._requests.push({buffer:e,rspCmd:t,rspObject:s}),n&&this.updateNetTips(i.Requesting,!0)},n.requestUnique=function(e,t,s,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);for(var o=0;o<this._requests.length;++o)if(this._requests[o].rspCmd==t)return console.log("NetNode requestUnique faile for "+t),!1;return this.request(e,t,s,n,i),!0},n.setResponeHandler=function(e,t,s){return null==t?(console.error("NetNode setResponeHandler error "+e),!1):(this._listener[e]=[{target:s,callback:t}],!0)},n.addResponeHandler=function(e,t,s){if(null==t)return console.error("NetNode addResponeHandler error "+e),!1;var n={target:s,callback:t};null==this._listener[e]?this._listener[e]=[n]:-1==this.getNetListenersIndex(e,n)&&this._listener[e].push(n);return!0},n.removeResponeHandler=function(e,t,s){if(null!=this._listener[e]&&null!=t){var n=this.getNetListenersIndex(e,{target:s,callback:t});-1!=n&&this._listener[e].splice(n,1)}},n.cleanListeners=function(e){void 0===e&&(e=-1),-1==e?this._listener={}:this._listener[e]=null},n.getNetListenersIndex=function(e,t){for(var s=-1,n=0;n<this._listener[e].length;n++){var i=this._listener[e][n];if(i.callback==t.callback&&i.target==t.target){s=n;break}}return s},n.resetReceiveMsgTimer=function(){var e=this;null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),this._receiveMsgTimer=setTimeout((function(){console.warn("NetNode recvieMsgTimer close socket!"),e._socket.close()}),this._receiveTime)},n.resetHearbeatTimer=function(){var e=this;null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),this._keepAliveTimer=setTimeout((function(){console.log("NetNode keepAliveTimer send Hearbeat"),e.send(e._protocolHelper.getHearbeat())}),this._heartTime)},n.clearTimer=function(){null!==this._receiveMsgTimer&&clearTimeout(this._receiveMsgTimer),null!==this._keepAliveTimer&&clearTimeout(this._keepAliveTimer),null!==this._reconnectTimer&&clearTimeout(this._reconnectTimer)},n.isAutoReconnect=function(){return 0!=this._autoReconnect},n.rejectReconnect=function(){this._autoReconnect=0,this.clearTimer()},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillTriggerEnum.ts",["cc"],(function(i){"use strict";var r;return{setters:[function(i){r=i.cclegacy}],execute:function(){var e;i("SkillTriggerEnum",void 0),r._RF.push({},"5ad5avIKdNBJIZq0g6Gfeba","SkillTriggerEnum",void 0),function(i){i[i.NONE=0]="NONE",i[i.START=1]="START",i[i.ACTION=2]="ACTION",i[i.ATTACK=3]="ATTACK",i[i.SUFFER=4]="SUFFER"}(e||(e=i("SkillTriggerEnum",{}))),r._RF.pop()}}}));

System.register("chunks:///_virtual/NetManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(n){"use strict";var e,t,i,o,s;return{setters:[function(n){e=n.inheritsLoose,t=n.defineProperty,i=n.assertThisInitialized},function(n){o=n.cclegacy},function(n){s=n.Singleton}],execute:function(){o._RF.push({},"5f8e1EUnoBEAJbOsq5uO7C5","NetManager",void 0);n("NetManager",function(n){function o(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=n.call.apply(n,[this].concat(s))||this,t(i(e),"_channels",{}),e}e(o,n);var s=o.prototype;return s.setNetNode=function(n,e){void 0===e&&(e=0),this._channels[e]=n},s.removeNetNode=function(n){delete this._channels[n]},s.connect=function(n,e){return void 0===e&&(e=0),!!this._channels[e]&&this._channels[e].connect(n)},s.send=function(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=0);var i=this._channels[t];return i?i.send(n,e):-1},s.request=function(n,e,t,i,o,s){void 0===i&&(i=!0),void 0===o&&(o=!1),void 0===s&&(s=0);var r=this._channels[s];r&&r.request(n,e,t,i,o)},s.requestUnique=function(n,e,t,i,o,s){void 0===i&&(i=!0),void 0===o&&(o=!1),void 0===s&&(s=0);var r=this._channels[s];return!!r&&r.requestUnique(n,e,t,i,o)},s.close=function(n,e,t){if(void 0===t&&(t=0),this._channels[t])return this._channels[t].closeSocket(n,e)},o}(s));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAttribute.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FightEventEnum.ts","./GameEvent.ts","./HeroAttributeEnum.ts"],(function(t){"use strict";var e,n,r,i,u;return{setters:[function(t){e=t.defineProperty},function(t){n=t.cclegacy},function(t){r=t.FightEventEnum},function(t){i=t.GameEvent},function(t){u=t.HeroAttributeEnum}],execute:function(){n._RF.push({},"60037So0uNA+Yf4T9YxH6zB","HeroAttribute",void 0);t("HeroAttribute",function(){function t(){e(this,"maxHp",0),e(this,"hp",0),e(this,"attack",0),e(this,"rate",0),e(this,"move",0),e(this,"scale",0),e(this,"critChance",0),e(this,"critDamage",0),e(this,"dodgeChance",0),e(this,"damageReduction",0)}var n=t.prototype;return n.handleAttribute=function(t,e,n,c){for(var a=this,s=Object.keys(a),o=s.length,h=0;h<o;h++)t[s[h]]&&(a[s[h]]+=t[s[h]],n&&(a._getAttributeEnum(s[h])==u.HP&&t[s[h]]<0?i.dispatchEvent(r.SHOW_FONT,t[s[h]],e,c):i.dispatchEvent(r.SHOW_FONT,t[s[h]],e,c,a._getAttributeEnum(s[h]))))},n._getAttributeEnum=function(t){switch(t){case"maxHp":return u.MAX_HP;case"hp":return u.HP;case"attack":return u.ATTACK;case"move":return u.MOVE;case"rate":return u.RATE;case"critChance":return u.CRIT_CHANCE;case"critDamage":return u.CRIT_DAMAGE;case"dodgeChance":return u.DODGE_CHANCE;case"damageReduction":return u.DAMAGE_REDUCTION}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UIModule.ts",["cc"],(function(I){"use strict";var U;return{setters:[function(I){U=I.cclegacy}],execute:function(){var t;I("UIModule",void 0),U._RF.push({},"6145eHUNVZPiZi6DuSLECSd","UIModule",void 0),function(I){I.LOGIN="LoginUI",I.WAIT_UI="WaitUI",I.FIGHT_UI="FightUI",I.MAIN_UI="MainUI",I.MAIN_BOTTOM_LEFT_UI="MainBottomLeftUI",I.MAIN_BOTTOM_RIGHT_UI="MainBottomRightUI",I.LEVEL_TOP_UI="LevelTopUI",I.HERO_DETAIL_UI="HeroDetailUI",I.FRONT_UI="FrontUI",I.LOTTERY_UI="LotteryUI",I.CHAPTER_SHOW_UI="ChapterShowUI",I.LEVEL_REWARD_UI="LevelRewardUI"}(t||(t=I("UIModule",{}))),U._RF.pop()}}}));

System.register("chunks:///_virtual/SkillEffectBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts","./CommonUtil.ts","./SkillReturnData.ts","./SkillTargetEnum.ts"],(function(e){"use strict";var t,a,r,i,n,s,f;return{setters:[function(e){t=e.createClass,a=e.defineProperty},function(e){r=e.cclegacy},function(e){i=e.LogUtil},function(e){n=e.CommonUtil},function(e){s=e.SkillReturnData},function(e){f=e.SkillTargetEnum}],execute:function(){r._RF.push({},"6351ej/x2NCMansz3qU7XCG","SkillEffectBase",void 0);e("SkillEffectBase",function(){function e(){a(this,"_returnMap",void 0),a(this,"_effectCfg",void 0),a(this,"_skillEffectData",void 0),a(this,"fightManager",void 0)}var r=e.prototype;return r.init=function(){},r.startEffect=function(e){var t=this;if(t._skillEffectData=e,t._isTrigger()){switch(t._effectCfg.target){case f.SELF:t._handleHeroBase(e.heroBase);break;case f.TARGET:t._handleHeroBase(e.heroBase.target);break;case f.SELF_SIDE:t._handleHeroBaseMap(e.heroBase.camp);break;case f.TARGET_SIDE:t._handleHeroBaseMap(e.heroBase.target.camp);break;case f.HANDLER:t._handleHeroBase(e.handleHeroBase)}return t._returnMap}},r._isTrigger=function(){var e=this,t=n.seedRandom(1,1e3);i.log("效果id"+this._effectCfg.id+"概率"+this._effectCfg.probability+"随机数"+t);var a=t<=e._effectCfg.probability;if(a){e._returnMap||(e._returnMap={});for(var r=Object.keys(e._returnMap),s=r.length,f=0;f<s;f++)delete e._returnMap[r[f]]}return a},r._handleHeroBaseMap=function(e){for(var t,a=this.fightManager.heroBaseMap,r=Object.keys(a),i=r.length,n=0;n<i;n++)(t=a[r[n]]).camp==e&&t.isFight&&this._handleHeroBase(t)},r._handleHeroBase=function(e){this._returnMap[e.id]||(this._returnMap[e.id]=new s)},t(e,[{key:"effectCfg",set:function(e){this._effectCfg=e}}]),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/SkillEffectEnum.ts",["cc"],(function(t){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){var e;t("SkillEffectEnum",void 0),c._RF.push({},"6526acnCDRKS5hCSOC4KXeX","SkillEffectEnum",void 0),function(t){t[t.TYPE1=1]="TYPE1",t[t.TYPE2=2]="TYPE2"}(e||(e=t("SkillEffectEnum",{}))),c._RF.pop()}}}));

System.register("chunks:///_virtual/HeroDetailSkillTipsUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ConfigManager.ts"],(function(i){"use strict";var e,t,o,r,n,l,c,s,a;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,o=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){n=i.cclegacy,l=i._decorator,c=i.RichText,s=i.Component},function(i){a=i.ConfigManager}],execute:function(){var p,u,f,h,v;n._RF.push({},"658b02ds7ZDMK55ebbS8cP3","HeroDetailSkillTipsUI",void 0);var d=l.ccclass,g=l.property;i("HeroDetailSkillTipsUI",(p=d("HeroDetailSkillTipsUI"),u=g(c),p((v=e((h=function(i){function e(){for(var e,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return e=i.call.apply(i,[this].concat(n))||this,o(r(e),"tipsRichText",v,r(e)),e}t(e,i);var n=e.prototype;return n.show=function(i,e,t){var o=this,r="<color=#676767>当前等级："+i.lv+"</color>",n="<color=#7ea032>\n"+e.des+"</color>";if(o.tipsRichText.string=r+n,!i.isMax){var l=a.instance(),c=l.skillLvCfgMap[i.lv+1],s=l.skillCfgMap[c.skillId],p="<color=#676767>\n下一等级："+c.lv+"</color>",u="<color=#ce8113>\n"+s.des+"</color>";o.tipsRichText.string+=p+u}o.node.setPosition(t),o.node.active=!0},n.hide=function(){this.node.active=!1},e}(s)).prototype,"tipsRichText",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroDeath.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./HeroStateEnum.ts","./HeroState.ts"],(function(e){"use strict";var t,o,n,a;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy},function(e){n=e.HeroStateEnum},function(e){a=e.HeroState}],execute:function(){o._RF.push({},"669c2McSJpA7IX/Vo10Raod","HeroDeath",void 0);e("HeroDeath",function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.prototype.onEnter=function(){e.prototype.onEnter.call(this);var t=this;t._fightManager.removeFight(t._stateMachine.heroBase.id),t._stateMachine.heroItem.playAction("siwang",!1,(function(){1==t._stateMachine.heroBase.camp?(t._stateMachine.changeState(n.STAND),t._stateMachine.heroBase.setToResetPos(),t._stateMachine.heroItem.setPosition(),t._stateMachine.heroBase.target=null,t._stateMachine.heroItem.setHeroActive(!1)):t._stateMachine.heroItem.removeToPool()}))},o}(a));o._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts"],(function(t){"use strict";var e,a,n;return{setters:[function(t){e=t.defineProperty},function(t){a=t.cclegacy},function(t){n=t.LogUtil}],execute:function(){a._RF.push({},"6a6b9x/D+FKWb2B54jJ5CkC","StateMachine",void 0);t("StateMachine",function(){function t(){e(this,"_stateMap",new Map),e(this,"_defaultStateName",null),e(this,"currentState",null),e(this,"beforeStateName",null),e(this,"_isStart",!1)}var a=t.prototype;return a.getState=function(t){return this._stateMap.get(t)},a.registerState=function(t){var e=this;if(null!=t){var a=t.stateName;return!e._stateMap.get(a)&&(t.stateMachine=e,t.init(),e._stateMap.set(a,t),!0)}},a.cancelState=function(t){var e=this._stateMap.get(t);return!!e&&(e.destroy(),this._stateMap.delete(t),!0)},a.changeState=function(t,e,a){var r=this;if(r.currentState){n.log("切换状态"+t),r.beforeStateName=r.currentState.stateName;var i=r.getState(t);return null==i?(n.log("不存在状态"+t),!1):(r.currentState.onExit(e),r.currentState=i,r.currentState.onEnter(a),!0)}},a.start=function(){var t=this;t._isStart=!0,t.currentState=t._stateMap.get(t._defaultStateName),t.currentState.onEnter()},a.stop=function(){var t=this;t._isStart&&(t._isStart=!1,t.currentState.onExit())},a.onUpdate=function(t){this._isStart&&this.currentState.onUpdate(t)},a.destroy=function(){var t=this;t.currentState=null,t._stateMap.forEach((function(e,a){t.cancelState(a)})),t._stateMap.clear()},a.getCurrentState=function(){return this.currentState},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/UIBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./UIModuleParams.ts","./UIManager.ts","./UIPriority.ts","./UIViewType.ts"],(function(e){"use strict";var t,i,n,s,a,o,r,c,u,l,h,d,p,f,y,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.defineProperty,s=e.assertThisInitialized,a=e.initializerDefineProperty},function(e){o=e.cclegacy,r=e._decorator,c=e.assetManager,u=e.v3,l=e.tween,h=e.Component},function(e){d=e.BundleManager},function(e){p=e.UIModuleParams},function(e){f=e.UIManager},function(e){y=e.UIPriority},function(e){I=e.UIViewType}],execute:function(){var w,U,g,v,M;o._RF.push({},"6c4ccFtYMJJEaXGSj+B+hKx","UIBase",void 0);var T=r.ccclass,m=r.property;e("UIBase",(w=T("UIBase"),U=m({tooltip:"点击遮罩关闭界面"}),w((M=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(s(t),"priority",y.UI),n(s(t),"uiViewType",I.SCREEN),n(s(t),"hasMask",!0),n(s(t),"uiModule",void 0),n(s(t),"hasTween",!1),n(s(t),"isRelease",!1),n(s(t),"isDestroy",!0),n(s(t),"maskThrough",!1),n(s(t),"maskAlpha",180),a(s(t),"maskClose",M,s(t)),t}i(t,e);var o=t.prototype;return o.initShow=function(){var e=this;e.hasTween&&e.showTween(),e.show.apply(e,arguments)},o.show=function(){},o.hide=function(){var e=this;e.hasTween?e.hideTween(e.closeUI.bind(e)):e.closeUI()},o.closeUI=function(){f.instance().hideUI(this.uiModule),this.dispose()},o.dispose=function(){var e=this;if(e.isDestroy&&e.destroy(),e.isRelease){var t=p[e.uiModule];c.getBundle(d.instance().bundleName).release(t.path)}},o.showTween=function(){this.node.scale=u(.6,.6,1),l(this.node).to(.2,{scale:u(1.01,1.01,1)},{easing:"quadOut"}).to(1,{scale:u(1,1,1)},{easing:"circOut"}).start()},o.hideTween=function(e){this.node.scale=u(1,1,1),l(this.node).to(.2,{scale:u(.5,.5,1)},{easing:"quadIn"}).call(e).start()},t}(h)).prototype,"maskClose",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=v))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAttack.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts","./CommonUtil.ts","./SkillEffectData.ts","./SkillTriggerEnum.ts","./HeroStateEnum.ts","./HeroState.ts"],(function(t){"use strict";var e,a,i,n,r,o,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy},function(t){i=t.LogUtil},function(t){n=t.CommonUtil},function(t){r=t.SkillEffectData},function(t){o=t.SkillTriggerEnum},function(t){c=t.HeroStateEnum},function(t){s=t.HeroState}],execute:function(){a._RF.push({},"75ef3KWOVlOhJqJnGLBgHsC","HeroAttack",void 0);t("HeroAttack",function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this,a=e._stateMachine.heroItem,s=e._stateMachine.heroBase,l=(e._stateMachine.heroBase.target.stateMachine.heroItem,new r);l.handleHeroBase=s,l.attackId=s.target.id;var u=n.seedRandom(1,1e3),h=u<s.attribute.critChance;i.log("id"+s.target.id+"暴击"+s.target.attribute.critChance+"随机数"+u);var f=s.attribute.attack;h&&(l.isCrit=!0,f=s.attribute.attack*(1+s.attribute.critDamage/1e3)),l.finalDamage=f,e._handlePassiveSkill(o.ATTACK,l);var g=s.selectSkill(o.ATTACK,!0),k="putonggongji";g&&g.skillCfg.actionName&&(k=g.skillCfg.actionName),a.playAction(k,!1,(function(){e._stateMachine.changeState(c.ACTION)}),(function(){if(e._stateMachine.heroBase.target&&!(e._stateMachine.heroBase.target.attribute.hp<=0)&&e._stateMachine.heroBase.target.isFight)if(g){var t=g.handleEffect(l);e._handleSkill(t,g,l),e._stateMachine.heroBase.target.stateMachine.getCurrentState().suffer(l)}else e._stateMachine.heroBase.target.stateMachine.getCurrentState().suffer(l)}))},a}(s));a._RF.pop()}}}));

System.register("chunks:///_virtual/MainUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIPriority.ts","./UIBase.ts"],(function(t){"use strict";var r,n,i,e,o,s,c;return{setters:[function(t){r=t.inheritsLoose,n=t.defineProperty,i=t.assertThisInitialized},function(t){e=t.cclegacy,o=t._decorator},function(t){s=t.UIPriority},function(t){c=t.UIBase}],execute:function(){var a;e._RF.push({},"77bcb3NuNJMWJNWuHFIZhZe","MainUI",void 0);var u=o.ccclass;o.property,t("MainUI",u("MainUI")(a=function(t){function e(){for(var r,e=arguments.length,o=new Array(e),c=0;c<e;c++)o[c]=arguments[c];return r=t.call.apply(t,[this].concat(o))||this,n(i(r),"hasMask",!1),n(i(r),"priority",s.TOP),r}r(e,t);var o=e.prototype;return o.start=function(){},o.show=function(){},e}(c))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/SkillReturnData.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i;return{setters:[function(t){e=t.defineProperty},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"791a0xFBs5NHoYQGs0Mtyag","SkillReturnData",void 0);t("SkillReturnData",(function(){e(this,"attribute",void 0),e(this,"damage",void 0)}));i._RF.pop()}}}));

System.register("chunks:///_virtual/FightManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./FightEventEnum.ts","./GameEvent.ts","./CommonUtil.ts","./ConfigManager.ts","./DataManager.ts","./GameUtil.ts","./HeroBase.ts"],(function(e){"use strict";var i,a,t,s,r,n,o,h,c,p,g,f,l;return{setters:[function(e){i=e.inheritsLoose,a=e.defineProperty,t=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator},function(e){n=e.Singleton},function(e){o=e.FightEventEnum},function(e){h=e.GameEvent},function(e){c=e.CommonUtil},function(e){p=e.ConfigManager},function(e){g=e.DataManager},function(e){f=e.GameUtil},function(e){l=e.HeroBase}],execute:function(){var u;s._RF.push({},"7abbaIzneNGL6p21FYrtd8k","FightManager",void 0);var v=r.ccclass;e("FightManager",v("FightManager")(u=function(e){function s(){for(var i,s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return i=e.call.apply(e,[this].concat(r))||this,a(t(i),"fightTime",void 0),a(t(i),"heroBaseMap",{}),a(t(i),"isStart",!1),a(t(i),"isFinish",!1),a(t(i),"_searchCamp",void 0),a(t(i),"fightSpeed",1.5),a(t(i),"_isRemove",!1),a(t(i),"_searchFinish",!1),a(t(i),"isFight",!1),a(t(i),"_fightId",0),a(t(i),"_initHeroBaseArray",[]),a(t(i),"_configManager",p.instance()),a(t(i),"isLoop",!1),a(t(i),"enemyHeroBaseArray",[]),i}i(s,e);var r=s.prototype;return r.createEnemy=function(e,i,a){for(var t,s=this,r=e.length,n=0;n<r;n++){(t=new l).camp=2,t.heroCfg=s._configManager.heroCfgMap[e[n]],t.lv=a[n],t.setResetPos(i[n]);var o=t.heroCfg,h=o.skill,c=o.baseSkillLv,p={};if(h)for(var g=h.length,u=0;u<g;u++)p[h[u]]=c[u];t.skillLvMap=p,t.star=f.getHeroTotalSkillLv(t.skillLvMap),s.enemyHeroBaseArray||(s.enemyHeroBaseArray=[]),s.enemyHeroBaseArray.push(t)}},r.clearHeroBase=function(){this._initHeroBaseArray.length=0},r.pushHeroBase=function(e){this._initHeroBaseArray.push(e)},r.spliceHeroBase=function(e){for(var i=this._initHeroBaseArray,a=i.length,t=0;t<a;t++)if(i[t]===e){i.splice(t,1);break}},r.spliceHeroBaseById=function(e){for(var i=this._initHeroBaseArray,a=i.length,t=0;t<a;t++)if(i[t].heroCfg.id==e){i.splice(t,1);break}},r.c=function(){var e=this._configManager.levelCfgMap[g.instance().level];this.createEnemy(e.enemy,e.pos,e.lv)},r.initFight=function(){var e,i=this,a=i._initHeroBaseArray.length;i._fightId=a,i.isFinish=!1;for(var t=a-1;t>=0;t--)(e=i._initHeroBaseArray[t]).id=i._fightId,e.initAttribute(),i.addFight(e),i._initHeroBaseArray.pop(),i._fightId--,e.stateMachine.start();i.isFight=!0,h.dispatchEvent(o.FIGHT_START)},r.addFight=function(e){this.heroBaseMap[e.id]||(this.heroBaseMap[e.id]=e)},r.removeFight=function(e){var i=this;if(i.heroBaseMap[e]){var a=i.heroBaseMap[e];a.stateMachine.stop(),1==a.camp&&i.pushHeroBase(a),delete i.heroBaseMap[e],i.isFight&&!i.isFinish&&(i._isRemove=!0),0==Object.keys(i.heroBaseMap).length&&i.isFinish&&(i.isFight=!1,h.dispatchEvent(o.RESET),i.isLoop?h.dispatchEvent(o.NEXT_FIGHT):h.dispatchEvent(o.FIGHT_END))}},r.doUpdate=function(e){var i=this;if(i.isStart){var a=Object.keys(i.heroBaseMap),t=a.length;if(0!=a.length){var s;i._isRemove&&(i._searchCamp=0,i._searchFinish=!0,i._isRemove=!1);for(var r=0;r<t;r++)s=i.heroBaseMap[a[r]],i._searchFinish&&(i._searchCamp?i._searchCamp!=s.camp&&(i._searchFinish=!1):i._searchCamp=s.camp),s.stateMachine.onUpdate(e);i._searchFinish&&(i._searchFinish=!1,i.isFinish=!0,h.dispatchEvent(o.FIGHT_RESULT,i._searchCamp))}}},r.start=function(){this.isStart=!0},r.searchTarget=function(e){for(var i,a,t,s=Object.keys(this.heroBaseMap),r=s.length,n=null,o=0;o<r;o++)o!=Number(s[o])&&(i=this.heroBaseMap[s[o]]).camp!=e.camp&&i.isFight&&((t=c.getDistance(e.pos.x,e.pos.y,i.pos.x,i.pos.y))<a||!a)&&(a=t,n=i);return n},s}(n))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/WebSock.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.defineProperty},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"7b8d3UCD+1OWbI9K9ebkYiU","WebSock",void 0);e("WebSock",function(){function e(){t(this,"_ws",null),t(this,"onConnected",null),t(this,"onMessage",null),t(this,"onError",null),t(this,"onClosed",null)}var n=e.prototype;return n.connect=function(e){var t=this;if(this._ws&&this._ws.readyState===WebSocket.CONNECTING)return console.log("websocket connecting, wait for a moment..."),!1;var n=null;if(e.url)n=e.url;else{var s=e.ip,o=e.port;n=e.protocol+"://"+s+":"+o}return this._ws=new WebSocket(n),this._ws.binaryType=e.binaryType?e.binaryType:"arraybuffer",this._ws.onmessage=function(e){(0,t.onMessage)(e.data)},this._ws.onopen=this.onConnected,this._ws.onerror=this.onError,this._ws.onclose=this.onClosed,!0},n.send=function(e){return this._ws&&this._ws.readyState==WebSocket.OPEN?(this._ws.send(e),1):-1},n.close=function(e,t){this._ws&&this._ws.close(e,t)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameListItemRender.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,o,i,a;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,a=e.Component}],execute:function(){var c;o._RF.push({},"7b908wc2B5AZ4/oEZdjlE9t","GameListItemRender",void 0);var s=i.ccclass;i.property,e("default",s(c=function(e){function o(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(r(t),"data",null),n(r(t),"itemIndex",0),t}return t(o,e),o.prototype.dataChanged=function(){},o}(a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/Main.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts","./BundleManager.ts","./GameEvent.ts","./CommonUtil.ts","./ConfigManager.ts","./PoolManager.ts","./UIManager.ts","./DataManager.ts","./UIModule.ts","./FightManager.ts","./HttpLogic.ts","./AudioManager.ts"],(function(n){"use strict";var t,a,o,i,e,s,c,r,u,g,l,d,f,M,w,p,h,m,v,U;return{setters:[function(n){t=n.inheritsLoose,a=n.asyncToGenerator},function(n){o=n.cclegacy,i=n._decorator,e=n.assetManager,s=n.Component,c=n.JsonAsset,r=n.AudioSource},function(n){u=n.LogUtil},function(n){g=n.BundleManager},function(n){l=n.GameEvent},function(n){d=n.CommonUtil},function(n){f=n.ConfigManager},function(n){M=n.PoolManager},function(n){w=n.UIManager},function(n){p=n.DataManager},function(n){h=n.UIModule},function(n){m=n.FightManager},function(n){v=n.HttpLogic},function(n){U=n.AudioManager}],execute:function(){var y;o._RF.push({},"7bfd4cKt9ZC27YWbExl0HQz","Main",void 0);var C=i.ccclass;i.property,n("Main",C("Main")(y=function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var i=o.prototype;return i.onLoad=function(){var n=window.location.origin+":8082/";-1==n.search("192.168")&&-1==n.search("localhost")&&(p.instance().url=n,u.debug=!1),g.instance().bundleName="bundles",this.loadBundle()},i.loadBundle=function(){var n=a((function*(){var n=this,t=g.instance();yield t.loadBundle(),yield t.loadRes("config/game_tips",c,null,(function(t,a){f.instance().init(t,a,0),U.instance().init(n.node.getComponent(r)),U.instance().playMusic(!0),w.instance().showUI(h.LOGIN)}))}));return function(){return n.apply(this,arguments)}}(),i.start=function(){u.debug&&(window.HttpLogic=v.instance,window.DataManger=p.instance(),window.UIManager=w.instance(),window.ConfigManager=f.instance(),window.FightManager=m.instance(),window.assetManager=e,window.GameEvent=l,window.CommonUtil=d,window.PoolManager=M.instance())},o}(s))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigUration.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var s,a,i,n,e,o;return{setters:[function(t){s=t.defineProperty,a=t.createClass},function(t){i=t.cclegacy,n=t._decorator,e=t.sys,o=t.log}],execute:function(){var r,c,u;i._RF.push({},"7fcbeItlgZF/64pNAGsrxJT","ConfigUration",void 0);var h=n.ccclass;t("ConfigUration",h("ConfigUration")((u=c=function(){function t(){s(this,"jsonData",null),s(this,"path",null),s(this,"KEY_CONFIG","local_data"),s(this,"markSave",!1),s(this,"saveTimer",-1)}var i=t.prototype;return i.start=function(){var t,s=this;(this.jsonData={userId:""},this.path=this.getConfigPath(),e.isNative)?t=jsb.fileUtils.getValueMapFromFile(this.path)[this.KEY_CONFIG]:t=e.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1));try{var a=JSON.parse(t);this.jsonData=a}catch(t){}}this.saveTimer=setInterval((function(){s.scheduleSave()}),500)},i.setConfigDataWithoutSave=function(t,s){var a=this.jsonData.userId;this.jsonData[a]?this.jsonData[a][t]=s:console.error("no account can not save")},i.setConfigData=function(t,s){this.setConfigDataWithoutSave(t,s),this.markSave=!0},i.getConfigData=function(t){var s=this.jsonData.userId;if(this.jsonData[s]){var a=this.jsonData[s][t];return a||null}return o("no account can not load"),""},i.setGlobalData=function(t,s){this.jsonData[t]=s,this.save()},i.getGlobalData=function(t){return this.jsonData[t]},i.setUserId=function(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()},i.getUserId=function(){return this.jsonData.userId},i.scheduleSave=function(){this.markSave&&this.save()},i.markModified=function(){this.markSave=!0},i.save=function(){var t=JSON.stringify(this.jsonData);if(this.markSave=!1,e.isNative){var s={};s[this.KEY_CONFIG]=t,jsb.fileUtils.writeToFile(s,this.path)}else{e.localStorage.setItem(this.KEY_CONFIG,t)}},i.getConfigPath=function(){var t=e.os,s="";return t===e.OS.WINDOWS?s="src/conf":t===e.OS.LINUX?s="./conf":e.isNative?(s=jsb.fileUtils.getWritablePath(),s+="conf"):s="src/conf",s},i.parseUrl=function(t){if(t&&!("string"==typeof t&&t.length<=0)){var s={};if("string"==typeof t)(t=t.split("?")[1]).split("&").forEach((function(t){var a=t.indexOf("=");if(-1!==a){var i=t.substring(0,a);s[i]=t.substring(a+1)}}));else s=t;s.action&&this.setGlobalData("urlParams",s),s.source&&this.setGlobalData("source",s.source)}},t.generateGuestAccount=function(){return""+Date.now()+10},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}]),t}(),s(c,"_instance",void 0),r=u))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIViewType.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var i;e("UIViewType",void 0),t._RF.push({},"7ffdbZ5Uz1HG6k2gSyjayxx","UIViewType",void 0),function(e){e[e.SCREEN=0]="SCREEN",e[e.DIALOG=1]="DIALOG"}(i||(i=e("UIViewType",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/EventListener.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,n,t;return{setters:[function(e){r=e.defineProperty},function(e){n=e.cclegacy,t=e._decorator}],execute:function(){var i,l,s;n._RF.push({},"82fb9FAfRlOdqNLR2riINgG","EventListener",void 0);var a=t.ccclass,c=function(){r(this,"handler",void 0),r(this,"caller",void 0)};e("EventListener",a("EventListener")((s=l=function(){function e(){}return e.on=function(e,r,n){var t=new c;t.handler=r,t.caller=n;var i=this.listener.get(e);i||(i=[],this.listener.set(e,i));for(var l=i.length,s=0;s<l;s++)if(!i[s])return i[s]=t,s;return i.push(t),i.length},e.off=function(e,r,n){var t=this.listener.get(e);if(t){for(var i,l=t.length,s=0;s<l;s++)if((i=t[s]).handler===r&&n===i.caller){t.splice(s,1);break}return t.length}},e.dispatchEvent=function(e){var r=this,n=r.listener.get(e);if(n){for(var t,i=n.length,l=arguments.length,s=new Array(l>1?l-1:0),a=1;a<l;a++)s[a-1]=arguments[a];for(var c=0;c<i;c++)(t=n[c]).handler&&t.handler.apply(t.caller,s)}},e}(),r(l,"listener",new Map),i=s))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroComponent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PoolBase.ts"],(function(e){"use strict";var t,o,n,s,i,r,c;return{setters:[function(e){t=e.inheritsLoose,o=e.defineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,i=e._decorator,r=e.v3},function(e){c=e.PoolBase}],execute:function(){var a;s._RF.push({},"847f6eWtHZD4qd/if7JPJ+t","HeroComponent",void 0);var l=i.ccclass;i.property,e("HeroComponent",l("HeroComponent")(a=function(e){function s(){for(var t,s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,o(n(t),"_baseScale",1),t}t(s,e);var i=s.prototype;return i.setPosition=function(e){this.node.setPosition(e)},i.setScale=function(e){var t=this,o=r(e.x*t._baseScale,e.y*t._baseScale);t.node.setScale(o)},i.setVisible=function(e){this.node.active=e},s}(c))||a);s._RF.pop()}}}));

System.register("chunks:///_virtual/PoolBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(o){"use strict";var e,t,n,r,s;return{setters:[function(o){e=o.inheritsLoose},function(o){t=o.cclegacy,n=o._decorator,r=o.Component},function(o){s=o.PoolManager}],execute:function(){var c;t._RF.push({},"86684z2VmVPJ4arqCAFChyh","PoolBase",void 0);var a=n.ccclass;o("PoolBase",a("PoolBase")(c=function(o){function t(){return o.apply(this,arguments)||this}return e(t,o),t.prototype.removeToPool=function(){s.instance().putNode(this.node)},t}(r))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts","./Singleton.ts","./CommonParam.ts","./GameEvent.ts","./ConfigManager.ts","./ConfigUration.ts","./ToastUtil.ts","./MainEventEnum.ts"],(function(t){"use strict";var a,i,e,n,r,l,o,s,h,c,f,u,g,D;return{setters:[function(t){a=t.defineProperty,i=t.inheritsLoose,e=t.assertThisInitialized,n=t.createClass},function(t){r=t.cclegacy,l=t._decorator},function(t){o=t.LogUtil},function(t){s=t.Singleton},function(t){h=t.CommonId},function(t){c=t.GameEvent},function(t){f=t.ConfigManager},function(t){u=t.ConfigUration},function(t){g=t.ToastUtil},function(t){D=t.MainEventEnum}],execute:function(){var p;r._RF.push({},"889c1jKP1lBA7wmJUJBu2oS","DataManager",void 0);var v=l.ccclass,m=(l.property,t("FinishItem",(function(t,i){a(this,"curTime",0),a(this,"needTime",0),a(this,"level",0),this.curTime=t,this.needTime=i}))),C=t("WallData",(function(t,i){a(this,"star",0),a(this,"level",0),a(this,"times",new Map),this.star=t,this.level=i})),d=function(){a(this,"array",[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]])},w=(t("DataManager",v("DataManager")(p=function(t){function r(){for(var i,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return i=t.call.apply(t,[this].concat(r))||this,a(e(i),"_url","http://192.168.2.19:8082/"),a(e(i),"level",void 0),a(e(i),"fightSlotArray",[0,0,0,0,0]),a(e(i),"chapter",void 0),a(e(i),"heroDataMap",void 0),a(e(i),"item",void 0),a(e(i),"waitSlotArray",void 0),a(e(i),"wallData",null),a(e(i),"lineUpData",null),i}i(r,t);var l=r.prototype;return l.init=function(){var t,a,i=this;if(i.level=u.instance.getConfigData("level")||1,i.chapter=u.instance.getConfigData("chapter")||1,i.heroDataMap=u.instance.getConfigData("heroDataMap")||{},i.item=u.instance.getConfigData("item")||{},i.fightSlotArray=u.instance.getConfigData("fightSlotArray"),!i.fightSlotArray){i.fightSlotArray=[];for(var e=Number(f.instance().getMisc(1)),n=0;n<e;n++)i.fightSlotArray.push(0)}i.waitSlotArray=u.instance.getConfigData("waitSlotArray")||[0,0,0,0,0,0,0],this.wallData=null!==(t=null!==(a=this.wallData)&&void 0!==a?a:u.instance.getConfigData("WallData"))&&void 0!==t?t:new C(0,0)},l.setFightSlot=function(){u.instance.setConfigData("fightSlotArray",this.fightSlotArray)},l.setWaitSlot=function(){u.instance.setConfigData("waitSlotArray",this.waitSlotArray)},l.setLevel=function(t){this.level=t,u.instance.setConfigData("level",this.level)},l.setChapter=function(t){this.chapter=t,u.instance.setConfigData("chapter",this.chapter)},l.setItemAmount=function(t,a){var i=this.item[t]||0;if(this.item[t]=i+a>=0?i+a:0,!(a<=0)){var e=f.instance().itemCfgMap[t];e&&(g.show("获得："+e.name+"x"+a),u.instance.setConfigData("item",this.item))}},l.getItemAmount=function(t){return this.item[t]||0},l.setHeroLv=function(t,a){this.heroDataMap[t].lv+=a,u.instance.setConfigData("heroDataMap",this.heroDataMap)},l.setHeroExp=function(t,a){this.heroDataMap[t].exp+=a,u.instance.setConfigData("heroDataMap",this.heroDataMap)},l.setHeroSkillLv=function(t,a,i){this.heroDataMap[t].skillLvMap[a]=i,u.instance.setConfigData("heroDataMap",this.heroDataMap)},l.setHeroData=function(t,a,i){var e=new w;e.lv=a,e.skillLvMap=i,this.heroDataMap[t]=e,u.instance.setConfigData("heroDataMap",this.heroDataMap)},l.addHero=function(t){var a=f.instance().heroCfgMap[t],i=a.skill,e=a.baseSkillLv,n={};if(i)for(var r=i.length,l=0;l<r;l++)n[i[l]]=e[l];this.setHeroData(t,1,n)},l.getExp=function(t){var a=this;a.setItemAmount(h.EXP,a.heroDataMap[t].exp),a.heroDataMap[t].exp=0,c.dispatchEvent(D.COLLECT_EXP)},l.getHeroAmount=function(){return Object.keys(this.heroDataMap).length},l.checkHasHero=function(t){return Boolean(this.heroDataMap[t])},l.checkFight=function(){for(var t=this.fightSlotArray,a=t.length,i=0;i<a;i++)if(0!=t[i])return!0;return!1},l.getEmptySlot=function(){for(var t=this.waitSlotArray,a=t.length,i=0;i<a;i++)if(!t[i])return i;return null},l.changeFightSlot=function(t){for(var a,i=this,e=i.waitSlotArray,n=t.length,r=0;r<n;r++)-1!=(a=e.indexOf(t[r]))&&(e[a]=0);for(var l=i.fightSlotArray,o=l.length,s=0;s<o;s++)-1==t.indexOf(l[s])&&(e[i.getEmptySlot()]=l[s]);i.fightSlotArray=t,i.setFightSlot()},l.setWallData=function(t,a){this.wallData.level=t,this.wallData.star=a,this.autoWallUpgrade(),u.instance.setConfigData("WallData",this.wallData)},l.addWallStar=function(t){this.wallData.star+=t,this.autoWallUpgrade(),u.instance.setConfigData("WallData",this.wallData)},l.addWallTimes=function(t,a){var i;void 0===a&&(a=1);var e=f.instance().frontCfgMap;this.wallData.times[t]=null!==(i=this.wallData.times[t])&&void 0!==i?i:new m(0,e[t].goal[0]),this.wallData.times[t].curTime+=a,u.instance.setConfigData("WallData",this.wallData)},l.upgradeWallItem=function(t){this.wallData.times[t].level+=1;var a=f.instance().frontCfgMap;this.wallData.times[t].needTime=a[t].goal[this.wallData.times[t].level],u.instance.setConfigData("WallData",this.wallData)},l.getWallData=function(){return this.wallData},l.saveLineUpArray=function(t,a){5==a.length?(delete this.lineUpData.array[t],this.lineUpData.array[t]=a.concat(),u.instance.setConfigData("LineUp",this.lineUpData)):o.error("saveLineUpArray array.length is invalid: "+a.length)},l.getLineUpArray=function(t){return this.lineUpData||(this.lineUpData=u.instance.getConfigData("LineUp")),this.lineUpData||(this.lineUpData=new d),this.lineUpData.array[t]},l.getHeroCP=function(t){for(var a=[],i=f.instance().frontCfg,e=0;e<i.length;e++)if(i[e].id>=2e3&&i[e].id<3e3){var n=!1;i[e].heroes.forEach((function(a){t.forEach((function(t){a===t&&(n=!0)}))})),n&&a.push(i[e].id)}return a},l.autoWallUpgrade=function(){for(var t=this.wallData.level,a=this.wallData.star,i=f.instance().wallCfg;a>=i[t].cost[0].amount;)a-=i[t].cost[0].amount,t++;this.wallData.level=t,this.wallData.star=a},n(r,[{key:"url",get:function(){return this._url},set:function(t){this._url=t}}]),r}(s))||p),t("HeroData",(function(){a(this,"lv",void 0),a(this,"skillLvMap",void 0),a(this,"exp",0)})));r._RF.pop()}}}));

System.register("chunks:///_virtual/SDKManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(n){"use strict";var e,t,r,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,r=n._decorator},function(n){c=n.Singleton}],execute:function(){var i;t._RF.push({},"8b713Z5hZxJoZJ8+Rk5ei5G","SDKManager",void 0);var o=r.ccclass;n("SDKManager",o("SDKManager")(i=function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t}(c))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIModuleParams.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"8f26evaz+dANK94L4lBtzSP","UIModuleParams",void 0);t("UIModuleParams",{LoginUI:{script:"LoginUI",path:"login/login_ui"},WaitUI:{script:"WaitUI",path:"wait/wait_ui"},MainUI:{script:"MainUI",path:"main/main_ui"},MainBottomLeftUI:{script:"MainBottomLeftUI",path:"main/main_bottom_left_ui"},MainBottomRightUI:{script:"MainBottomRightUI",path:"main/main_bottom_right_ui"},FightUI:{script:"FightUI",path:"fight/fight_ui"},LevelTopUI:{script:"LevelTopUI",path:"level/level_top_ui"},FrontUI:{script:"FrontUI",path:"front/front_ui"},LotteryUI:{script:"LotteryUI",path:"lottery/lottery_ui"},HeroDetailUI:{script:"HeroDetailUI",path:"hero/hero_detail_ui"},ChapterShowUI:{script:"ChapterShowUI",path:"chapter/chapter_show_ui"},LevelRewardUI:{script:"LevelRewardUI",path:"level/level_reward_ui"}});i._RF.pop()}}}));

System.register("chunks:///_virtual/TabLayout.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./TabItem.ts"],(function(t){"use strict";var e,n,r,a,i,o,l,c,s,u,p,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,i=t.defineProperty},function(t){o=t.cclegacy,l=t._decorator,c=t.Node,s=t.EventHandler,u=t.Button,p=t.js,m=t.Component},function(t){f=t.TabItem}],execute:function(){var b,h,d,v,I,y,g,E,L;o._RF.push({},"8fb2bLRp9xLN67fRALvTtHP","TabLayout",void 0);var H=l.ccclass,T=l.property;t("TabLayout",(b=H("TabLayout"),h=T(f),d=T(c),v=T({type:s,tooltip:"选中事件Item事件"}),b((g=e((y=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(a(e),"tabItems",g,a(e)),r(a(e),"content",E,a(e)),i(a(e),"defaultSelectIndex",0),r(a(e),"selectEventHandler",L,a(e)),e}n(e,t);var o=e.prototype;return o.start=function(){for(var t=0;t<this.tabItems.length;t++){var e=this.tabItems[t];if(!e.getComponent(u)){e.addComponent(u);var n=new s;n.component=p.getClassName(this),n.handler="onClickItem",n.target=this.node,n.customEventData=t+"",e.getComponent(u).clickEvents.push(n)}}this.onSelectItem(this.defaultSelectIndex)},o.onSelectItem=function(t){for(var e=0;e<this.tabItems.length;e++)this.tabItems[e].updateItemState(e==t),this.content[e].active=e==t;this.selectEventHandler&&this.selectEventHandler.emit([t,this.selectEventHandler.customEventData])},o.onClickItem=function(t,e){this.onSelectItem(Number(e))},e}(m)).prototype,"tabItems",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=e(y.prototype,"content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(y.prototype,"selectEventHandler",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=y))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/TabItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,a,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Sprite,l=e.SpriteFrame,u=e.Component}],execute:function(){var s,p,m,f,b,y,h,F,S;o._RF.push({},"90474zHw7JI5ZqNdLxsGTeI","TabItem",void 0);var I=a.ccclass,d=a.property;e("TabItem",(s=I("TabItem"),p=d(c),m=d(l),f=d(l),s((h=t((y=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(n(t),"sprite",h,n(t)),i(n(t),"commonSF",F,n(t)),i(n(t),"selectSF",S,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){},o.updateItemState=function(e){this.sprite.spriteFrame=e?this.selectSF:this.commonSF},t}(u)).prototype,"sprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(y.prototype,"commonSF",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(y.prototype,"selectSF",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/LogUtil.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var o,t,e,n,c;return{setters:[function(r){o=r.defineProperty},function(r){t=r.cclegacy,e=r._decorator,n=r.log,c=r.error}],execute:function(){var i,u,l;t._RF.push({},"90d6642F7RCTK61p/wgvNoN","LogUtil",void 0);var a=e.ccclass;r("LogUtil",a("LogUtil")((l=u=function(){function r(){}return r.log=function(r){if(this.debug){for(var o=arguments.length,t=new Array(o>1?o-1:0),e=1;e<o;e++)t[e-1]=arguments[e];n.apply(void 0,[r].concat(t))}},r.error=function(r){if(this.debug){for(var o=arguments.length,t=new Array(o>1?o-1:0),e=1;e<o;e++)t[e-1]=arguments[e];c.apply(void 0,[r].concat(t))}},r}(),o(u,"debug",!0),i=l))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/ToastUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,r,i,a,s,c,l,u,p,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass},function(t){a=t.cclegacy,s=t._decorator,c=t.Label,l=t.UITransform,u=t.Tween,p=t.tween,h=t.v3,f=t.Component}],execute:function(){var d,y,v,C,g;a._RF.push({},"93e04/+KPRPSY1cbOtapXxc","ToastUI",void 0);var x=s.ccclass,m=s.property;t("ToastUI",(d=x("ToastUI"),y=m(c),d((g=e((C=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(r(e),"textContent",g,r(e)),e}n(e,t);var a=e.prototype;return a.start=function(){if(this.textContent){this.textContent.updateRenderData(!0);var t=this.textContent.node.getComponent(l);this.node.getComponent(l).width=Math.ceil(t.width)+65}},a.show=function(t,e){var n=this;t<2&&(t=2),u.stopAllByTarget(this.node),p(this.node).to(.1,{scale:h(1.1,1.1,1.1)}).to(.1,{scale:h(1,1,1)}).delay(t).call((function(){n.node.removeFromParent(),e&&e()})).start()},i(e,[{key:"content",set:function(t){this.textContent&&(this.textContent.string=t||"")}}]),e}(f)).prototype,"textContent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIPriority.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){var r;t("UIPriority",void 0),i._RF.push({},"9435emOf2BP6Kd4E7FcvtSy","UIPriority",void 0),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.UI=1]="UI",t[t.TOP=2]="TOP"}(r||(r=t("UIPriority",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/HeroDetailUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./CommonParam.ts","./GameEvent.ts","./HeroAttributeEnum.ts","./ConfigManager.ts","./GameConfigNameEnum.ts","./UIBase.ts","./ToastUtil.ts","./MainEventEnum.ts","./DataManager.ts","./QualityEnum.ts","./GameUtil.ts","./HeroDetailSkillItem.ts","./GameButton.ts","./GameList.ts","./HeroDetailSkillTipsUI.ts"],(function(e){"use strict";var t,a,i,n,r,l,o,u,s,p,c,g,_,b,f,h,d,m,y,L,v,T,S,M,A,I,k,D,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.defineProperty},function(e){l=e.cclegacy,o=e._decorator,u=e.Label,s=e.Sprite,p=e.RichText,c=e.sp,g=e.Node,_=e.UITransform},function(e){b=e.BundleManager},function(e){f=e.CommonId},function(e){h=e.GameEvent},function(e){d=e.HeroAttributeEnum},function(e){m=e.ConfigManager},function(e){y=e.GameConfigNameEnum},function(e){L=e.UIBase},function(e){v=e.ToastUtil},function(e){T=e.MainEventEnum},function(e){S=e.DataManager},function(e){M=e.QualityEnum},function(e){A=e.GameUtil},function(e){I=e.HeroDetailSkillData},function(e){k=e.GameButton},function(e){D=e.default},function(e){B=e.HeroDetailSkillTipsUI}],execute:function(){var w,E,x,U,z,C,H,N,P,G,R,Q,K,O,q,V,Y,j,F,X,J,W,Z,$,ee,te,ae,ie,ne,re,le,oe,ue,se,pe,ce,ge,_e,be,fe,he,de,me,ye,Le,ve,Te;l._RF.push({},"98829Y0olREGL/EPd2yugsw","HeroDetailUI",void 0);var Se=o.ccclass,Me=o.property;e("HeroDetailUI",(w=Se("HeroDetailUI"),E=Me(D),x=Me(u),U=Me(u),z=Me(u),C=Me(s),H=Me(u),N=Me(p),P=Me(c.Skeleton),G=Me(u),R=Me(u),Q=Me(u),K=Me(u),O=Me(g),q=Me(g),V=Me(u),Y=Me(u),j=Me(s),F=Me(s),X=Me(k),J=Me(k),W=Me(B),Z=Me(_),w((te=t((ee=function(e){function t(){for(var t,a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(n(t),"skillList",te,n(t)),r(n(t),"_skillArray",void 0),i(n(t),"expHasLabel",ae,n(t)),i(n(t),"starHasLabel",ie,n(t)),i(n(t),"lvLabel",ne,n(t)),i(n(t),"qualitySprite",re,n(t)),i(n(t),"starLabel",le,n(t)),i(n(t),"nameRichText",oe,n(t)),i(n(t),"heroSkeleton",ue,n(t)),i(n(t),"rateLabel",se,n(t)),i(n(t),"attackLabel",pe,n(t)),i(n(t),"hpLabel",ce,n(t)),i(n(t),"expLabel",ge,n(t)),i(n(t),"toggleNode",_e,n(t)),i(n(t),"upButtonNode",be,n(t)),i(n(t),"costLabel",fe,n(t)),i(n(t),"upManyLabel",he,n(t)),i(n(t),"leftButtonSprite",de,n(t)),i(n(t),"rightButtonSprite",me,n(t)),i(n(t),"leftButton",ye,n(t)),i(n(t),"rightButton",Le,n(t)),i(n(t),"heroDetailSkillTips",ve,n(t)),i(n(t),"nodeUITransform",Te,n(t)),r(n(t),"_upAmount",1),r(n(t),"_heroCfg",void 0),r(n(t),"_heroData",void 0),r(n(t),"_maxLv",void 0),r(n(t),"_costExp",void 0),r(n(t),"_defaultUpMany",10),r(n(t),"_upMany",void 0),r(n(t),"_idArray",void 0),r(n(t),"_index",void 0),r(n(t),"_dataManager",void 0),r(n(t),"_configManager",void 0),t}a(t,e);var l=t.prototype;return l.show=function(e){var t=this;t._dataManager=S.instance(),t._configManager=m.instance(),t._setId(e),t._maxLv=Number(t._configManager.getMisc(3)),t._idArray=Object.keys(t._dataManager.heroDataMap),t._idArray.sort((function(e,t){return Number(e)-Number(t)})),t._index=t._idArray.indexOf(t._heroCfg.id.toString())},l.start=function(){this._updateView()},l.onEnable=function(){var e=this;h.on(T.UP_SKILL,e._updateSkillList,e),h.on(T.TOUCH_START_DETAIL_SKILL,e._showTips,e),h.on(T.TOUCH_END_DETAIL_SKILL,e._hideTips,e)},l.onDisable=function(){var e=this;h.off(T.UP_SKILL,e._updateSkillList,e),h.off(T.TOUCH_START_DETAIL_SKILL,e._showTips,e),h.off(T.TOUCH_END_DETAIL_SKILL,e._hideTips,e)},l._showTips=function(e,t,a){var i=this.nodeUITransform.convertToNodeSpaceAR(a);i.y+=50,this.heroDetailSkillTips.show(e,t,i)},l._hideTips=function(){this.heroDetailSkillTips.hide()},l._updateView=function(){var e=this;e.heroDetailSkillTips.hide(),e.expHasLabel.string=e._dataManager.getItemAmount(f.EXP)+"";var t=b.instance(),a=e._heroCfg,i=e._getQualityUrl(a.quality);t.setSpriteAtlas(e.qualitySprite,"hero/hero",i),t.setSkeleton(e.heroSkeleton,"hero/"+a.skeleton+"/"+a.skeleton,(function(){e.heroSkeleton.setAnimation(0,"daiji",!0)}));var n=a.quality,r=e._heroData.lv;e.lvLabel.string="Lv:"+r;var l=A.getQualityColor(a.quality);e.nameRichText.string="<color="+l+">"+a.name+"</color>",e.rateLabel.string=A.getAttribute(d.RATE,n,r,a.rate)+"",e.attackLabel.string=A.getAttribute(d.ATTACK,n,r,a.attack)+"",e.hpLabel.string=A.getAttribute(d.HP,n,r,a.hp)+"",e.expLabel.string=a.expOutput+"/秒",e._upMany=e._maxLv-r<e._defaultUpMany?e._maxLv-r:e._defaultUpMany,e._upAmount>e._upMany&&(e._upAmount=e._upMany),0==e._upMany?(e.upButtonNode.active=!1,e.toggleNode.active=!1):(e.upButtonNode.active=!0,e.toggleNode.active=!0,e.upManyLabel.string="升"+e._upMany+"级"),e._updateSkillList(),e._updateExp(),e._updateButton()},l._getQualityUrl=function(e){switch(e){case M.QUALITY1:return"pz_1";case M.QUALITY2:return"pz_2";case M.QUALITY3:return"pz_3";case M.QUALITY4:return"pz_4";case M.QUALITY5:return"pz_5";default:return"pz_1"}},l._updateSkillList=function(){var e=this,t=e._skillArray;t?t.length=0:t=e._skillArray=[];for(var a,i,n,r=Object.keys(e._heroData.skillLvMap),l=r.length,o=e._heroData.skillLvMap,u=e._configManager,s=e._heroCfg.id,p=0;p<l;p++)a=Number(r[p]),(i=u.getConfigArray(y.SKILLLVCFG,{baseId:a,lv:o[a]}))&&i.length>0&&((n=new I).lv=o[a],n.skillLvCfg=i[0],n.heroId=s,t.push(n));e.skillList.setData(t),e.starHasLabel.string=e._dataManager.getItemAmount(e._heroCfg.itemId)+"",e.starLabel.string=A.getHeroTotalSkillLv(e._dataManager.heroDataMap[s].skillLvMap)+""},l.onSelect=function(e,t){var a=this;a._upAmount=Number(t),a._upAmount>1&&(a._upAmount=a._upMany),a._updateExp()},l._updateExp=function(){var e=this;e._costExp=A.getExpCost(e._heroCfg.quality,e._heroData.lv+e._upAmount),e.costLabel.string="x"+e._costExp},l.onUp=function(){var e=this;e._dataManager.getItemAmount(f.EXP)<e._costExp?v.show("数量不足"):(e._dataManager.setItemAmount(f.EXP,-e._costExp),e._dataManager.setHeroLv(e._heroCfg.id,e._upAmount),e._heroData=e._dataManager.heroDataMap[e._heroCfg.id],e._updateView(),h.dispatchEvent(T.UP_LV,!0,e._heroCfg.id))},l._setId=function(e){var t=this;t._heroCfg=t._configManager.heroCfgMap[e],t._heroData=t._dataManager.heroDataMap[t._heroCfg.id]},l.onChange=function(e,t){var a=this,i=Number(t);a._index=a._index+i;var n=Number(a._idArray[a._index]);a._setId(n),a._updateView()},l._updateButton=function(){var e=this;if(1==e._idArray.length)return e.leftButtonSprite.grayscale=!0,e.rightButtonSprite.grayscale=!0,e.leftButton.enableTouch=!1,void(e.rightButton.enableTouch=!1);0==e._index?(e.leftButtonSprite.grayscale=!0,e.rightButtonSprite.grayscale=!1,e.leftButton.enableTouch=!1,e.rightButton.enableTouch=!0):e._index==e._idArray.length-1?(e.leftButtonSprite.grayscale=!1,e.rightButtonSprite.grayscale=!0,e.leftButton.enableTouch=!0,e.rightButton.enableTouch=!1):(e.leftButtonSprite.grayscale=!1,e.rightButtonSprite.grayscale=!1,e.leftButton.enableTouch=!0,e.rightButton.enableTouch=!0)},t}(L)).prototype,"skillList",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(ee.prototype,"expHasLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(ee.prototype,"starHasLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(ee.prototype,"lvLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(ee.prototype,"qualitySprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(ee.prototype,"starLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(ee.prototype,"nameRichText",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(ee.prototype,"heroSkeleton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(ee.prototype,"rateLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(ee.prototype,"attackLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(ee.prototype,"hpLabel",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(ee.prototype,"expLabel",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=t(ee.prototype,"toggleNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(ee.prototype,"upButtonNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(ee.prototype,"costLabel",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(ee.prototype,"upManyLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(ee.prototype,"leftButtonSprite",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(ee.prototype,"rightButtonSprite",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=t(ee.prototype,"leftButton",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=t(ee.prototype,"rightButton",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(ee.prototype,"heroDetailSkillTips",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=t(ee.prototype,"nodeUITransform",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=ee))||$));l._RF.pop()}}}));

System.register("chunks:///_virtual/LotteryUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./ConfigManager.ts","./UIBase.ts","./GameUtil.ts"],(function(e){"use strict";var t,a,n,o,r,l,i,s,c,d,u,g;return{setters:[function(e){t=e.inheritsLoose,a=e.defineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.sp,i=e.Label,s=e.color},function(e){c=e.BundleManager},function(e){d=e.ConfigManager},function(e){u=e.UIBase},function(e){g=e.GameUtil}],execute:function(){var h;o._RF.push({},"99113EJoNtN0bBxkcxOpafH","LotteryUI",void 0);var m=r.ccclass;e("LotteryUI",m("LotteryUI")(h=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,a(n(t),"maskAlpha",230),a(n(t),"avatar",null),a(n(t),"nameLabel",null),a(n(t),"starLabel",null),a(n(t),"isHasNode",null),a(n(t),"addStarLabel",null),t}t(o,e);var r=o.prototype;return r.onLoad=function(){var e=this;e.avatar=e.node.getChildByName("avatar").getComponent(l.Skeleton),e.nameLabel=e.node.getChildByName("name_label").getComponent(i),e.starLabel=e.node.getChildByName("star_label").getComponent(i),e.isHasNode=e.node.getChildByName("is_has"),e.addStarLabel=e.isHasNode.getChildByName("add_star_label").getComponent(i)},r.show=function(e){console.log(e);var t=this,a=d.instance().heroCfgMap[e.heroId];a?(t.isHasNode.active=e.isHasHero,t.nameLabel.string=a.name,t.nameLabel.color=s(g.getQualityColor(a.quality)),t.starLabel.string=g.getHeroTotalSkillLvByHeroId(e.heroId).toString(),t.addStarLabel.string=e.chipAmount.toString(),c.instance().setSkeleton(t.avatar,"hero/"+a.skeleton+"/"+a.skeleton,(function(){t.avatar.setAnimation(0,"daiji",!0)}))):alert("没有找到heroId: "+e.heroId)},r.onGetButton=function(){this.hide()},o}(u))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(o){"use strict";var e,t,a,n,r,p,l,i;return{setters:[function(o){e=o.inheritsLoose,t=o.defineProperty,a=o.assertThisInitialized},function(o){n=o.cclegacy,r=o._decorator,p=o.instantiate,l=o.NodePool},function(o){i=o.Singleton}],execute:function(){var s;n._RF.push({},"993b9Bq3RRJc5EgxytJCXrU","PoolManager",void 0);var c=r.ccclass;r.property,o("PoolManager",c("PoolManager")(s=function(o){function n(){for(var e,n=arguments.length,r=new Array(n),p=0;p<n;p++)r[p]=arguments[p];return e=o.call.apply(o,[this].concat(r))||this,t(a(e),"poolMap",new Map),t(a(e),"prefabMap",new Map),e}e(n,o);var r=n.prototype;return r.getNode=function(o){var e,t,a=this,n=o.data.name;return a.prefabMap.set(n,o),a.poolMap.has(n)?e=(t=a.poolMap.get(n)).size()>0?t.get():p(o):(t=new l,a.poolMap.set(n,t),e=p(o)),e},r.putNode=function(o){var e=this,t=o.name,a=null;e.poolMap.has(t)?a=e.poolMap.get(t):(a=new l,e.poolMap.set(t,a)),a.put(o)},r.clearPool=function(o){this.poolMap.has(o)&&this.poolMap.get(o).clear()},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroHpItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./HeroComponent.ts"],(function(t){"use strict";var e,r,i,n,a,o,p,s,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,p=t.ProgressBar,s=t.Sprite},function(t){c=t.BundleManager},function(t){l=t.HeroComponent}],execute:function(){var u,f,B,g,h,b,H,y,m,S,v;a._RF.push({},"9b349+CXtNOu7rV58GW/C2w","HeroHpItem",void 0);var d=o.ccclass,w=o.property;t("HeroHpItem",(u=d("HeroHpItem"),f=w(p),B=w(p),g=w(s),h=w(s),u((y=e((H=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(n(e),"hpBar",y,n(e)),i(n(e),"actionBar",m,n(e)),i(n(e),"actionBarValueSprite",S,n(e)),i(n(e),"actionBarBgSprite",v,n(e)),e}r(e,t);var a=e.prototype;return a.resetBar=function(){this.setHp(1),this.setAction(1)},a.setHpType=function(t){var e,r,i=this;t?(e="xuet1",r="xuet2"):(e="xuet3",r="xuet4"),c.instance().setSpriteAtlas(i.actionBarValueSprite,"fight/fight",r),c.instance().setSpriteAtlas(i.actionBarBgSprite,"fight/fight",e),i.resetBar()},a.setHp=function(t){this.hpBar.progress=t},a.setAction=function(t){this.actionBar.progress=t},e}(l)).prototype,"hpBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=e(H.prototype,"actionBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(H.prototype,"actionBarValueSprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(H.prototype,"actionBarBgSprite",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=H))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameUtil.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./HeroAttributeEnum.ts","./DataManager.ts","./QualityEnum.ts"],(function(t){"use strict";var e,n,r,u,a,c,i,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,u=t.v3,a=t.tween},function(t){c=t.Singleton},function(t){i=t.HeroAttributeEnum},function(t){o=t.DataManager},function(t){s=t.QualityEnum}],execute:function(){var l;n._RF.push({},"9d4c9lEYHhIXpfpbXWtjdTj","GameUtil",void 0);var f=r.ccclass;t("GameUtil",f("GameUtil")(l=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.bezierTo=function(t,e,n,r,c,i){i=i||Object.create(null);return i.onUpdate=function(e,a){var i,o,s,l,f,A;t.position=(s=r,l=c,f=(1-(i=a))*(1-i)*(o=n).x+2*i*(1-i)*s.x+i*i*l.x,A=(1-i)*(1-i)*o.y+2*i*(1-i)*s.y+i*i*l.y,u(f,A,0))},a(t).to(e,{},i)},n.getPercent=function(t){return"string"==typeof t&&(t=Number(t)),t/10},n.getExpCost=function(t,e){return e+10},n.getAttribute=function(t,e,n,r){switch(t){case i.MAX_HP:case i.HP:case i.ATTACK:case i.RATE:case i.MOVE:case i.SCALE:case i.CRIT_CHANCE:case i.CRIT_DAMAGE:case i.DODGE_CHANCE:case i.DAMAGE_REDUCTION:return r;default:return null}},n.getQualityColor=function(t){switch(t){case s.QUALITY1:return"#d2d2d2";case s.QUALITY2:return"#95ea4d";case s.QUALITY3:return"#4da0d8";case s.QUALITY4:return"#b179ff";case s.QUALITY5:return"#ffb621";default:return"#ffffff"}},n.getHeroTotalSkillLv=function(t){for(var e=Object.keys(t),n=e.length,r=0,u=0;u<n;u++)t[e[u]]&&(r+=t[e[u]]);return r},n.getHeroTotalSkillLvByHeroId=function(t){return n.getHeroTotalSkillLv(o.instance().heroDataMap[t].skillLvMap)},n.getExpAdd=function(t,e,n){return t+e+n},n}(c))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroStateEnum.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var r;t("HeroStateEnum",void 0),e._RF.push({},"a023f3C01JKX4eQRJDDqVgr","HeroStateEnum",void 0),function(t){t.RESET="reset",t.SEARCH="search",t.STAND="stand",t.ACTION="action",t.MOVE="move",t.ATTACK="attack",t.DEATH="death",t.SKILL="skill",t.START="start"}(r||(r=t("HeroStateEnum",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/LevelTopUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./GameEvent.ts","./ConfigManager.ts","./UIBase.ts","./MainEventEnum.ts","./DataManager.ts","./LevelTopItem.ts"],(function(e){"use strict";var t,n,a,r,i,l,o,s,p,u,c,v,f,g,d,h,b,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.defineProperty,r=e.assertThisInitialized,i=e.initializerDefineProperty},function(e){l=e.cclegacy,o=e._decorator,s=e.Prefab,p=e.Node,u=e.Sprite,c=e.instantiate},function(e){v=e.BundleManager},function(e){f=e.GameEvent},function(e){g=e.ConfigManager},function(e){d=e.UIBase},function(e){h=e.MainEventEnum},function(e){b=e.DataManager},function(e){M=e.LevelTopItem}],execute:function(){var m,y,I,T,_,L,E,B,S;l._RF.push({},"a0396O3mUFMr6uZMElufB78","LevelTopUI",void 0);var A=o.ccclass,C=o.property;e("LevelTopUI",(m=A("LevelTopUI"),y=C(s),I=C(p),T=C(u),m((E=t((L=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,a(r(t),"hasMask",!1),i(r(t),"levelTopItemPrefab",E,r(t)),i(r(t),"levelNode",B,r(t)),i(r(t),"selectSprite",S,r(t)),a(r(t),"_levelTopItemArray",[]),a(r(t),"_bundleManager",void 0),t}n(t,e);var l=t.prototype;return l.start=function(){var e,t,n,a=this;f.on(h.CHANG_LEVEL,a.changeLevel,a);var r,i,l,o=b.instance().level,s=a.levelNode,p=a._levelTopItemArray,u=a.levelTopItemPrefab;a._bundleManager=v.instance();for(var d=0;d<5;d++)t=(n=c(u)).getComponent(M),e=o+(d-2),i=g.instance().levelCfgMap[e],2==d&&(l=i.isBoss?"gk4":"gk3",a._bundleManager.setSpriteAtlas(a.selectSprite,"fight/fight",l)),r=1-.1*Math.abs(d-2),t.updateView(i,r),s.addChild(n),p.push(t)},l.changeLevel=function(){for(var e,t,n,a,r=this,i=r._levelTopItemArray,l=i.length,o=b.instance().level,s=0;s<l;s++)e=o+(s-2),n=g.instance().levelCfgMap[e],2==s&&(a=n.isBoss?"gk4":"gk3",r._bundleManager.setSpriteAtlas(r.selectSprite,"fight/fight",a)),t=1-.1*Math.abs(s-2),i[s].updateView(n,t)},t}(d)).prototype,"levelTopItemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(L.prototype,"levelNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(L.prototype,"selectSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=L))||_));l._RF.pop()}}}));

System.register("chunks:///_virtual/SkillTargetEnum.ts",["cc"],(function(t){"use strict";var E;return{setters:[function(t){E=t.cclegacy}],execute:function(){var e;t("SkillTargetEnum",void 0),E._RF.push({},"a06ceeWRs1LgrYSH494xqg8","SkillTargetEnum",void 0),function(t){t[t.SELF=1]="SELF",t[t.TARGET=2]="TARGET",t[t.SELF_SIDE=3]="SELF_SIDE",t[t.TARGET_SIDE=4]="TARGET_SIDE",t[t.HANDLER=5]="HANDLER"}(e||(e=t("SkillTargetEnum",{}))),E._RF.pop()}}}));

System.register("chunks:///_virtual/LineUpItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ConfigManager.ts","./DataManager.ts","./GameUtil.ts","./GameListItemRender.ts","./GameLabel.ts","./GameSprite.ts"],(function(t){"use strict";var e,n,a,i,r,o,c,l,s,f,u,d;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,o=t.RichText},function(t){c=t.ConfigManager},function(t){l=t.DataManager},function(t){s=t.GameUtil},function(t){f=t.default},function(t){u=t.GameLabel},function(t){d=t.GameSprite}],execute:function(){var p;i._RF.push({},"a391aR4KHJGU5XIXlffYJCS","LineUpItem",void 0);var g=r.ccclass;t("LineUpItem",g("LineUpItem")(p=function(t){function i(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(a(e),"data",void 0),n(a(e),"_titleLabel",null),n(a(e),"_richText",null),n(a(e),"_barSprite",null),n(a(e),"_bgSprite",null),e}e(i,t);var r=i.prototype;return r.onLoad=function(){var t=this;t._titleLabel=t.node.getChildByName("title").getComponent(u),t._richText=t.node.getChildByName("text").getComponent(o),t._barSprite=t.node.getChildByName("bar").getComponent(d),t._bgSprite=t.node.getComponent(d)},r.dataChanged=function(){var t=this,e="",n=l.instance().fightSlotArray,a=!0,i="#7b7b7b",r="#f0b259";t.data.ids.forEach((function(t){var o=c.instance().heroCfgMap[t].name,l=i;n.find((function(e){return e===t}))?l=r:a=!1,e+="<color="+l+">"+o+" </color>"}));var o=a?r:i;t._barSprite.isGray=!a,t._titleLabel.isGray=!a,t._bgSprite.isGray=!a;var f="<color="+o+">"+t.data.title+": </color>"+e;t._richText.string=f;var u=c.instance().effectCfgMap[t.data.effectId];if(u){var d=u.value.split("|"),p=s.getPercent(d[3]);t._titleLabel.string=u.desc+"+"+p+"%"}else alert("not find id :"+t.data.effectId+" by effectCfg!")},i}(f))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameLabel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts"],(function(r){"use strict";var e,o,t,i,a,n,l,s,c,u,p,y;return{setters:[function(r){e=r.applyDecoratedDescriptor,o=r.inheritsLoose,t=r.defineProperty,i=r.assertThisInitialized,a=r.initializerDefineProperty,n=r.createClass},function(r){l=r.cclegacy,s=r._decorator,c=r.CCBoolean,u=r.Color,p=r.Label},function(r){y=r.LogUtil}],execute:function(){var f,g,h,b,C,m,G,d;l._RF.push({},"a4c55u8ozZFnbmUKTTscMq9","GameLabel",void 0);var L=s.ccclass,_=s.property;r("GameLabel",(f=L("GameLabel"),g=_(c),h=_(u),b=_(u),f((e((m=function(r){function e(){for(var e,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return e=r.call.apply(r,[this].concat(n))||this,t(i(e),"_isGray",!1),a(i(e),"grayColor",G,i(e)),a(i(e),"normalColor",d,i(e)),e}return o(e,r),e.prototype.updateColor=function(){this.grayColor?this.color=this._isGray?this.grayColor:this.normalColor:y.error("grayColor is invalid!")},n(e,[{key:"isGray",get:function(){return this._isGray},set:function(r){this._isGray=r,this.updateColor()}}]),e}(p)).prototype,"isGray",[g],Object.getOwnPropertyDescriptor(m.prototype,"isGray"),m.prototype),G=e(m.prototype,"grayColor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),d=e(m.prototype,"normalColor",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),C=m))||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/HeroSkill.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillEffectData.ts","./HeroStateEnum.ts","./HeroState.ts"],(function(e){"use strict";var t,a,n,i,r,l,o;return{setters:[function(e){t=e.inheritsLoose,a=e.defineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy},function(e){r=e.SkillEffectData},function(e){l=e.HeroStateEnum},function(e){o=e.HeroState}],execute:function(){i._RF.push({},"a72c1OWuilHz7GHSTWmzdJ4","HeroSkill",void 0);e("HeroSkill",function(e){function i(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,a(n(t),"_heroSkillBase",void 0),t}t(i,e);var o=i.prototype;return o.onEnter=function(e){var t=this;t._heroSkillBase=e;var a=t._heroSkillBase.skillCfg;a.actionName?t._stateMachine.heroItem.playAction(a.actionName,!1,(function(){t._stateMachine.heroBase.target?t._stateMachine.changeState(l.ACTION):t._stateMachine.changeState(l.SEARCH)}),(function(){t._startSkill()})):(t._startSkill(),t._stateMachine.heroBase.target?t._stateMachine.changeState(l.ACTION):t._stateMachine.changeState(l.SEARCH))},o._startSkill=function(){var e=this,t=new r;t.handleHeroBase=e._stateMachine.heroBase;var a=e._heroSkillBase.handleEffect(t);e._handleSkill(a,e._heroSkillBase,t)},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameSprite.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,t,i,a,n,o,p,s,c,l,u;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,i=r.defineProperty,a=r.assertThisInitialized,n=r.initializerDefineProperty,o=r.createClass},function(r){p=r.cclegacy,s=r._decorator,c=r.CCBoolean,l=r.SpriteFrame,u=r.Sprite}],execute:function(){var y,m,h,S,F,f;p._RF.push({},"b08e1ie2YZEs60nHUJpQXr+","GameSprite",void 0);var _=s.ccclass,g=s.property;r("GameSprite",(y=_("GameSprite"),m=g(c),h=g({type:l}),y((e((F=function(r){function e(){for(var e,t=arguments.length,o=new Array(t),p=0;p<t;p++)o[p]=arguments[p];return e=r.call.apply(r,[this].concat(o))||this,i(a(e),"_isGray",!1),n(a(e),"graySpriteFrame",f,a(e)),i(a(e),"_normalSpriteFrame",null),e}t(e,r);var p=e.prototype;return p.onLoad=function(){this._normalSpriteFrame=this.spriteFrame},p.updateSpriteFrame=function(){var r;this.graySpriteFrame&&(this._normalSpriteFrame=null!==(r=this._normalSpriteFrame)&&void 0!==r?r:this.spriteFrame,this.spriteFrame=this._isGray?this.graySpriteFrame:this._normalSpriteFrame)},o(e,[{key:"isGray",get:function(){return this._isGray},set:function(r){this._isGray=r,this.updateSpriteFrame()}}]),e}(u)).prototype,"isGray",[m],Object.getOwnPropertyDescriptor(F.prototype,"isGray"),F.prototype),f=e(F.prototype,"graySpriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=F))||S));p._RF.pop()}}}));

System.register("chunks:///_virtual/ActiveTypeEnum.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var c;e("ActiveTypeEnum",void 0),t._RF.push({},"b3fcfRSzfpKWZQgJvAJrL/Q","ActiveTypeEnum",void 0),function(e){e[e.ACTIVE=1]="ACTIVE",e[e.PASSIVE=2]="PASSIVE"}(c||(c=e("ActiveTypeEnum",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/HeroMove.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FightEventEnum.ts","./GameEvent.ts","./CommonUtil.ts","./HeroStateEnum.ts","./HeroState.ts"],(function(t){"use strict";var e,n,o,i,s,a,r,c,f,_;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t.v3},function(t){a=t.FightEventEnum},function(t){r=t.GameEvent},function(t){c=t.CommonUtil},function(t){f=t.HeroStateEnum},function(t){_=t.HeroState}],execute:function(){i._RF.push({},"b7149IROmJFerZ1iHqsY9Ps","HeroMove",void 0);t("HeroMove",function(t){function i(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(o(e),"_finalPos",void 0),n(o(e),"_isClose",!1),e}e(i,t);var _=i.prototype;return _.onEnter=function(){t.prototype.onEnter.call(this);var e=this;e._resetPosOffset(),e._startMove(e._stateMachine.heroBase.target.pos),e._isClose=!1,e._stateMachine.heroItem.setRigidBodyMove()},_.onStateUpdate=function(t){var e=this,n=e._stateMachine.heroBase.target,o=e._isClose?e._finalPos:n.pos,i=e._stateMachine.heroBase.pos,s=c.getDistance(o.x,o.y,i.x,i.y);if(e._isClose){if(o.strictEquals(i))return e._stateMachine.changeState(f.ACTION),void r.dispatchEvent(a.MOVE,e._stateMachine.heroItem);if(s<e._moveDifference)return i.x=o.x,void(i.y=o.y)}else if(s<e._attackDistance){e._resetPosOffset(),e._isClose=!0;var _=o.x>i.x?180:0,h=c.angleToRadian(_),u=e._attackDistance/2,l=Math.cos(h)*u,v=Math.sin(h)*u;return void e._setFinalPos((o.x+i.x)/2+l,(o.y+i.y)/2+v)}e._onMove(o,n.isStatic)},_._setFinalPos=function(t,e){var n=this;n._finalPos||(n._finalPos=s()),n._finalPos.x=t,n._finalPos.y=e},_._addEvent=function(){r.on(a.ADD_FIGHT,this._onAddFight,this)},_._removeEvent=function(){r.off(a.ADD_FIGHT,this._onAddFight,this)},i}(_));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameList.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameListItemRender.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,l,d,p,c,m,g,h,u,f,w,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.defineProperty},function(t){r=t.cclegacy,s=t._decorator,l=t.Prefab,d=t.Enum,p=t.CCInteger,c=t.UITransform,m=t.ScrollView,g=t.UIOpacity,h=t.instantiate,u=t.Vec2,f=t.isValid,w=t.Component},function(t){y=t.default}],execute:function(){var _,C,I,L,x,V,b,T,P,v,U,D,H,z,R,S,G,X,Y,A,N,W,M;t({ListType:void 0,StartAxisType:void 0}),r._RF.push({},"b7a89lnqlZLIqa3pud3RySN","GameList",void 0);var F,O,k=s.ccclass,q=s.property;!function(t){t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t[t.Grid=3]="Grid"}(F||(F=t("ListType",{}))),function(t){t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"}(O||(O=t("StartAxisType",{})));t("default",(_=k("GameList"),C=q({type:l,tooltip:"列表项"}),I=q({type:d(F),tooltip:"排列方式"}),L=q({type:d(O),tooltip:"网格布局中的方向",visible:function(){return this.type==F.Grid}}),x=q({type:p,tooltip:"列表项X间隔",visible:function(){return this.type==F.Horizontal||this.type==F.Grid}}),V=q({type:p,tooltip:"列表项Y间隔",visible:function(){return this.type==F.Vertical||this.type==F.Grid}}),b=q({type:p,tooltip:"上间距",visible:function(){return this.type==F.Vertical||this.type==F.Grid}}),T=q({type:p,tooltip:"下间距",visible:function(){return this.type==F.Vertical||this.type==F.Grid}}),P=q({type:p,tooltip:"左间距",visible:function(){return this.type==F.Horizontal||this.type==F.Grid}}),v=q(p),U=q({type:p,tooltip:"右间距",visible:function(){return this.type==F.Horizontal||this.type==F.Grid}}),_((z=e((H=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(o(e),"itemRender",z,o(e)),n(o(e),"type",R,o(e)),n(o(e),"startAxis",S,o(e)),n(o(e),"spaceX",G,o(e)),n(o(e),"spaceY",X,o(e)),n(o(e),"padding_top",Y,o(e)),n(o(e),"padding_bottom",A,o(e)),n(o(e),"padding_left",N,o(e)),n(o(e),"_padding",W,o(e)),n(o(e),"padding_right",M,o(e)),a(o(e),"scrollView",null),a(o(e),"content",null),a(o(e),"itemDataList",[]),a(o(e),"spawnCount",0),a(o(e),"itemList",[]),a(o(e),"itemHeight",0),a(o(e),"itemWidth",0),a(o(e),"itemPool",[]),a(o(e),"halfScrollView",0),a(o(e),"lastContentPosX",0),a(o(e),"lastContentPosY",0),a(o(e),"gridRow",0),a(o(e),"gridCol",0),a(o(e),"updateTimer",0),a(o(e),"updateInterval",.1),a(o(e),"bScrolling",!1),a(o(e),"updateFun",(function(){})),a(o(e),"_contentUITransform",void 0),a(o(e),"_contentParentUITransform",void 0),a(o(e),"_scrollViewNodeUITransform",void 0),e}i(e,t);var r=e.prototype;return r.onLoad=function(){var t=this,e=t.itemRender.data.getComponent(c);t.itemHeight=e.height,t.itemWidth=e.width,t.scrollView=t.node.getComponent(m),t._scrollViewNodeUITransform=t.scrollView.node.getComponent(c),t.content=t.scrollView.content,t._contentUITransform=t.content.getComponent(c),t._contentParentUITransform=t.content.parent.getComponent(c),t._contentUITransform.anchorX=0,t._contentUITransform.anchorY=1,t.content.removeAllChildren(),t.scrollView.node.on("scrolling",t.onScrolling,t)},r.setData=function(t){this.itemDataList=t.slice(),this.updateContent()},r.countListParam=function(){var t=this,e=t.itemDataList.length;t.type==F.Vertical?(t.scrollView.horizontal=!1,t.scrollView.vertical=!0,t._contentUITransform.width=t._contentParentUITransform.width,t._contentUITransform.height=e*t.itemHeight+(e-1)*t.spaceY+t.padding_top+t.padding_bottom,t.spawnCount=Math.round(t._scrollViewNodeUITransform.height/(t.itemHeight+t.spaceY))+2,t.halfScrollView=t._scrollViewNodeUITransform.height/2+t.itemHeight/2+t.spaceY,t.updateFun=t.updateV):t.type==F.Horizontal?(t.scrollView.horizontal=!0,t.scrollView.vertical=!1,t._contentUITransform.width=e*t.itemWidth+(e-1)*t.spaceX+t.padding_left+t.padding_right,t._contentUITransform.height=t._contentParentUITransform.height,t.spawnCount=Math.round(t._scrollViewNodeUITransform.width/(t.itemWidth+t.spaceX))+2,t.halfScrollView=t._scrollViewNodeUITransform.width/2+t.itemWidth/2+this.spaceX,t.updateFun=t.updateH):t.type==F.Grid&&(t.startAxis==O.Vertical?(t.scrollView.horizontal=!1,t.scrollView.vertical=!0,t._contentUITransform.width=t._contentParentUITransform.width,t.padding_left+t.padding_right+t.itemWidth+t.spaceX>t._contentUITransform.width&&(t.padding_left=0,t.padding_right=0,console.error("padding_left或padding_right过大")),t.gridCol=Math.floor((t._contentUITransform.width-t.padding_left-t.padding_right)/(t.itemWidth+t.spaceX)),t.gridRow=Math.ceil(e/t.gridCol),t._contentUITransform.height=t.gridRow*t.itemHeight+(t.gridRow-1)*t.spaceY+t.padding_top+t.padding_bottom,t.spawnCount=Math.round(t._scrollViewNodeUITransform.height/(t.itemHeight+t.spaceY))*t.gridCol+2*t.gridCol,t.halfScrollView=t._scrollViewNodeUITransform.height/2+t.itemHeight/2+t.spaceY,t.updateFun=t.updateGrid_V):t.startAxis==O.Horizontal&&(t.scrollView.horizontal=!0,t.scrollView.vertical=!1,t._contentUITransform.height=t._contentParentUITransform.height,t.padding_top+t.padding_bottom+t.itemHeight+t.spaceY>t._contentUITransform.height&&(t.padding_top=0,t.padding_bottom=0,console.error("padding_top或padding_bottom过大")),t.gridRow=Math.floor((t._contentUITransform.height-t.padding_top-t.padding_bottom)/(t.itemHeight+t.spaceY)),t.gridCol=Math.ceil(e/t.gridRow),t._contentUITransform.width=t.gridCol*t.itemWidth+(t.gridCol-1)*t.spaceX+t.padding_left+t.padding_right,t.spawnCount=Math.round(t._scrollViewNodeUITransform.width/(t.itemWidth+t.spaceX))*t.gridRow+2*t.gridRow,t.halfScrollView=t._scrollViewNodeUITransform.width/2+t.itemWidth/2+t.spaceX,t.updateFun=t.updateGrid_H))},r.createList=function(t,e){var i,n,o,a,r,s,l=this;l.itemDataList.length>l.spawnCount&&t+l.spawnCount-1>=l.itemDataList.length?(t=l.itemDataList.length-l.spawnCount,e=l.scrollView.getMaxScrollOffset()):l.itemDataList.length<=l.spawnCount&&(t=0);for(var d=0;d<l.spawnCount;d++)d+t<l.itemDataList.length?(null==l.itemList[d]?(i=l.getItem(),l.itemList.push(i),i.parent=l.content):i=l.itemList[d],n=i.getComponent(c),o=i.getComponent(g),(a=i.getComponent(y)).itemIndex=d+t,a.data=this.itemDataList[d+t],a.dataChanged(),l.type==F.Vertical?i.setPosition(l._contentUITransform.width/2,-n.height*(.5+d+t)-l.spaceY*(d+t)-l.padding_top):l.type==F.Horizontal?i.setPosition(n.width*(.5+d+t)+l.spaceX*(d+t)+l.padding_left,-l._contentUITransform.height/2):l.type==F.Grid&&(l.startAxis==O.Vertical?(r=Math.floor((d+t)/l.gridCol),s=(d+t)%l.gridCol,i.setPosition(n.width*(.5+s)+l.spaceX*s+l.padding_left,-n.height*(.5+r)-l.spaceY*r-l.padding_top),o.opacity=255):l.startAxis==O.Horizontal&&(r=(d+t)%l.gridRow,s=Math.floor((d+t)/l.gridRow),i.setPosition(n.width*(.5+s)+l.spaceX*s+l.padding_left,-n.height*(.5+r)-l.spaceY*r-l.padding_top),o.opacity=255))):l.itemList.length>l.itemDataList.length-t&&((i=l.itemList.pop()).removeFromParent(),l.itemPool.push(i));l.scrollView.scrollToOffset(e)},r.getItem=function(){var t=this;return 0==t.itemPool.length?h(t.itemRender):t.itemPool.pop()},r.update=function(t){var e=this;0!=e.bScrolling&&(e.updateTimer+=t,e.updateTimer<e.updateInterval||(e.updateTimer=0,e.bScrolling=!1,e.updateFun()))},r.onScrolling=function(){this.bScrolling=!0},r.updateV=function(){for(var t,e,i,n,o,a=this,r=a.itemList,s=a.halfScrollView,l=a.scrollView.content.position,d=l.y>a.lastContentPosY,p=(a.itemHeight+a.spaceY)*r.length,c=0;c<r.length;c++)e=(t=r[c]).getPosition(),o=a.getPositionInView(t),d?o.y>s&&e.y-p-a.padding_bottom>-a._contentUITransform.height&&(n=(i=t.getComponent(y)).itemIndex+r.length,i.itemIndex=n,i.data=a.itemDataList[n],i.dataChanged(),e.y=e.y-p):o.y<-s&&e.y+p+a.padding_top<0&&(n=(i=t.getComponent(y)).itemIndex-r.length,i.itemIndex=n,i.data=a.itemDataList[n],i.dataChanged(),e.y=e.y+p),t.setPosition(e);a.lastContentPosY=l.y},r.updateH=function(){for(var t,e,i,n,o,a=this,r=a.itemList,s=a.halfScrollView,l=a.scrollView.content.position,d=l.x>a.lastContentPosX,p=(a.itemWidth+a.spaceX)*r.length,c=0;c<r.length;c++)e=(t=r[c]).getPosition(),o=a.getPositionInView(t),d?o.x>s&&e.x-p-a.padding_left>0&&(n=(i=t.getComponent(y)).itemIndex-r.length,i.itemIndex=n,i.data=a.itemDataList[n],i.dataChanged(),e.x=e.x-p):o.x<-s&&e.x+p+a.padding_right<a._contentUITransform.width&&(n=(i=t.getComponent(y)).itemIndex+r.length,i.itemIndex=n,i.data=a.itemDataList[n],i.dataChanged(),e.x=e.x+p),t.setPosition(e);a.lastContentPosX=l.x},r.updateGrid_V=function(){for(var t,e,i,n,o,a,r=this,s=r.itemList,l=r.halfScrollView,d=r.scrollView.content.position,p=d.y>r.lastContentPosY,c=(r.itemHeight+r.spaceY)*(r.spawnCount/r.gridCol),m=0;m<s.length;m++)e=(t=s[m]).getPosition(),i=t.getComponent(g),a=r.getPositionInView(t),p?a.y>l&&e.y-c-r.padding_bottom>-r._contentUITransform.height&&(o=(n=t.getComponent(y)).itemIndex+r.spawnCount/r.gridCol*r.gridCol,null!=r.itemDataList[o]?(e.y=e.y-c,n.itemIndex=o,n.data=r.itemDataList[o],n.dataChanged(),i.opacity=255):(e.y=e.y-c,n.itemIndex=o,i.opacity=0)):a.y<-l&&e.y+c+r.padding_top<0&&(o=(n=t.getComponent(y)).itemIndex-r.spawnCount/r.gridCol*r.gridCol,null!=r.itemDataList[o]?(e.y=e.y+c,n.itemIndex=o,n.data=r.itemDataList[o],n.dataChanged(),i.opacity=255):(e.y=e.y+c,n.itemIndex=o,i.opacity=0)),t.setPosition(e);r.lastContentPosY=d.y},r.updateGrid_H=function(){for(var t,e,i,n,o,a,r=this,s=r.itemList,l=r.halfScrollView,d=r.scrollView.content.position,p=d.x>r.lastContentPosX,c=(r.itemWidth+r.spaceX)*(r.spawnCount/r.gridRow),m=0;m<s.length;m++)e=(t=s[m]).getPosition(),i=t.getComponent(g),a=r.getPositionInView(t),p?a.x>l&&e.x-c-r.padding_left>0&&(o=(n=t.getComponent(y)).itemIndex-r.spawnCount/r.gridRow*r.gridRow,null!=r.itemDataList[o]?(e.x=e.x-c,n.itemIndex=o,n.data=r.itemDataList[o],n.dataChanged(),i.opacity=255):(e.x=e.x-c,n.itemIndex=o,i.opacity=0)):a.x<-l&&e.x+c+r.padding_right<r._contentUITransform.width&&(o=(n=t.getComponent(y)).itemIndex+r.spawnCount/r.gridRow*r.gridRow,null!=r.itemDataList[o]?(e.x=e.x+c,n.itemIndex=o,n.data=r.itemDataList[o],n.dataChanged(),i.opacity=255):(e.x=e.x+c,n.itemIndex=o,i.opacity=0)),t.setPosition(e);r.lastContentPosX=d.x},r.getPositionInView=function(t){var e=t.getParent().getComponent(c).convertToWorldSpaceAR(t.position);return this._scrollViewNodeUITransform.convertToNodeSpaceAR(e)},r.getListData=function(){return this.itemDataList},r.addItem=function(t){this.itemDataList.push(t),this.updateContent()},r.addItemAt=function(t,e){var i=this;null==i.itemDataList[t]&&i.itemDataList.length!=t||(i.itemDataList.splice(t,1,e),i.updateContent())},r.deleteItem=function(t){var e=this;null!=e.itemDataList[t]&&(e.itemDataList.splice(t,1),e.updateContent())},r.changeItem=function(t,e){var i=this;if(null!=i.itemDataList[t]){i.itemDataList[t]=e;for(var n,o=i.itemList.length,a=0;a<o;a++)if((n=i.itemList[a].getComponent(y)).itemIndex==t){n.dataChanged();break}}},r.updateContent=function(){var t=this;if(0==t.itemList.length)t.countListParam(),t.createList(0,new u(0,0));else{t.type==F.Vertical?t.itemList.sort((function(t,e){return e.y-t.y})):t.type==F.Horizontal?t.itemList.sort((function(t,e){return t.x-e.x})):t.type==F.Grid&&(t.startAxis==O.Vertical?(t.itemList.sort((function(t,e){return t.x-e.x})),t.itemList.sort((function(t,e){return e.y-t.y}))):t.startAxis==O.Horizontal&&(t.itemList.sort((function(t,e){return e.y-t.y})),t.itemList.sort((function(t,e){return t.x-e.x})))),t.countListParam();var e=t.itemList[0].getComponent(y).itemIndex;t.type==F.Grid&&t.startAxis==O.Vertical?e+=(e+t.spawnCount)%t.gridCol:t.type==F.Grid&&t.startAxis==O.Horizontal&&(e+=(e+t.spawnCount)%t.gridRow);var i=t.scrollView.getScrollOffset();i.x=-i.x,t.createList(e,i)}},r.onDestroy=function(){for(var t=this,e=t.itemList.length,i=0;i<e;i++)f(t.itemList[i],!0)&&t.itemList[i].destroy();t.itemList.length=0,e=t.itemPool.length;for(var n=0;n<e;n++)f(t.itemPool[n],!0)&&t.itemPool[n].destroy();t.itemPool.length=0,t.itemDataList.length=0},e}(w)).prototype,"itemRender",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(H.prototype,"type",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.Vertical}}),S=e(H.prototype,"startAxis",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.Horizontal}}),G=e(H.prototype,"spaceX",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=e(H.prototype,"spaceY",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=e(H.prototype,"padding_top",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=e(H.prototype,"padding_bottom",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=e(H.prototype,"padding_left",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=e(H.prototype,"_padding",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=e(H.prototype,"padding_right",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=H))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroNameItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameUtil.ts","./HeroComponent.ts"],(function(e){"use strict";var t,r,i,n,o,a,l,c,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.defineProperty},function(e){a=e.cclegacy,l=e._decorator,c=e.Label,s=e.RichText},function(e){u=e.GameUtil},function(e){p=e.HeroComponent}],execute:function(){var m,f,b,h,y,g,v;a._RF.push({},"b848fI2EWxC+7qN22bCJAgL","HeroNameItem",void 0);var H=l.ccclass,L=l.property;e("HeroNameItem",(m=H("HeroNameItem"),f=L(c),b=L(s),m((g=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(n(t),"starLabel",g,n(t)),i(n(t),"nameRichText",v,n(t)),o(n(t),"_baseScale",.8),t}r(t,e);var a=t.prototype;return a.setName=function(e,t){this.nameRichText.string="<color="+u.getQualityColor(t)+">"+e+"</color>"},a.setStar=function(e){this.starLabel.string=e+""},t}(p)).prototype,"starLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(y.prototype,"nameRichText",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/StateBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i;return{setters:[function(t){e=t.createClass,n=t.defineProperty},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"b9fcbKGrElLmIzcXGD4i2jY","StateBase",void 0);t("StateBase",function(){function t(t){n(this,"_stateName",void 0),n(this,"_stateMachine",void 0),this._stateName=t}var i=t.prototype;return i.onEnter=function(t){},i.onUpdate=function(t){},i.onExit=function(t){},i.init=function(){this._addEvent()},i._addEvent=function(){},i._removeEvent=function(){},i.destroy=function(){var t=this;t._removeEvent(),t._stateName=null,t._stateMachine=null},e(t,[{key:"stateMachine",set:function(t){this._stateMachine=t}},{key:"stateName",get:function(){return this._stateName}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/MainEventEnum.ts",["cc"],(function(E){"use strict";var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){var L;E("MainEventEnum",void 0),_._RF.push({},"c21401ILMtCj4qS1pKNxRBu","MainEventEnum",void 0),function(E){E.PUT_HERO="PUT_HERO",E.TOUCH_HERO="TOUCH_HERO",E.UPDATE_HERO="UPDATE_HERO",E.CHANG_LEVEL="CHANG_LEVEL",E.UP_SKILL="UP_SKILL",E.UP_LV="UP_LV",E.ADD_EXP="ADD_EXP",E.ADD_FIGHT="ADD_FIGHT",E.ADD_WAIT="ADD_WAIT",E.COLLECT_EXP="COLLECT_EXP",E.RESET_HERO="RESET_HERO",E.TOUCH_START_DETAIL_SKILL="TOUCH_START_DETAIL_SKILL",E.TOUCH_END_DETAIL_SKILL="TOUCH_END_DETAIL_SKILL"}(L||(L=E("MainEventEnum",{}))),_._RF.pop()}}}));

System.register("chunks:///_virtual/WallView.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./ConfigManager.ts","./DataManager.ts","./GameList.ts"],(function(t){"use strict";var e,i,a,n,s,l,o,r,c,d,u,f,h,p,g,_,m,D;return{setters:[function(t){e=t.defineProperty,i=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){l=t.cclegacy,o=t._decorator,r=t.Prefab,c=t.Label,d=t.Sprite,u=t.isValid,f=t.instantiate,h=t.Component},function(t){p=t.GameEvent},function(t){g=t.ConfigManager},function(t){_=t.DataManager,m=t.FinishItem},function(t){D=t.default}],execute:function(){var v,w,L,b,C;l._RF.push({},"c2713hXMr5GBKCcb4sO2QCu","WallView",void 0);var y=o.ccclass,V=o.property,P=t("WallItemData",(function(){e(this,"id",0),e(this,"title",""),e(this,"desc",""),e(this,"finishItem",void 0),e(this,"star",0)}));t("WallView",(v=y("WallView"),w=V(r),v((C=i((b=function(t){function i(){for(var i,a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return i=t.call.apply(t,[this].concat(l))||this,n(s(i),"descPrefab",C,s(i)),e(s(i),"_descView",null),e(s(i),"_labLevel",null),e(s(i),"_labExp",null),e(s(i),"_spProgress",null),e(s(i),"_gameList",null),e(s(i),"_itemDataList",[]),i}a(i,t);var l=i.prototype;return l.onLoad=function(){var t=this;t._labLevel=t.node.getChildByName("wall_level").getComponent(c),t._labExp=t.node.getChildByName("exp_lab").getComponent(c),t._spProgress=t.node.getChildByName("bar_progress").getComponent(d),t._gameList=t.node.getChildByName("wall_list").getComponent(D),_.instance().setWallData(1,100),t.updateData(),p.on("UPDATE_WALL_VIEW",t.onUpdate,t)},l.onEnable=function(){this.initItemList()},l.onDestroy=function(){u(this._descView)&&this._descView.destroy(),p.off("UPDATE_WALL_VIEW",this.onUpdate,this)},l.onClickDesc=function(){this.showDesc()},l.showDesc=function(){this._descView?this._descView.active=!0:(this._descView=f(this.descPrefab),this._descView.setParent(this.node))},l.updateData=function(){var t=this,e=_.instance().getWallData(),i=e.level,a=g.instance().wallCfgMap[i].cost[0].amount;t._labLevel.string="城墙等级: "+i,t._labExp.string=e.star+"/"+g.instance().wallCfgMap[i].cost[0].amount,t._spProgress.fillRange=e.star/a},l.initItemList=function(){var t=this;delete t._itemDataList,t._itemDataList=[];for(var e=g.instance().frontCfg,i=_.instance().getWallData(),a=0;a<e.length;a++)if(e[a].id>=1e3&&e[a].id<2e3){var n,s=new P,l=i.times[e[a].id]?i.times[e[a].id].level:0;if(e[a].reward[l]&&e[a].goal[l])s.title=e[a].name,s.desc=e[a].desc,s.star=e[a].reward[l].amount,s.id=e[a].id,s.finishItem=null!==(n=i.times[e[a].id])&&void 0!==n?n:new m(0,e[a].goal[l]),t._itemDataList.push(s)}t._gameList.setData(t._itemDataList)},l.onUpdate=function(){this.updateData(),this.initItemList()},i}(h)).prototype,"descPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=b))||L));l._RF.pop()}}}));

System.register("chunks:///_virtual/LevelRewardItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts"],(function(e){"use strict";var r,t,i,n,a,o,l,c,u,s,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.defineProperty},function(e){o=e.cclegacy,l=e._decorator,c=e.Label,u=e.Sprite,s=e.Component},function(e){p=e.BundleManager}],execute:function(){var d,f,m,v,b,w,y;o._RF.push({},"c2898lNF7RFKLcPsJOr5/Ye","LevelRewardItem",void 0);var L=l.ccclass,g=l.property;e("LevelRewardItem",(d=L("LevelRewardItem"),f=g(c),m=g(u),d((w=r((b=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o))||this,i(n(r),"amountLabel",w,n(r)),i(n(r),"iconSprite",y,n(r)),a(n(r),"_reward",void 0),r}t(r,e);var o=r.prototype;return o.setReward=function(e){this._reward=e},o.start=function(){var e=this,r=e._reward;e.amountLabel.string="x "+r.amount,p.instance().setSpriteFrame(e.iconSprite,"item/"+r.id)},r}(s)).prototype,"amountLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=r(b.prototype,"iconSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=b))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroReset.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtil.ts","./HeroStateEnum.ts","./HeroState.ts"],(function(e){"use strict";var t,o,s,n,r;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy},function(e){s=e.CommonUtil},function(e){n=e.HeroStateEnum},function(e){r=e.HeroState}],execute:function(){o._RF.push({},"c4d8cpGZoVBerT2QWrD2Q7z","HeroReset",void 0);e("HeroReset",function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var r=o.prototype;return r.onEnter=function(){e.prototype.onEnter.call(this);var t=this;t._resetPosOffset(),1!=t._stateMachine.heroBase.camp&&(t._stateMachine.heroBase.resetPos.x=t._stateMachine.heroBase.pos.x>0?410:-410),t._startMove(t._stateMachine.heroBase.resetPos)},r.onStateUpdate=function(e){var t=this,o=t._stateMachine.heroBase,r=o.resetPos,a=o.pos;return r.strictEquals(a)?(t._stateMachine.changeState(n.STAND),t._fightManager.removeFight(o.id),void(1!=t._stateMachine.heroBase.camp&&t._stateMachine.heroItem.removeToPool())):s.getDistance(r.x,r.y,a.x,a.y)<t._moveDifference?(a.x=r.x,void(a.y=r.y)):void t._onMove(r,!0)},o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/LineUpDesc.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,a,n,r,s,c,i,p;return{setters:[function(e){t=e.inheritsLoose,o=e.defineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,s=e.UIOpacity,c=e.tween,i=e.v3,p=e.Component}],execute:function(){var l;n._RF.push({},"c6251bPAB1FxL0eAv2UW8Tg","LineUpDesc",void 0);var m=r.ccclass;r.property,e("LineUpDesc",m("LineUpDesc")(l=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,o(a(t),"_mask",null),o(a(t),"_frameNode",null),t}t(n,e);var r=n.prototype;return r.onLoad=function(){var e=this;e._mask=e.node.getChildByName("mask"),e._frameNode=e.node.getChildByName("frame")},r.onEnable=function(){var e=this,t=e._mask.getComponent(s);c(t).stop(),t.opacity=0,c(t).to(.5,{opacity:100}).start(),e._frameNode.getComponent(s).opacity=255,c(e._frameNode).stop(),e._frameNode.scale=i(0,0,1),c(e._frameNode).to(.2,{scale:i(1.1,1.1,1)}).to(.1,{scale:i(1,1,1)}).start()},r.onHide=function(){var e=this,t=e._mask.getComponent(s);c(t).stop(),c(t).to(.1,{opacity:0}).start(),c(e._frameNode).stop(),c(e._frameNode).to(.1,{scale:i(.6,.6,1)}).call((function(){e.node.active=!1})).start();var o=e._frameNode.getComponent(s);c(o).to(.3,{opacity:0}).start()},n}(p))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.defineProperty},function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"ca873nwM69KdrgRIFM7ClF7","Singleton",void 0);var i=n("Singleton",function(){function n(){}return n.instance=function(){return this._instance||(this._instance=new this),this._instance},n}());t(i,"_instance",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameTipsNameEnum.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){var t;e("GameTipsNameEnum",void 0),n._RF.push({},"ca920qYmrhD0YK85fQHCkGh","GameTipsNameEnum",void 0),function(e){e.CLIENT="client",e.SERVER="server"}(t||(t=e("GameTipsNameEnum",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/ToastUtil.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./ConfigManager.ts","./UIManager.ts","./ToastUI.ts"],(function(t){"use strict";var o,s,n,e,a,i,r,c,l,h,u,f,_;return{setters:[function(t){o=t.createClass,s=t.defineProperty,n=t.asyncToGenerator},function(t){e=t.cclegacy,a=t.instantiate,i=t.tween,r=t.v3,c=t.resources,l=t.Prefab},function(t){h=t.BundleManager},function(t){u=t.ConfigManager},function(t){f=t.UIManager},function(t){_=t.ToastUI}],execute:function(){e._RF.push({},"ca95eWZAKRPcKHFCw9zWhns","ToastUtil",void 0);var d=t("ToastUtil",function(){function t(){s(this,"_loading",!1),s(this,"_toastPrefab",null),s(this,"_toastNodes",[]),s(this,"_showContent",""),s(this,"_showWaitTime",2),s(this,"_listString",[])}var e=t.prototype;return e.createToast=function(t){var o=a(this._toastPrefab),s=o.getComponent(_);if(s){s.content=t||this._showContent,this.toastNodeMoveToUp(),o.parent=f.instance().getTopUI(),this._toastNodes.push(o);var n=this;s.show(this._showWaitTime,(function(){n.removeNode(o)}))}},e.toastNodeMoveToUp=function(){for(var t=this._toastNodes.length,o=40*t,s=0;s<t;++s){var n=this._toastNodes[s];i(n).to(.2,{position:r(0,o)}).start(),o-=40}},e.removeNode=function(t){for(var o=this._toastNodes.length,s=0;s<o;++s){this._toastNodes[s]===t&&this._toastNodes.splice(s,1)}},e.preloadToastPrefab=function(){c.preload(t.RES_NAME,l)},e.showToast=function(){var o=n((function*(o,s){if(this._showContent=o||"",this._showWaitTime=s,this._toastPrefab)this.createToast(o);else if(this._listString.push(o),!this._loading){this._loading=!0;var n=this;h.instance().loadRes(t.RES_NAME,l,null,(function(o,s){if(o)console.error("resource load failed, resName: "+t.RES_NAME);else{n._loading=!1,n._toastPrefab=s;for(var e=0;e<n._listString.length;e++)n.createToast(n._listString[e]);n._listString=[]}}))}}));return function(t,s){return o.apply(this,arguments)}}(),e.clearAllToast=function(){for(var t=this._toastNodes.length,o=0;o<t;++o){this._toastNodes[o].removeFromParent()}this._toastNodes=[]},t.preloadToast=function(){t.instance.preloadToastPrefab()},t.show=function(o,s){void 0===s&&(s=2),t.instance.showToast(o,s)},t.showById=function(o){for(var s,n=u.instance().clientTipsMap,e="$",a=null!==(s=n[o])&&void 0!==s?s:"未知错误",i=arguments.length,r=new Array(i>1?i-1:0),c=1;c<i;c++)r[c-1]=arguments[c];r.forEach((function(t){a=a.replace(e,t)})),t.instance.showToast(a,2)},t.clearAll=function(){t.instance.clearAllToast()},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t)}}]),t}());s(d,"RES_NAME","prefab/base/toast"),s(d,"_instance",null),e._RF.pop()}}}));

System.register("chunks:///_virtual/HeroSkillBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillEffect1.ts","./ConfigManager.ts","./SkillEffect2.ts","./SkillEffectEnum.ts","./FightManager.ts"],(function(e){"use strict";var t,i,n,f,a,r,s,c;return{setters:[function(e){t=e.createClass,i=e.defineProperty},function(e){n=e.cclegacy},function(e){f=e.SkillEffect1},function(e){a=e.ConfigManager},function(e){r=e.SkillEffect2},function(e){s=e.SkillEffectEnum},function(e){c=e.FightManager}],execute:function(){n._RF.push({},"cae73/GHGJEto8/NnIrtSev","HeroSkillBase",void 0);e("HeroSkillBase",function(){function e(){i(this,"_heroBase",void 0),i(this,"_skillCfg",void 0),i(this,"effectArray",[])}var n=e.prototype;return n.initSkillEffect=function(){for(var e,t,i=this._skillCfg.effect,n=i.length,l=this.effectArray,o=a.instance().effectCfgMap,u=0;u<n;u++){switch((e=o[i[u]]).type){case s.TYPE1:t=new f;break;case s.TYPE2:t=new r}t.fightManager=c.instance(),t.effectCfg=e,t.init(),l.push(t)}},n.handleEffect=function(e){var t,i,n=this.effectArray,f=n.length;e.heroBase=this._heroBase;for(var a=0;a<f;a++)if(t=n[a].startEffect(e),i)for(var r=Object.keys(t),s=r.length,c=void 0,l=void 0,o=0;o<s;o++)l=t[Number(r[o])],(c=i[Number(r[o])])?(l.damage&&(c.damage?c.damage+=l.damage:(c.damage,l.damage)),l.attribute&&(c.attribute?c.attribute.handleAttribute(l.attribute):c.attribute=l.attribute)):c=l;else i=t;return i},t(e,[{key:"heroBase",set:function(e){this._heroBase=e}},{key:"skillCfg",get:function(){return this._skillCfg},set:function(e){this._skillCfg=e}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(i){"use strict";var e,t,f,n,l,g;return{setters:[function(i){e=i.inheritsLoose,t=i.defineProperty,f=i.assertThisInitialized},function(i){n=i.cclegacy,l=i._decorator},function(i){g=i.Singleton}],execute:function(){var r;n._RF.push({},"ceefbGWB3hG/Idq7qDjas32","ConfigManager",void 0);var a=l.ccclass;i("ConfigManager",a("ConfigManager")(r=function(i){function n(){for(var e,n=arguments.length,l=new Array(n),g=0;g<n;g++)l[g]=arguments[g];return e=i.call.apply(i,[this].concat(l))||this,t(f(e),"clientTipsMap",void 0),t(f(e),"serverTipsMap",void 0),t(f(e),"chapterCfg",void 0),t(f(e),"chapterCfgMap",void 0),t(f(e),"effectCfg",void 0),t(f(e),"effectCfgMap",void 0),t(f(e),"frontCfg",void 0),t(f(e),"frontCfgMap",void 0),t(f(e),"heroCfg",void 0),t(f(e),"heroCfgMap",void 0),t(f(e),"itemCfg",void 0),t(f(e),"itemCfgMap",void 0),t(f(e),"levelCfg",void 0),t(f(e),"levelCfgMap",void 0),t(f(e),"miscCfg",void 0),t(f(e),"miscCfgMap",void 0),t(f(e),"skillCfg",void 0),t(f(e),"skillCfgMap",void 0),t(f(e),"skillLvCfg",void 0),t(f(e),"skillLvCfgMap",void 0),t(f(e),"wallCfg",void 0),t(f(e),"wallCfgMap",void 0),e}e(n,i);var l=n.prototype;return l.init=function(i,e,t){if(!i){var f=this;if(0==t){var n=e.json;f.clientTipsMap=n.client,f.serverTipsMap=n.server}else{var l=e.json;f._initConfig(f.chapterCfg=l.chapterCfg,f.chapterCfgMap=Object.create(null)),f._initConfig(f.effectCfg=l.effectCfg,f.effectCfgMap=Object.create(null)),f._initConfig(f.frontCfg=l.frontCfg,f.frontCfgMap=Object.create(null)),f._initConfig(f.heroCfg=l.heroCfg,f.heroCfgMap=Object.create(null)),f._initConfig(f.itemCfg=l.itemCfg,f.itemCfgMap=Object.create(null)),f._initConfig(f.levelCfg=l.levelCfg,f.levelCfgMap=Object.create(null)),f._initConfig(f.miscCfg=l.miscCfg,f.miscCfgMap=Object.create(null)),f._initConfig(f.skillCfg=l.skillCfg,f.skillCfgMap=Object.create(null)),f._initConfig(f.skillLvCfg=l.skillLvCfg,f.skillLvCfgMap=Object.create(null)),f._initConfig(f.wallCfg=l.wallCfg,f.wallCfgMap=Object.create(null))}}},l._initConfig=function(i,e){for(var t,f=i.length,n=0;n<f;n++)e[(t=i[n]).id]=t},l.getConfigArray=function(i,e){for(var t,f,n,l,g=this[i],r=g.length,a=Object.keys(e),o=a.length,c=0;c<r;c++){t=g[c],n=!0;for(var C=0;C<o;C++){if(f=a[C],!t.hasOwnProperty(f)){n=!1;break}if(t[f]!=e[f]){n=!1;break}}n&&(l||(l=[]),l.push(t))}return l||null},l.getMisc=function(i){return this.miscCfgMap[i].value},n}(g))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillReturnDataMap.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d815bjGZpRK56ttarufmGyk","SkillReturnDataMap",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/FrontUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./RedDotControl.ts","./UIBase.ts","./DataManager.ts"],(function(t){"use strict";var o,e,n,r,a,i,s,c;return{setters:[function(t){o=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator},function(t){i=t.RedDotControl},function(t){s=t.UIBase},function(t){c=t.DataManager}],execute:function(){var u;r._RF.push({},"de0f0XIM7tNV5B5cToZz9+U","FrontUI",void 0);var l=a.ccclass;a.property,t("FrontUI",l("FrontUI")(u=function(t){function r(){for(var o,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=t.call.apply(t,[this].concat(a))||this,e(n(o),"maskThrough",!0),e(n(o),"redDotControl",null),o}o(r,t);var a=r.prototype;return a.show=function(){},a.start=function(){},a.onLoad=function(){var t=this;t.redDotControl=t.node.getChildByName("tab_wall").getComponent(i),t.redDotControl.updateShowFunction=this.updateRedPot.bind(this)},a.updateRedPot=function(){for(var t=c.instance().getWallData(),o=0,e=Object.keys(t.times),n=0;n<e.length;n++){var r=t.times[e[n]];r.curTime>=r.needTime&&o++}return o},a.update=function(t){this.redDotControl.delayUpdateShow()},r}(s))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./GameEvent.ts","./PoolManager.ts","./UIManager.ts","./MainEventEnum.ts","./DataManager.ts","./UIModule.ts","./PoolBase.ts","./FightManager.ts","./HeroSkillItem.ts"],(function(e){"use strict";var t,o,n,i,a,s,l,r,c,h,m,u,d,_,f,v,p,I,g,T,C,b,E,y,P,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.defineProperty,s=e.createClass},function(e){l=e.cclegacy,r=e._decorator,c=e.sp,h=e.Prefab,m=e.Node,u=e.RigidBody2D,d=e.BoxCollider2D,_=e.Contact2DType,f=e.Input,v=e.ERigidBody2DType},function(e){p=e.BundleManager},function(e){I=e.GameEvent},function(e){g=e.PoolManager},function(e){T=e.UIManager},function(e){C=e.MainEventEnum},function(e){b=e.DataManager},function(e){E=e.UIModule},function(e){y=e.PoolBase},function(e){P=e.FightManager},function(e){B=e.HeroSkillItem}],execute:function(){var k,x,H,S,N,D,A,V,L,F,M,U,O,R,w;l._RF.push({},"e2abbbYJ0VHEKCSNw0VHaWQ","HeroItem",void 0);var z=r.ccclass,j=r.property;e("HeroItem",(k=z("HeroItem"),x=j(c.Skeleton),H=j(h),S=j(m),N=j(m),D=j(u),A=j(d),k((F=t((L=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return t=e.call.apply(e,[this].concat(s))||this,n(i(t),"skeleton",F,i(t)),n(i(t),"skillItemPrefab",M,i(t)),n(i(t),"effectFrontNode",U,i(t)),n(i(t),"effectAfterNode",O,i(t)),n(i(t),"rigidBody2D",R,i(t)),n(i(t),"boxCollider2D",w,i(t)),a(i(t),"_heroBase",void 0),a(i(t),"_scaleV3",void 0),a(i(t),"_aniCallback",void 0),a(i(t),"_aniEventCallback",void 0),a(i(t),"_isLoadedSkeleton",!1),a(i(t),"_isTouch",!1),a(i(t),"_scale",void 0),a(i(t),"_touchHeroItem",null),a(i(t),"_actionName",void 0),a(i(t),"_actionLoop",void 0),a(i(t),"hpItem",void 0),a(i(t),"lvItem",void 0),a(i(t),"nameItem",void 0),a(i(t),"nameFrameItem",void 0),a(i(t),"expItem",void 0),a(i(t),"_startPos",void 0),t}o(t,e);var l=t.prototype;return l.start=function(){var e=this;e.skeleton.setCompleteListener(e.onEnd.bind(e)),e.skeleton.setEventListener(e.onAttack.bind(e))},l.onAttack=function(e,t){var o=this;"hit"==t.data.name&&o._aniEventCallback&&(o._aniEventCallback.call(this),o._aniEventCallback=null)},l.onEnd=function(e){var t=this;t._actionName=null,t._actionLoop=null,t._aniCallback&&(t._aniCallback.call(this),t._aniCallback=null)},l.onEnable=function(){var e=this;if(e._heroBase&&1==e._heroBase.camp){var t=e.node;e.boxCollider2D.on(_.BEGIN_CONTACT,this.onBeginContact,this),e.boxCollider2D.on(_.END_CONTACT,this.onEndContact,this),t.on(f.EventType.TOUCH_START,e.onTouchStart,e),t.on(f.EventType.TOUCH_MOVE,e.onTouchMove,e),t.on(f.EventType.TOUCH_END,e.onTouchEnd,e),t.on(f.EventType.TOUCH_CANCEL,e.onTouchEnd,e)}e._scaleV3||(e._scaleV3=e.node.getScale()),e._scale=e._scaleV3.x=e._scaleV3.y=e._heroBase.heroCfg.scale,e.node.setScale(e._scaleV3),e._isLoadedSkeleton=!1,p.instance().setSkeleton(e.skeleton,"hero/"+e._heroBase.heroCfg.skeleton+"/"+e._heroBase.heroCfg.skeleton,(function(){if(!e._isLoadedSkeleton){e._isLoadedSkeleton=!0,e.skeleton.clearTracks();var t=null!=e._actionName?e._actionName:"daiji",o=null==e._actionLoop||e._actionLoop;e.playAction(t,o,e._aniCallback,e._aniEventCallback)}}))},l.onDisable=function(){var e=this;if(e._heroBase&&1==e._heroBase.camp){var t=e.node;t.off(f.EventType.TOUCH_START,e.onTouchStart,e),t.off(f.EventType.TOUCH_MOVE,e.onTouchMove,e),t.off(f.EventType.TOUCH_END,e.onTouchEnd,e),t.off(f.EventType.TOUCH_CANCEL,e.onTouchEnd,e),e.boxCollider2D.off(_.BEGIN_CONTACT,this.onBeginContact,this),e.boxCollider2D.off(_.END_CONTACT,this.onEndContact,this)}},l.onBeginContact=function(e,o,n){this._isTouch&&(this._touchHeroItem=o.node.getComponent(t),console.log("onBeginContact"))},l.onEndContact=function(e,t,o){this._isTouch&&(this._touchHeroItem=null,console.log("onEndContact"))},l.onTouchStart=function(e){var t=this;1==t._heroBase.camp&&(t._startPos=e.getUILocation(),P.instance().isFight&&t._heroBase.isFight||(t.getExp(),I.dispatchEvent(C.TOUCH_HERO,t.node),t._isTouch=!0,t.skeleton.setAnimation(0,"daiji",!0)))},l.getExp=function(){b.instance().getExp(this._heroBase.heroCfg.id),this.expItem.node.active=!1},l.onTouchMove=function(e){var t=this;if(t._isTouch){var o=e.getUIDelta(),n=t.node.getPosition();t.node.setPosition(n.x+o.x,n.y+o.y);var i=t.getHpPos();i.x+=o.x,i.y+=o.y,t.hpItem.setPosition(i);var a=t.getLvPos();a.x+=o.x,a.y+=o.y,t.lvItem.setPosition(a);var s=t.getNamePos(!0);s.x+=o.x,s.y+=o.y,t.nameItem.setPosition(s),t.nameFrameItem.setPosition(s)}},l.onTouchEnd=function(e){var t=this;if(t._isTouch){if(t._isTouch=!1,t.skeleton.setAnimation(0,"daiji",!0),e.getUILocation().strictEquals(t._startPos))return t._isTouch=!1,T.instance().showUI(E.HERO_DETAIL_UI,t._heroBase.heroCfg.id),void I.dispatchEvent(C.RESET_HERO,t);I.dispatchEvent(C.PUT_HERO,e.getUILocation(),t,t._touchHeroItem),t._touchHeroItem=null}},l.setHp=function(){this.hpItem.setHp(this._heroBase.attribute.hp/this._heroBase.attribute.maxHp)},l.setAction=function(){this.hpItem.setAction(1-(this._heroBase.actionTime-(new Date).getTime())/(this._heroBase.actionTime-this._heroBase.lastActionTime))},l.setLv=function(){this.lvItem.setLv(this._heroBase.lv)},l.setStar=function(){this.nameItem.setStar(this._heroBase.star)},l.setRigidBodyMove=function(){this.rigidBody2D.type=v.Dynamic},l.setRigidBodyStop=function(){this.rigidBody2D.type=v.Kinematic},l.playAction=function(e,t,o,n){var i=this;i._actionName=e,i._actionLoop=t,i._isLoadedSkeleton&&(i.skeleton.findAnimation(i._actionName)?(i.skeleton.timeScale=P.instance().fightSpeed,i.skeleton.setAnimation(0,e,t)):(i._actionName="putonggongji",console.error(this._heroBase.heroCfg.id+"缺失动作"+e))),o&&(i._aniCallback=o),n&&(i._aniEventCallback=n)},l.setDirection=function(e){var t=this;t._scaleV3.x=e?1*t._scale:-1*t._scale;var o=t.getNamePos(e);t.nameItem.setPosition(o),t.nameFrameItem.setPosition(o),t.node.setScale(t._scaleV3),t.effectFrontNode.setScale(t._scaleV3),t.effectAfterNode.setScale(t._scaleV3)},l.setPosition=function(){var e=this;e.node.setPosition(e._heroBase.pos),e.hpItem.setPosition(e.getHpPos()),e.lvItem.setPosition(e.getLvPos());var t=e.getNamePos(!0);e.nameItem.setPosition(t),e.nameFrameItem.setPosition(t),e.expItem.setPosition(e.getExpPos())},l.setHpVisible=function(e){this.hpItem.setVisible(e)},l.setHeroActive=function(e){var t=this;t.node.active=e,e&&t.hpItem.resetBar(),t.setComponentVisible(e)},l.setComponentVisible=function(e){var t=this;t.setHpVisible(e),t.lvItem.setVisible(e),t.nameItem.setVisible(e),t.nameFrameItem.setVisible(e)},l.removeToPool=function(){var t=this;t._heroBase.destroy(),t._heroBase=null,t.hpItem.removeToPool(),t.hpItem=null,t.lvItem.removeToPool(),t.lvItem=null,t.nameItem.removeToPool(),t.nameItem=null,t.nameFrameItem.removeToPool(),t.nameFrameItem=null,t.expItem.removeToPool(),t.expItem=null,e.prototype.removeToPool.call(this)},l.getFontPos=function(){var e=this.node.getPosition();return e.y+=150*this._scale,e},l.getHpPos=function(){var e=this.node.getPosition();return e.y+=130*this._scale,e},l.getLvPos=function(){var e=this.node.getPosition();return e.y+=100*this._scale,e},l.getNamePos=function(e){var t=this,o=t.node.getPosition();return o.x+=e?60*t._scale:-60*t._scale,o.y+=130*t._scale,o},l.getExpPos=function(){var e=this.node.getPosition();return e.y+=150*this._scale,e},l.setZIndex=function(e){var t=this;t.hpItem.node.setSiblingIndex(e),t.lvItem.node.setSiblingIndex(e),t.nameItem.node.setSiblingIndex(e),t.nameFrameItem.node.setSiblingIndex(e),t.node.setSiblingIndex(e)},l.setSkill=function(e,t){var o=this,n=g.instance().getNode(o.skillItemPrefab);n.getComponent(B).show(e),t?o.effectAfterNode.addChild(n):o.effectFrontNode.addChild(n)},l.setHpItem=function(){var e=this;e.hpItem.setHpType(1!=e._heroBase.camp),e.hpItem.setScale(e.scaleV3)},l.setLvItem=function(){var e=this;e.lvItem.setLv(e._heroBase.lv),e.lvItem.setScale(e.scaleV3)},l.setNameFrameItem=function(){this.nameFrameItem.setScale(this.scaleV3)},l.setExpItem=function(){var e=this;1==e._heroBase.camp?(e.expItem.id=e._heroBase.heroCfg.id,e.expItem.setAmount()):e.expItem.node.active=!1},l.setExp=function(){this.expItem.setAmount()},l.setNameItem=function(){var e=this,t=e._heroBase.heroCfg;e.nameItem.setName(t.name,t.quality),e.nameItem.setStar(e._heroBase.star),e.nameItem.setScale(e.scaleV3)},s(t,[{key:"heroBase",get:function(){return this._heroBase},set:function(e){this._heroBase=e}},{key:"scaleV3",get:function(){return this._scaleV3}}]),t}(y)).prototype,"skeleton",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(L.prototype,"skillItemPrefab",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(L.prototype,"effectFrontNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(L.prototype,"effectAfterNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(L.prototype,"rigidBody2D",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(L.prototype,"boxCollider2D",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=L))||V));l._RF.pop()}}}));

System.register("chunks:///_virtual/HeroSearch.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./HeroStateEnum.ts","./HeroState.ts"],(function(t){"use strict";var e,n,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.HeroStateEnum},function(t){a=t.HeroState}],execute:function(){n._RF.push({},"e571f3L7xpKaLsEKPj73Mbw","HeroSearch",void 0);t("HeroSearch",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this,n=e._fightManager.searchTarget(e._stateMachine.heroBase);n?(e._stateMachine.heroBase.target=n,e._stateMachine.changeState(r.MOVE)):e._stateMachine.changeState(r.STAND)},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroStateMachine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./HeroStateEnum.ts","./StateMachine.ts"],(function(e){"use strict";var t,n,r,a,i,o;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy},function(e){i=e.HeroStateEnum},function(e){o=e.StateMachine}],execute:function(){a._RF.push({},"e8a13s4JaZP7LIOV92QOrT/","HeroStateMachine",void 0);e("HeroStateMachine",function(e){function a(){for(var t,a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,n(r(t),"heroBase",void 0),n(r(t),"_defaultStateName",i.STAND),n(r(t),"heroItem",void 0),t}return t(a,e),a}(o));a._RF.pop()}}}));

System.register("chunks:///_virtual/SkillEffectData.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e;return{setters:[function(t){i=t.defineProperty},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"f160fOu4LRFOogaRfl/VzVw","SkillEffectData",void 0);t("SkillEffectData",(function(){i(this,"finalDamage",void 0),i(this,"handleHeroBase",void 0),i(this,"isCrit",void 0),i(this,"attackId",void 0),i(this,"heroBase",void 0)}));e._RF.pop()}}}));

System.register("chunks:///_virtual/SkillEffect3.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonParam.ts","./SkillEffectBase.ts"],(function(e){"use strict";var t,i,n,o,r,c;return{setters:[function(e){t=e.inheritsLoose,i=e.defineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy},function(e){r=e.CommonParam},function(e){c=e.SkillEffectBase}],execute:function(){o._RF.push({},"f56a5rxpjBAsZeH8Fvt5ON+","SkillEffect3",void 0);e("SkillEffect3",function(e){function o(){for(var t,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(n(t),"_move",void 0),i(n(t),"_time",void 0),i(n(t),"_width",void 0),i(n(t),"_height",void 0),i(n(t),"_damage",void 0),t}return t(o,e),o.prototype.init=function(){var e=this,t=e._effectCfg.value.split(r.split1);e._move=Number(t[0]),e._time=Number(t[1]),e._width=Number(t[2]),e._height=Number(t[3]),e._damage=Number(t[4])},o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroSkillAoe.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./CommonUtil.ts","./SkillEffectData.ts"],(function(e){"use strict";var t,i,o,r,a,s;return{setters:[function(e){t=e.defineProperty},function(e){i=e.cclegacy,o=e.Rect,r=e.v2},function(e){a=e.CommonUtil},function(e){s=e.SkillEffectData}],execute:function(){i._RF.push({},"f7a9asxHJJBuo1TIRuUuLv/","HeroSkillAoe",void 0);e("HeroSkillAoe",function(){function e(){t(this,"pos",void 0),t(this,"damage",void 0),t(this,"targetPos",void 0),t(this,"_fightManager",void 0),t(this,"move",void 0),t(this,"_moveDifference",5),t(this,"triggerIdArray",void 0),t(this,"camp",void 0),t(this,"rect",void 0),t(this,"heroBase",void 0),t(this,"heroSkillItem",void 0)}var i=e.prototype;return i.init=function(e,t,i){var r=this;r.pos=e,r.rect=new o(r.pos.x-t/2,r.pos.y-i/2,t,i)},i.onUpdate=function(){var e=this,t=e.targetPos,i=e.pos;if(!t.strictEquals(i)){if(a.getDistance(t.x,t.y,i.x,i.y)<e._moveDifference)return i.x=t.x,void(i.y=t.y);var o=e._fightManager.fightSpeed,n=a.radian(t.x,t.y,i.x,i.y),c=Math.cos(n),f=Math.sin(n),h=e.move;i.x+=c*h*o,i.y+=f*h*o;for(var d,l=e._fightManager.heroBaseMap,u=Object.keys(l),v=u.length,p=e.rect,g=e.camp,m=e.triggerIdArray,y=e.damage,x=e.heroBase,k=0;k<v;k++)if(d=l[u[k]],p.contains(r(d.pos.x,d.pos.y))&&-1==m.indexOf(d.id)&&d.camp!=g){m.push(d.id);var S=new s;S.handleHeroBase=x,S.attackId=d.id,S.finalDamage=y,d.stateMachine.getCurrentState().suffer(S)}e.heroSkillItem.node.setPosition(e.pos)}},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRequest.ts",["cc","./LogUtil.ts","./UIManager.ts","./UIModule.ts"],(function(e){"use strict";var t,s,r,n;return{setters:[function(e){t=e.cclegacy},function(e){s=e.LogUtil},function(e){r=e.UIManager},function(e){n=e.UIModule}],execute:function(){t._RF.push({},"f7e4eS0qYVFhriK7kqEnvda","HttpRequest",void 0);e("default",function(){function e(){}return e.request=function(e,t,o,u,i){if(e){var a=new XMLHttpRequest;if(r.instance().showUI(n.WAIT_UI),a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<300?(r.instance().hideUI(n.WAIT_UI),"arraybuffer"==a.responseType||"blob"==a.responseType?u&&u(a.response):u&&u(a.responseText)):(r.instance().hideUI(n.WAIT_UI),i?i("请求错误, 错误状态:"+a.status):console.error("request error status : "+a.status+" url : "+e+" ")))},o&&o.responseType?a.responseType=o.responseType:a.responseType="text",o&&o.timeout?a.timeout=o.timeout:a.timeout=1e4,a.ontimeout=function(){r.instance().hideUI(n.WAIT_UI),a.abort(),i?i("连接超时"):console.warn("request timeout : "+e)},a.onerror=function(){r.instance().hideUI(n.WAIT_UI),i?i("请求错误"):console.error("request error : "+e+" ")},s.log("HttpRequest.request, url: "+e+" method: "+t+" responseType: "+a.responseType),a.open(t,e),o&&o.body){var c=JSON.stringify(o.body);a.send(c)}else a.send()}else i?i("错误的Url地址"):console.error("HttpRequest.request: reuqest url error")},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BundleManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LogUtil.ts","./Singleton.ts"],(function(e){"use strict";var n,t,o,r,l,a,i,u,s,c,d,f,m;return{setters:[function(e){n=e.inheritsLoose,t=e.defineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.assetManager,i=e.ImageAsset,u=e.SpriteAtlas,s=e.SpriteFrame,c=e.sp,d=e.AudioClip},function(e){f=e.LogUtil},function(e){m=e.Singleton}],execute:function(){var g;r._RF.push({},"f8e94BaqvhLPK69MlXwEIwG","BundleManager",void 0);var p=l.ccclass;e("BundleManager",p("BundleManager")(g=function(e){function r(){for(var n,r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];return n=e.call.apply(e,[this].concat(l))||this,t(o(n),"bundleName",void 0),n}n(r,e);var l=r.prototype;return l.loadBundle=function(e,n){var t=this;return new Promise((function(o,r){a.loadBundle(t.bundleName,e,(function(e,t){e&&r(e),n&&n(t),o(t)}))}))},l.loadDir=function(e,n,t){var o=this;return new Promise((function(r,l){var i=a.getBundle(o.bundleName);i||(f.log("!"+o.bundleName+"/"+e),l()),i.preloadDir(e,n,(function(e,n){e&&l(e),t&&t(n),r(n)}))}))},l.loadRes=function(e,n,t,o){var r=this;return new Promise((function(l,i){var u=a.getBundle(r.bundleName);u||(f.log("!"+r.bundleName+"/"+e),i()),u.load(e,n,t,(function(e,n){e&&(f.log("!"+r.bundleName+"/"+e),i(e)),o&&o(e,n),l(n)}))}))},r.loadTexture=function(e,n){return new Promise((function(t){a.loadRemote(e,(function(o,r){!o&&r instanceof i?(n&&n(null,r),t(r)):(f.log("load url :"+e+"  is error: "+o),n&&n(o,null),t(null))}))}))},l.releaseRes=function(e){a.getBundle(this.bundleName).release(e)},l.setSpriteAtlas=function(e,n,t){n&&t&&this.loadRes("texture/"+n,u,null,(function(n,o){n?console.error("load "+t+"error!!"):e.spriteFrame=o.getSpriteFrame(t)}))},l.setSpriteFrame=function(e,n){n&&this.loadRes("dynamic/"+n+"/spriteFrame",s,null,(function(t,o){t?console.error("load "+n+"error!!"):e.spriteFrame=o}))},l.setSkeleton=function(e,n,t){n&&this.loadRes("animation/"+n,c.SkeletonData,null,(function(o,r){e.node.active=!1,e.destroyRenderData(),o?console.error("load "+n+"error!!"):(e.skeletonData=r,e.node.active=!0,t&&t())}))},l.loadSound=function(e,n){this.loadRes(e,d,null,(function(t,o){t?console.error("load "+e+"error!!"):n&&n(o)}))},r}(m))||g);r._RF.pop()}}}));

System.register("chunks:///_virtual/CommonUtil.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t._decorator}],execute:function(){var o;e._RF.push({},"f9972PS0D9OkrXoYM91dyMb","CommonUtil",void 0);var r=n.ccclass;n.property,t("CommonUtil",r("CommonUtil")(o=function(){function t(){}return t.getRandom=function(t,e){return Math.round(Math.random()*(e-t)+t)},t.timeConvert=function(t,e){if(!(t<0)){var n,o,r,a,i=Math.floor;switch(e){case 1:return n=i(t/864e5),o=i(t%864e5/36e5),r=i(t%36e5/6e4),a=i(t%6e4/1e3),0!=n?n+"天"+o+"小时"+r+"分钟"+a+"秒":0!=o?o+"小时"+r+"分钟"+a+"秒":0!=r?r+"分钟"+a+"秒":a+"秒";case 2:return(o=this.timeModify(i(t/1e3/3600)))+":"+(r=this.timeModify(i(t/1e3%3600/60)))+":"+(a=this.timeModify(i(t/1e3%60%60)))}}},t.timeModify=function(t){var e=t.toString();return t<10&&(e="0"+e),e},t.getDistance=function(t,e,n,o){var r=n-t,a=o-e;return Math.sqrt(r*r+a*a)},t.CopyTextEventHtml=function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.contain="strict",e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="12pt";var n,o=getSelection();o.rangeCount>0&&(n=o.getRangeAt(0)),document.body.appendChild(e),e.select(),e.selectionStart=0,e.selectionEnd=t.length;try{document.execCommand("copy")}catch(t){}document.body.removeChild(e),n&&(o.removeAllRanges(),o.addRange(n))},t.angleToRadian=function(t){return t*(Math.PI/180)},t.radianToAngle=function(t){return t*(180/Math.PI)},t.radian=function(t,e,n,o){var r=t-n,a=e-o;return Math.atan2(a,r)},t.angle=function(t,e,n,o){return this.radianToAngle(this.radian(t,e,n,o))},t.seedRandom=function(t,e){return t+(9301*Math.ceil((new Date).getTime()/500)+49297)%233280/233280*(e-t)},t.changeToRomeNum=function(t){var e;return null!==(e=["","I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII"][t])&&void 0!==e?e:""},t.amountConvert=function(t){var e="",n=t;return t>1e6?(e="M",n=t/1e6):t>1e3&&(e="K",n=t/1e3),(n=Math.floor(n))+e},t}())||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/FightEventEnum.ts",["cc"],(function(E){"use strict";var t;return{setters:[function(E){t=E.cclegacy}],execute:function(){var T;E("FightEventEnum",void 0),t._RF.push({},"fbe4eaJMc1MYICdORUj3Rud","FightEventEnum",void 0),function(E){E.ADD_HERO="ADD_HERO",E.ADD_FIGHT="ADD_FIGHT",E.MOVE="MOVE",E.RESET="RESET",E.ADD_HEROS="ADD_HEROS",E.FIGHT_RESULT="FIGHT_RESULT",E.FIGHT_START="FIGHT_START",E.FIGHT_END="FIGHT_END",E.NEXT_FIGHT="NEXT_FIGHT",E.SHOW_FONT="SHOW_FONT"}(T||(T=E("FightEventEnum",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./LogUtil.ts","./Singleton.ts","./BundleManager.ts","./RedDotControl.ts","./CommonParam.ts","./FightEventEnum.ts","./EventListener.ts","./GameEvent.ts","./HeroAttributeEnum.ts","./HeroAttribute.ts","./CommonUtil.ts","./SkillReturnData.ts","./SkillTargetEnum.ts","./SkillEffectBase.ts","./ValueTypeEnum.ts","./SkillEffect1.ts","./SkillEffectData.ts","./SkillTriggerEnum.ts","./HeroStateEnum.ts","./StateBase.ts","./HeroState.ts","./HeroStart.ts","./ConfigManager.ts","./GameConfigNameEnum.ts","./PoolManager.ts","./UIModuleParams.ts","./UILayerType.ts","./UIManager.ts","./UIPriority.ts","./UIViewType.ts","./UIBase.ts","./ConfigUration.ts","./ToastUI.ts","./ToastUtil.ts","./MainEventEnum.ts","./DataManager.ts","./QualityEnum.ts","./GameUtil.ts","./UIModule.ts","./PoolBase.ts","./FightFontItem.ts","./HeroAction.ts","./HeroAttack.ts","./HeroDeath.ts","./HeroMove.ts","./HeroReset.ts","./HeroSearch.ts","./HeroSkill.ts","./HeroStand.ts","./StateMachine.ts","./HeroStateMachine.ts","./ActiveTypeEnum.ts","./SkillEffect2.ts","./SkillEffectEnum.ts","./HeroSkillBase.ts","./HeroBase.ts","./FightManager.ts","./HeroComponent.ts","./HeroExpItem.ts","./HeroHpItem.ts","./HeroSkillItem.ts","./HeroItem.ts","./HeroLvItem.ts","./HeroNameFrameItem.ts","./HeroNameItem.ts","./FightUI.ts","./LineUpHeroItem.ts","./GameTime.ts","./WaitUI.ts","./HttpRequest.ts","./HttpLogic.ts","./LoginUI.ts","./NetInterface.ts","./LevelRewardItem.ts","./LevelRewardUI.ts","./GameListItemRender.ts","./HeroDetailSkillItem.ts","./AudioManager.ts","./GameButton.ts","./GameList.ts","./LineUpView.ts","./WallItem.ts","./WallDesc.ts","./LevelTopItem.ts","./ChapterShowItem.ts","./ChapterShowUI.ts","./NetNode.ts","./NetManager.ts","./HeroDetailSkillTipsUI.ts","./MainUI.ts","./WebSock.ts","./Main.ts","./SDKManager.ts","./TabItem.ts","./TabLayout.ts","./HeroDetailUI.ts","./LotteryUI.ts","./LevelTopUI.ts","./GameLabel.ts","./GameSprite.ts","./LineUpItem.ts","./WallView.ts","./LineUpDesc.ts","./GameTipsNameEnum.ts","./SkillReturnDataMap.ts","./FrontUI.ts","./SkillEffect3.ts","./HeroSkillAoe.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});